{
  "firstLayout": "",
  "gdVersion": {
    "build": 99,
    "major": 4,
    "minor": 0,
    "revision": 0
  },
  "properties": {
    "adaptGameResolutionAtRuntime": true,
    "antialiasingMode": "MSAA",
    "antialisingEnabledOnMobile": false,
    "folderProject": false,
    "orientation": "landscape",
    "packageName": "com.example.quick.impulse.xpansion",
    "pixelsRounding": false,
    "projectUuid": "7cd4e20e-a8ff-486f-a250-13631eace82d",
    "scaleMode": "linear",
    "sizeOnStartupMode": "",
    "templateSlug": "",
    "useExternalSourceFiles": false,
    "version": "1.0.0",
    "name": "Quick Impulse Xpansion",
    "description": "Hold the mouse left button to draw a path from the screen borders to gain territory avoiding the lava.\n\nPress \"Enter\" to reset the game.\n\nIt was made with GDevelop for Video Games Lab: Game Jam 2021.\n\nIt uses a Marching Squares extension that allows to do operations on scalar fields without math or coding knowledge.\n\nif you are curious to see how it works, hit-boxes can be shown by pressing the key \"D\".",
    "author": "D8H",
    "windowWidth": 800,
    "windowHeight": 600,
    "latestCompilationDirectory": "C:\\Users\\davyh\\Documents\\GDevelop projects\\_Export\\QuickImpulseXpansion",
    "maxFPS": 60,
    "minFPS": 20,
    "verticalSync": false,
    "platformSpecificAssets": {
      "android-icon-144": "",
      "android-icon-192": "",
      "android-icon-36": "",
      "android-icon-48": "",
      "android-icon-72": "",
      "android-icon-96": "",
      "android-windowSplashScreenAnimatedIcon": "",
      "desktop-icon-512": "",
      "ios-icon-100": "",
      "ios-icon-1024": "",
      "ios-icon-114": "",
      "ios-icon-120": "",
      "ios-icon-144": "",
      "ios-icon-152": "",
      "ios-icon-167": "",
      "ios-icon-180": "",
      "ios-icon-20": "",
      "ios-icon-29": "",
      "ios-icon-40": "",
      "ios-icon-50": "",
      "ios-icon-57": "",
      "ios-icon-58": "",
      "ios-icon-60": "",
      "ios-icon-72": "",
      "ios-icon-76": "",
      "ios-icon-80": "",
      "ios-icon-87": "",
      "liluo-thumbnail": "square-icon.png"
    },
    "loadingScreen": {
      "backgroundColor": 0,
      "backgroundFadeInDuration": 0.2,
      "backgroundImageResourceName": "",
      "gdevelopLogoStyle": "light",
      "logoAndProgressFadeInDuration": 0.2,
      "logoAndProgressLogoFadeInDelay": 0.2,
      "minDuration": 0.1,
      "progressBarColor": 16777215,
      "progressBarHeight": 20,
      "progressBarMaxWidth": 200,
      "progressBarMinWidth": 40,
      "progressBarWidthPercent": 30,
      "showGDevelopSplash": false,
      "showProgressBar": false
    },
    "watermark": {
      "placement": "bottom-left",
      "showWatermark": true
    },
    "authorIds": [
      "IWykYNRvhCZBN3vEgKEbBPOR3Oc2"
    ],
    "authorUsernames": [
      "D8H"
    ],
    "categories": [
      "action"
    ],
    "playableDevices": [
      "mobile"
    ],
    "extensionProperties": [],
    "platforms": [
      {
        "name": "GDevelop JS platform"
      }
    ],
    "currentPlatform": "GDevelop JS platform"
  },
  "resources": {
    "resources": [
      {
        "alwaysLoaded": false,
        "file": "assets/Cannon Ball.png",
        "kind": "image",
        "metadata": "",
        "name": "assets\\Cannon Ball.png",
        "smoothed": true,
        "userAdded": false
      },
      {
        "alwaysLoaded": false,
        "file": "assets/Border.png",
        "kind": "image",
        "metadata": "",
        "name": "assets\\Border.png",
        "smoothed": true,
        "userAdded": true
      },
      {
        "file": "assets/Roboto-Black.ttf",
        "kind": "font",
        "metadata": "",
        "name": "assets\\Roboto-Black.ttf",
        "userAdded": true
      },
      {
        "alwaysLoaded": false,
        "file": "assets/DeathIcon.png",
        "kind": "image",
        "metadata": "",
        "name": "assets\\DeathIcon.png",
        "smoothed": true,
        "userAdded": true
      },
      {
        "alwaysLoaded": false,
        "file": "assets/BallIcon.png",
        "kind": "image",
        "metadata": "",
        "name": "assets\\BallIcon.png",
        "smoothed": true,
        "userAdded": true
      },
      {
        "alwaysLoaded": false,
        "file": "square-icon.png",
        "kind": "image",
        "metadata": "",
        "name": "square-icon.png",
        "smoothed": true,
        "userAdded": true
      }
    ],
    "resourceFolders": []
  },
  "objects": [],
  "objectsFolderStructure": {
    "folderName": "__ROOT"
  },
  "objectsGroups": [],
  "variables": [],
  "layouts": [
    {
      "b": 95,
      "disableInputWhenNotFocused": true,
      "mangledName": "Game",
      "name": "Game",
      "r": 100,
      "standardSortMethod": true,
      "stopSoundsOnStartup": true,
      "title": "Quick Impulse Xpansion",
      "v": 92,
      "uiSettings": {
        "grid": false,
        "gridType": "rectangular",
        "gridWidth": 32,
        "gridHeight": 32,
        "gridOffsetX": 0,
        "gridOffsetY": 0,
        "gridColor": 10401023,
        "gridAlpha": 0.8,
        "snap": false,
        "zoomFactor": 0.8399999938964846,
        "windowMask": false
      },
      "objectsGroups": [],
      "variables": [
        {
          "folded": true,
          "name": "Debug",
          "type": "boolean",
          "value": false
        },
        {
          "name": "MouseTrackVertices",
          "type": "array",
          "children": []
        },
        {
          "name": "State",
          "type": "string",
          "value": ""
        },
        {
          "name": "Deaths",
          "type": "string",
          "value": "0"
        },
        {
          "name": "BackgroundColor",
          "type": "string",
          "value": "100;92;95"
        },
        {
          "name": "TerritoryColor",
          "type": "string",
          "value": "179;167;173"
        }
      ],
      "instances": [
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BallField",
          "persistentUuid": "bff3a1ae-bdb3-48ec-9f07-c433616f7f43",
          "width": 0,
          "x": 906,
          "y": -68,
          "zOrder": 6,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": true,
          "height": 128,
          "layer": "",
          "name": "Ball",
          "persistentUuid": "c0e12232-4ae9-4dec-aeb8-a057388f1f11",
          "width": 128,
          "x": 400,
          "y": 300,
          "zOrder": 2,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BallExtendedField",
          "persistentUuid": "c712c25e-0855-404c-93e7-ca4003dada5f",
          "width": 0,
          "x": 902,
          "y": -14,
          "zOrder": 5,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "MouseTrack",
          "persistentUuid": "cd2cb108-632a-4e2a-9d60-700f29ea7d47",
          "width": 0,
          "x": 906,
          "y": 182,
          "zOrder": 10,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 600,
          "layer": "",
          "name": "TerritoryField",
          "persistentUuid": "84704070-6494-464e-bbf9-2ff1ea88dcb2",
          "width": 800,
          "x": 0,
          "y": 0,
          "zOrder": 4,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": true,
          "height": 128,
          "layer": "",
          "name": "Ball",
          "persistentUuid": "9e42fd5a-7764-40ec-85da-1f61bb598b5d",
          "width": 128,
          "x": 400,
          "y": 300,
          "zOrder": 2,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "FloodField",
          "persistentUuid": "999eff08-68a1-4041-a920-2f90ab8590ff",
          "width": 0,
          "x": 906,
          "y": 84,
          "zOrder": 9,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": true,
          "height": 64,
          "layer": "",
          "name": "Border",
          "persistentUuid": "73598e92-2c17-4493-813a-5387e8980261",
          "width": 944,
          "x": -65,
          "y": -72,
          "zOrder": 11,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": true,
          "height": 64,
          "layer": "",
          "name": "Border",
          "persistentUuid": "55fb6060-f193-4de4-8d60-39aa374e67d4",
          "width": 950,
          "x": -75,
          "y": 609,
          "zOrder": 11,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": true,
          "height": 744,
          "layer": "",
          "name": "Border",
          "persistentUuid": "cb3c9691-5eda-44c5-a79c-2d5e0ced5dda",
          "width": 64,
          "x": -76,
          "y": -72,
          "zOrder": 12,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": true,
          "height": 744,
          "layer": "",
          "name": "Border",
          "persistentUuid": "b2436ecb-f71d-42fe-93bf-951c8edac412",
          "width": 64,
          "x": 812,
          "y": -74,
          "zOrder": 12,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "UI",
          "name": "Completion",
          "persistentUuid": "6e749d09-b487-4563-acd3-5b67a6a3711b",
          "width": 0,
          "x": 373,
          "y": 8,
          "zOrder": 14,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "UI",
          "name": "DeathsLabel",
          "persistentUuid": "d74d4063-2c1f-49d4-9d24-ea7f589d2100",
          "width": 0,
          "x": 698,
          "y": 8,
          "zOrder": 15,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": true,
          "height": 24,
          "layer": "UI",
          "name": "DeathIcon",
          "persistentUuid": "0554ac28-d1c3-41f6-901f-06ccb1b8d70a",
          "width": 24,
          "x": 664,
          "y": 14,
          "zOrder": 16,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "UI",
          "name": "Level",
          "persistentUuid": "ec2d04a6-4b78-4772-a44b-130de1c2a619",
          "width": 0,
          "x": 100,
          "y": 8,
          "zOrder": 17,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": true,
          "height": 20,
          "layer": "UI",
          "name": "LevelIcon",
          "persistentUuid": "84bfa801-c16a-4ad6-9fa6-e2b2a1be52b8",
          "width": 20,
          "x": 72,
          "y": 16,
          "zOrder": 18,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "FadingTerritoryField",
          "persistentUuid": "e808f384-8ab2-4100-b390-0230f8c1bf6c",
          "width": 0,
          "x": 901,
          "y": 135,
          "zOrder": 5,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        }
      ],
      "objects": [
        {
          "assetStoreId": "",
          "name": "BallField",
          "type": "PrimitiveDrawing::Drawer",
          "variables": [],
          "effects": [],
          "behaviors": [
            {
              "name": "MarchingSquaresBehavior",
              "type": "MarchingSquares::MarchingSquaresBehavior",
              "DrawOutside": true,
              "FillOutside": false,
              "MustOnlyDrawScreen": false,
              "CellHeight": 10,
              "CellWidth": 10
            }
          ],
          "fillOpacity": 255,
          "outlineSize": 0,
          "outlineOpacity": 255,
          "fillColor": {
            "b": 153,
            "g": 89,
            "r": 218
          },
          "outlineColor": {
            "b": 35,
            "g": 166,
            "r": 245
          },
          "absoluteCoordinates": true,
          "clearBetweenFrames": true,
          "antialiasing": "none"
        },
        {
          "assetStoreId": "",
          "name": "BallExtendedField",
          "type": "PrimitiveDrawing::Drawer",
          "variables": [],
          "effects": [],
          "behaviors": [
            {
              "name": "MarchingSquaresBehavior",
              "type": "MarchingSquares::MarchingSquaresBehavior",
              "DrawOutside": true,
              "FillOutside": false,
              "Threshold": 0.25,
              "CellWidth": 10,
              "CellHeight": 10
            }
          ],
          "fillOpacity": 128,
          "outlineSize": 0,
          "outlineOpacity": 255,
          "fillColor": {
            "b": 153,
            "g": 89,
            "r": 218
          },
          "outlineColor": {
            "b": 0,
            "g": 0,
            "r": 0
          },
          "absoluteCoordinates": true,
          "clearBetweenFrames": true,
          "antialiasing": "none"
        },
        {
          "adaptCollisionMaskAutomatically": false,
          "assetStoreId": "",
          "name": "Ball",
          "type": "Sprite",
          "updateIfNotVisible": false,
          "variables": [],
          "effects": [],
          "behaviors": [
            {
              "name": "Bounce",
              "type": "Bounce::Bounce",
              "OldX": 0,
              "OldY": 0,
              "OldForceAngle": 0,
              "OldForceLength": 0,
              "NormalAngle": 0
            }
          ],
          "animations": [
            {
              "name": "NewObject",
              "useMultipleDirections": false,
              "directions": [
                {
                  "looping": false,
                  "timeBetweenFrames": 0.07999999821186066,
                  "sprites": [
                    {
                      "hasCustomCollisionMask": true,
                      "image": "assets\\Cannon Ball.png",
                      "points": [],
                      "originPoint": {
                        "name": "origine",
                        "x": 15,
                        "y": 15
                      },
                      "centerPoint": {
                        "automatic": true,
                        "name": "centre",
                        "x": 0,
                        "y": 0
                      },
                      "customCollisionMask": [
                        [
                          {
                            "x": 30,
                            "y": 15
                          },
                          {
                            "x": 25,
                            "y": 25
                          },
                          {
                            "x": 15,
                            "y": 30
                          },
                          {
                            "x": 5,
                            "y": 25
                          },
                          {
                            "x": 0,
                            "y": 15
                          },
                          {
                            "x": 5,
                            "y": 5
                          },
                          {
                            "x": 15,
                            "y": 0
                          },
                          {
                            "x": 25,
                            "y": 5
                          }
                        ]
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "adaptCollisionMaskAutomatically": false,
          "assetStoreId": "",
          "name": "Border",
          "type": "Sprite",
          "updateIfNotVisible": false,
          "variables": [],
          "effects": [],
          "behaviors": [],
          "animations": [
            {
              "name": "NewObject2",
              "useMultipleDirections": false,
              "directions": [
                {
                  "looping": false,
                  "timeBetweenFrames": 0.07999999821186066,
                  "sprites": [
                    {
                      "hasCustomCollisionMask": false,
                      "image": "assets\\Border.png",
                      "points": [],
                      "originPoint": {
                        "name": "origine",
                        "x": 0,
                        "y": 0
                      },
                      "centerPoint": {
                        "automatic": true,
                        "name": "centre",
                        "x": 0,
                        "y": 0
                      },
                      "customCollisionMask": []
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "assetStoreId": "",
          "name": "MouseTrack",
          "type": "PrimitiveDrawing::Drawer",
          "variables": [],
          "effects": [],
          "behaviors": [
            {
              "name": "PathPainter",
              "type": "PathPainter::PathPainter",
              "State": "State",
              "CellWidth": 10,
              "CellHeight": 10
            }
          ],
          "fillOpacity": 0,
          "outlineSize": 4,
          "outlineOpacity": 255,
          "fillColor": {
            "b": 126,
            "g": 126,
            "r": 126
          },
          "outlineColor": {
            "b": 255,
            "g": 255,
            "r": 255
          },
          "absoluteCoordinates": true,
          "clearBetweenFrames": true,
          "antialiasing": "none"
        },
        {
          "additive": false,
          "assetStoreId": "",
          "destroyWhenNoParticles": true,
          "emitterAngleA": 0,
          "emitterAngleB": 360,
          "emitterForceMax": 85,
          "emitterForceMin": 45,
          "flow": 45,
          "jumpForwardInTimeOnCreation": 0,
          "maxParticleNb": 12,
          "name": "Explosion",
          "particleAlpha1": 128,
          "particleAlpha2": 0,
          "particleAlphaRandomness1": 0,
          "particleAlphaRandomness2": 0,
          "particleAngle1": 0,
          "particleAngle2": 0,
          "particleAngleRandomness1": 0,
          "particleAngleRandomness2": 0,
          "particleBlue1": 255,
          "particleBlue2": 255,
          "particleGravityX": 0,
          "particleGravityY": 0,
          "particleGreen1": 255,
          "particleGreen2": 255,
          "particleLifeTimeMax": 2.5,
          "particleLifeTimeMin": 0.5,
          "particleRed1": 255,
          "particleRed2": 255,
          "particleSize1": 100,
          "particleSize2": 200,
          "particleSizeRandomness1": 0,
          "particleSizeRandomness2": 0,
          "rendererParam1": 8,
          "rendererParam2": 1,
          "rendererType": "Point",
          "tank": 12,
          "textureParticleName": "",
          "type": "ParticleSystem::ParticleEmitter",
          "zoneRadius": 0,
          "variables": [],
          "effects": [],
          "behaviors": []
        },
        {
          "assetStoreId": "",
          "name": "TerritoryField",
          "type": "PrimitiveDrawing::Drawer",
          "variables": [],
          "effects": [],
          "behaviors": [
            {
              "name": "MarchingSquaresBehavior",
              "type": "MarchingSquares::MarchingSquaresBehavior",
              "DrawOutside": true,
              "FillOutside": false,
              "Threshold": 1,
              "CellWidth": 10,
              "CellHeight": 10
            },
            {
              "name": "Territory",
              "type": "Territory::Territory",
              "MarchingSquaresBehavior": "MarchingSquaresBehavior"
            }
          ],
          "fillOpacity": 255,
          "outlineSize": 0,
          "outlineOpacity": 255,
          "fillColor": {
            "b": 173,
            "g": 167,
            "r": 179
          },
          "outlineColor": {
            "b": 0,
            "g": 0,
            "r": 0
          },
          "absoluteCoordinates": true,
          "clearBetweenFrames": false,
          "antialiasing": "none"
        },
        {
          "adaptCollisionMaskAutomatically": false,
          "assetStoreId": "",
          "name": "DeathIcon",
          "type": "Sprite",
          "updateIfNotVisible": false,
          "variables": [],
          "effects": [],
          "behaviors": [],
          "animations": [
            {
              "name": "Scull",
              "useMultipleDirections": false,
              "directions": [
                {
                  "looping": false,
                  "timeBetweenFrames": 0.07999999821186066,
                  "sprites": [
                    {
                      "hasCustomCollisionMask": false,
                      "image": "assets\\DeathIcon.png",
                      "points": [],
                      "originPoint": {
                        "name": "origine",
                        "x": 0,
                        "y": 0
                      },
                      "centerPoint": {
                        "automatic": true,
                        "name": "centre",
                        "x": 0,
                        "y": 0
                      },
                      "customCollisionMask": []
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "assetStoreId": "",
          "bold": false,
          "italic": false,
          "name": "DeathsLabel",
          "smoothed": true,
          "type": "TextObject::Text",
          "underlined": false,
          "variables": [],
          "effects": [],
          "behaviors": [],
          "string": "88",
          "font": "assets\\Roboto-Black.ttf",
          "textAlignment": "",
          "characterSize": 32,
          "color": {
            "b": 0,
            "g": 0,
            "r": 0
          },
          "content": {
            "bold": false,
            "isOutlineEnabled": false,
            "isShadowEnabled": false,
            "italic": false,
            "outlineColor": "255;255;255",
            "outlineThickness": 2,
            "shadowAngle": 90,
            "shadowBlurRadius": 2,
            "shadowColor": "0;0;0",
            "shadowDistance": 4,
            "shadowOpacity": 127,
            "smoothed": true,
            "underlined": false,
            "text": "88",
            "font": "assets\\Roboto-Black.ttf",
            "textAlignment": "",
            "characterSize": 32,
            "color": "0;0;0"
          }
        },
        {
          "adaptCollisionMaskAutomatically": false,
          "assetStoreId": "",
          "name": "LevelIcon",
          "type": "Sprite",
          "updateIfNotVisible": false,
          "variables": [],
          "effects": [],
          "behaviors": [],
          "animations": [
            {
              "name": "NewObject",
              "useMultipleDirections": false,
              "directions": [
                {
                  "looping": false,
                  "timeBetweenFrames": 0.07999999821186066,
                  "sprites": [
                    {
                      "hasCustomCollisionMask": false,
                      "image": "assets\\BallIcon.png",
                      "points": [],
                      "originPoint": {
                        "name": "origine",
                        "x": 0,
                        "y": 0
                      },
                      "centerPoint": {
                        "automatic": true,
                        "name": "centre",
                        "x": 0,
                        "y": 0
                      },
                      "customCollisionMask": []
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "assetStoreId": "",
          "bold": false,
          "italic": false,
          "name": "Level",
          "smoothed": true,
          "type": "TextObject::Text",
          "underlined": false,
          "variables": [],
          "effects": [],
          "behaviors": [],
          "string": "88",
          "font": "assets\\Roboto-Black.ttf",
          "textAlignment": "",
          "characterSize": 32,
          "color": {
            "b": 0,
            "g": 0,
            "r": 0
          },
          "content": {
            "bold": false,
            "isOutlineEnabled": false,
            "isShadowEnabled": false,
            "italic": false,
            "outlineColor": "255;255;255",
            "outlineThickness": 2,
            "shadowAngle": 90,
            "shadowBlurRadius": 2,
            "shadowColor": "0;0;0",
            "shadowDistance": 4,
            "shadowOpacity": 127,
            "smoothed": true,
            "underlined": false,
            "text": "88",
            "font": "assets\\Roboto-Black.ttf",
            "textAlignment": "",
            "characterSize": 32,
            "color": "0;0;0"
          }
        },
        {
          "assetStoreId": "",
          "bold": false,
          "italic": false,
          "name": "Completion",
          "smoothed": true,
          "type": "TextObject::Text",
          "underlined": false,
          "variables": [],
          "effects": [],
          "behaviors": [],
          "string": "88 %",
          "font": "assets\\Roboto-Black.ttf",
          "textAlignment": "",
          "characterSize": 32,
          "color": {
            "b": 0,
            "g": 0,
            "r": 0
          },
          "content": {
            "bold": false,
            "isOutlineEnabled": false,
            "isShadowEnabled": false,
            "italic": false,
            "outlineColor": "255;255;255",
            "outlineThickness": 2,
            "shadowAngle": 90,
            "shadowBlurRadius": 2,
            "shadowColor": "0;0;0",
            "shadowDistance": 4,
            "shadowOpacity": 127,
            "smoothed": true,
            "underlined": false,
            "text": "88 %",
            "font": "assets\\Roboto-Black.ttf",
            "textAlignment": "",
            "characterSize": 32,
            "color": "0;0;0"
          }
        },
        {
          "assetStoreId": "",
          "name": "FadingTerritoryField",
          "type": "PrimitiveDrawing::Drawer",
          "variables": [
            {
              "folded": true,
              "name": "IsFading",
              "type": "boolean",
              "value": false
            }
          ],
          "effects": [],
          "behaviors": [
            {
              "name": "MarchingSquaresBehavior",
              "type": "MarchingSquares::MarchingSquaresBehavior",
              "DrawOutside": true,
              "FillOutside": true,
              "Threshold": 1,
              "CellWidth": 10,
              "CellHeight": 10
            }
          ],
          "fillOpacity": 255,
          "outlineSize": 0,
          "outlineOpacity": 255,
          "fillColor": {
            "b": 173,
            "g": 167,
            "r": 179
          },
          "outlineColor": {
            "b": 0,
            "g": 0,
            "r": 0
          },
          "absoluteCoordinates": true,
          "clearBetweenFrames": false,
          "antialiasing": "none"
        },
        {
          "assetStoreId": "",
          "name": "FloodField",
          "type": "PrimitiveDrawing::Drawer",
          "variables": [],
          "effects": [],
          "behaviors": [
            {
              "name": "MarchingSquaresBehavior",
              "type": "MarchingSquares::MarchingSquaresBehavior",
              "DrawOutside": true,
              "FillOutside": false,
              "Threshold": 1,
              "CellWidth": 10,
              "CellHeight": 10
            }
          ],
          "fillOpacity": 255,
          "outlineSize": 0,
          "outlineOpacity": 255,
          "fillColor": {
            "b": 226,
            "g": 226,
            "r": 226
          },
          "outlineColor": {
            "b": 0,
            "g": 0,
            "r": 0
          },
          "absoluteCoordinates": true,
          "clearBetweenFrames": false,
          "antialiasing": "none"
        }
      ],
      "objectsFolderStructure": {
        "folderName": "__ROOT",
        "children": [
          {
            "objectName": "BallField"
          },
          {
            "objectName": "BallExtendedField"
          },
          {
            "objectName": "Ball"
          },
          {
            "objectName": "Border"
          },
          {
            "objectName": "MouseTrack"
          },
          {
            "objectName": "Explosion"
          },
          {
            "objectName": "TerritoryField"
          },
          {
            "objectName": "DeathIcon"
          },
          {
            "objectName": "DeathsLabel"
          },
          {
            "objectName": "LevelIcon"
          },
          {
            "objectName": "Level"
          },
          {
            "objectName": "Completion"
          },
          {
            "objectName": "FadingTerritoryField"
          },
          {
            "objectName": "FloodField"
          }
        ]
      },
      "events": [
        {
          "colorB": 228,
          "colorG": 176,
          "colorR": 74,
          "creationTime": 0,
          "name": "Beginning",
          "source": "",
          "type": "BuiltinCommonInstructions::Group",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "DepartScene"
                  },
                  "parameters": [
                    ""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "Territory::Territory::Initialize"
                  },
                  "parameters": [
                    "TerritoryField",
                    "Territory",
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "AddForceAL"
                  },
                  "parameters": [
                    "Ball",
                    "RandomFloatInRange(0, 360)",
                    "100",
                    "1"
                  ]
                },
                {
                  "type": {
                    "value": "Cache"
                  },
                  "parameters": [
                    "Ball"
                  ]
                },
                {
                  "type": {
                    "value": "TextContainerCapability::TextContainerBehavior::SetValue"
                  },
                  "parameters": [
                    "Completion",
                    "Text",
                    "=",
                    "\"0%\""
                  ]
                },
                {
                  "type": {
                    "value": "TextContainerCapability::TextContainerBehavior::SetValue"
                  },
                  "parameters": [
                    "Level",
                    "Text",
                    "=",
                    "ToString(Count(Ball))"
                  ]
                },
                {
                  "type": {
                    "value": "TextContainerCapability::TextContainerBehavior::SetValue"
                  },
                  "parameters": [
                    "DeathsLabel",
                    "Text",
                    "=",
                    "\"0\""
                  ]
                },
                {
                  "type": {
                    "value": "ParticleSystem::StopEmission"
                  },
                  "parameters": [
                    "Explosion"
                  ]
                }
              ]
            }
          ],
          "parameters": []
        },
        {
          "colorB": 228,
          "colorG": 176,
          "colorR": 74,
          "creationTime": 0,
          "name": "Mouse track",
          "source": "",
          "type": "BuiltinCommonInstructions::Group",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "A path must start from the player territory."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "PathPainter::PathPainter::PathIsStarted"
                  },
                  "parameters": [
                    "MouseTrack",
                    "PathPainter",
                    ""
                  ]
                },
                {
                  "type": {
                    "inverted": true,
                    "value": "MarchingSquares::MarchingSquaresBehavior::ContainsPoint"
                  },
                  "parameters": [
                    "TerritoryField",
                    "MarchingSquaresBehavior",
                    "CursorX()",
                    "CursorY()",
                    ""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "PathPainter::PathPainter::Abort"
                  },
                  "parameters": [
                    "MouseTrack",
                    "PathPainter",
                    ""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "PathPainter::PathPainter::IsDrawingPath"
                  },
                  "parameters": [
                    "MouseTrack",
                    "PathPainter",
                    ""
                  ]
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "A path should never cross itself."
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::VertexIsAdded"
                      },
                      "parameters": [
                        "MouseTrack",
                        "PathPainter",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::HasIntersection"
                      },
                      "parameters": [
                        "MouseTrack",
                        "PathPainter",
                        ""
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::Abort"
                      },
                      "parameters": [
                        "MouseTrack",
                        "PathPainter",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "Deaths",
                        "+",
                        "1"
                      ]
                    },
                    {
                      "type": {
                        "value": "TextContainerCapability::TextContainerBehavior::SetValue"
                      },
                      "parameters": [
                        "DeathsLabel",
                        "Text",
                        "=",
                        "Deaths"
                      ]
                    },
                    {
                      "type": {
                        "value": "Delete"
                      },
                      "parameters": [
                        "Explosion",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "Create"
                      },
                      "parameters": [
                        "Explosion",
                        "Explosion",
                        "CursorX()",
                        "CursorY()",
                        "\"\""
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "The path should never touch a ball."
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::HasIntersectionWithBall"
                      },
                      "parameters": [
                        "MouseTrack",
                        "PathPainter",
                        "BallField",
                        "MarchingSquaresBehavior",
                        ""
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::Abort"
                      },
                      "parameters": [
                        "MouseTrack",
                        "PathPainter",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "Deaths",
                        "+",
                        "1"
                      ]
                    },
                    {
                      "type": {
                        "value": "TextContainerCapability::TextContainerBehavior::SetValue"
                      },
                      "parameters": [
                        "DeathsLabel",
                        "Text",
                        "=",
                        "Deaths"
                      ]
                    },
                    {
                      "type": {
                        "value": "Delete"
                      },
                      "parameters": [
                        "Explosion",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "Create"
                      },
                      "parameters": [
                        "Explosion",
                        "Explosion",
                        "MouseTrack.PathPainter::IntersectionX()",
                        "MouseTrack.PathPainter::IntersectionY()",
                        "\"\""
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "colorB": 228,
              "colorG": 176,
              "colorR": 74,
              "creationTime": 0,
              "name": "Path closed",
              "source": "",
              "type": "BuiltinCommonInstructions::Group",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "The path should end inside the player territory."
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::PathIsDone"
                      },
                      "parameters": [
                        "MouseTrack",
                        "PathPainter",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "inverted": true,
                        "value": "MarchingSquares::MarchingSquaresBehavior::ContainsPoint"
                      },
                      "parameters": [
                        "TerritoryField",
                        "MarchingSquaresBehavior",
                        "CursorX()",
                        "CursorY()",
                        ""
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "Deaths",
                        "+",
                        "1"
                      ]
                    },
                    {
                      "type": {
                        "value": "TextContainerCapability::TextContainerBehavior::SetValue"
                      },
                      "parameters": [
                        "DeathsLabel",
                        "Text",
                        "=",
                        "Deaths"
                      ]
                    },
                    {
                      "type": {
                        "value": "Delete"
                      },
                      "parameters": [
                        "Explosion",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "Create"
                      },
                      "parameters": [
                        "Explosion",
                        "Explosion",
                        "CursorX()",
                        "CursorY()",
                        "\"\""
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "The path is automatically validated when it comes back to the player territory"
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Or"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "value": "PathPainter::PathPainter::PathIsDone"
                          },
                          "parameters": [
                            "MouseTrack",
                            "PathPainter",
                            ""
                          ]
                        },
                        {
                          "type": {
                            "value": "PathPainter::PathPainter::VertexIsAdded"
                          },
                          "parameters": [
                            "MouseTrack",
                            "PathPainter",
                            ""
                          ]
                        }
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::ContainsPoint"
                      },
                      "parameters": [
                        "TerritoryField",
                        "MarchingSquaresBehavior",
                        "CursorX()",
                        "CursorY()",
                        ""
                      ]
                    }
                  ],
                  "actions": [],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "PathPainter::PathPainter::PathIsLongEnough"
                          },
                          "parameters": [
                            "MouseTrack",
                            "PathPainter",
                            ""
                          ]
                        }
                      ],
                      "actions": [],
                      "events": [
                        {
                          "type": "BuiltinCommonInstructions::Comment",
                          "color": {
                            "b": 109,
                            "g": 230,
                            "r": 255,
                            "textB": 0,
                            "textG": 0,
                            "textR": 0
                          },
                          "comment": "The path is added to the field and every territory that doesn't contain any balls are won by the player."
                        },
                        {
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [],
                          "actions": [
                            {
                              "type": {
                                "value": "PathPainter::PathPainter::DrawPathOnField"
                              },
                              "parameters": [
                                "MouseTrack",
                                "PathPainter",
                                "TerritoryField",
                                "MarchingSquaresBehavior",
                                ""
                              ]
                            }
                          ]
                        },
                        {
                          "type": "BuiltinCommonInstructions::Link",
                          "include": {
                            "includeConfig": 0
                          },
                          "target": "FloodEmptyArea"
                        },
                        {
                          "type": "BuiltinCommonInstructions::Comment",
                          "color": {
                            "b": 109,
                            "g": 230,
                            "r": 255,
                            "textB": 0,
                            "textG": 0,
                            "textR": 0
                          },
                          "comment": "A level end when 80% of the territory is won by the player."
                        },
                        {
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [
                            {
                              "type": {
                                "value": "Egal"
                              },
                              "parameters": [
                                "TerritoryField.Territory::Completion()",
                                ">=",
                                "80"
                              ]
                            }
                          ],
                          "actions": [
                            {
                              "type": {
                                "value": "PathPainter::PathPainter::Abort"
                              },
                              "parameters": [
                                "MouseTrack",
                                "PathPainter",
                                ""
                              ]
                            }
                          ],
                          "events": [
                            {
                              "type": "BuiltinCommonInstructions::Link",
                              "include": {
                                "includeConfig": 0
                              },
                              "target": "NextLevel"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [],
                      "actions": [
                        {
                          "type": {
                            "value": "PathPainter::PathPainter::Reset"
                          },
                          "parameters": [
                            "MouseTrack",
                            "PathPainter",
                            ""
                          ]
                        }
                      ]
                    }
                  ]
                }
              ],
              "parameters": []
            }
          ],
          "parameters": []
        },
        {
          "colorB": 228,
          "colorG": 176,
          "colorR": 74,
          "creationTime": 0,
          "name": "Ball field",
          "source": "",
          "type": "BuiltinCommonInstructions::Group",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "CollisionNP"
                  },
                  "parameters": [
                    "Ball",
                    "TerritoryField",
                    "",
                    "",
                    ""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "Bounce::Bounce::BounceOff"
                  },
                  "parameters": [
                    "Ball",
                    "Bounce",
                    "TerritoryField",
                    ""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "CollisionNP"
                  },
                  "parameters": [
                    "Ball",
                    "Border",
                    "",
                    "",
                    ""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "Bounce::Bounce::BounceOff"
                  },
                  "parameters": [
                    "Ball",
                    "Bounce",
                    "Border",
                    ""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Update field with new balls location.\nThis is what makes the blobby effect."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "MarchingSquares::MarchingSquaresBehavior::ClearField"
                  },
                  "parameters": [
                    "BallField",
                    "MarchingSquaresBehavior"
                  ]
                },
                {
                  "type": {
                    "value": "MarchingSquares::MarchingSquaresBehavior::ClearField"
                  },
                  "parameters": [
                    "BallExtendedField",
                    "MarchingSquaresBehavior",
                    ""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::ForEach",
              "object": "Ball",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "MarchingSquares::MarchingSquaresBehavior::AddDisk"
                  },
                  "parameters": [
                    "BallField",
                    "MarchingSquaresBehavior",
                    "Ball.X()",
                    "Ball.Y()",
                    "Ball.Width() / 2",
                    "32",
                    "\"Addition\"",
                    ""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "MarchingSquares::MarchingSquaresBehavior::MergeField"
                  },
                  "parameters": [
                    "BallExtendedField",
                    "MarchingSquaresBehavior",
                    "BallField",
                    "MarchingSquaresBehavior",
                    "\"Maximum\"",
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "MarchingSquares::MarchingSquaresBehavior::DrawField"
                  },
                  "parameters": [
                    "BallField",
                    "MarchingSquaresBehavior",
                    "1",
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "MarchingSquares::MarchingSquaresBehavior::DrawField"
                  },
                  "parameters": [
                    "BallExtendedField",
                    "MarchingSquaresBehavior",
                    "1",
                    ""
                  ]
                }
              ]
            }
          ],
          "parameters": []
        },
        {
          "colorB": 228,
          "colorG": 176,
          "colorR": 74,
          "creationTime": 0,
          "name": "Level transition animation",
          "source": "",
          "type": "BuiltinCommonInstructions::Group",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "BooleanObjectVariable"
                  },
                  "parameters": [
                    "FadingTerritoryField",
                    "IsFading",
                    "True",
                    ""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "PrimitiveDrawing::FillOpacity"
                  },
                  "parameters": [
                    "FadingTerritoryField",
                    "=",
                    "max(0, 255 - 255 * 2 * FadingTerritoryField.ObjectTimerElapsedTime(\"LevelFading\"))"
                  ]
                },
                {
                  "type": {
                    "value": "PrimitiveDrawing::FillOpacity"
                  },
                  "parameters": [
                    "TerritoryField",
                    "=",
                    "min(255, 255 * 2 * FadingTerritoryField.ObjectTimerElapsedTime(\"LevelFading\"))"
                  ]
                },
                {
                  "type": {
                    "value": "PrimitiveDrawing::Drawer::ClearShapes"
                  },
                  "parameters": [
                    "FadingTerritoryField"
                  ]
                },
                {
                  "type": {
                    "value": "PrimitiveDrawing::Drawer::ClearShapes"
                  },
                  "parameters": [
                    "TerritoryField"
                  ]
                },
                {
                  "type": {
                    "value": "MarchingSquares::MarchingSquaresBehavior::DrawField"
                  },
                  "parameters": [
                    "FadingTerritoryField",
                    "MarchingSquaresBehavior",
                    "1"
                  ]
                },
                {
                  "type": {
                    "value": "MarchingSquares::MarchingSquaresBehavior::DrawField"
                  },
                  "parameters": [
                    "TerritoryField",
                    "MarchingSquaresBehavior",
                    "1"
                  ]
                }
              ],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "ObjectTimer"
                      },
                      "parameters": [
                        "FadingTerritoryField",
                        "\"LevelFading\"",
                        "0.5"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetBooleanObjectVariable"
                      },
                      "parameters": [
                        "FadingTerritoryField",
                        "IsFading",
                        "False",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "PrimitiveDrawing::Drawer::ClearShapes"
                      },
                      "parameters": [
                        "FadingTerritoryField"
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "parameters": []
        },
        {
          "colorB": 228,
          "colorG": 176,
          "colorR": 74,
          "creationTime": 0,
          "name": "Inputs",
          "source": "",
          "type": "BuiltinCommonInstructions::Group",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "KeyReleased"
                  },
                  "parameters": [
                    "",
                    "Return"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "Scene"
                  },
                  "parameters": [
                    "",
                    "CurrentSceneName()",
                    ""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "KeyReleased"
                  },
                  "parameters": [
                    "",
                    "d"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "SetBooleanVariable"
                  },
                  "parameters": [
                    "Debug",
                    "Toggle",
                    ""
                  ]
                }
              ],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "BooleanVariable"
                      },
                      "parameters": [
                        "Debug",
                        "True"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "DebuggerTools::EnableDebugDraw"
                      },
                      "parameters": [
                        "",
                        "",
                        "yes",
                        "no",
                        "no"
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "BooleanVariable"
                      },
                      "parameters": [
                        "Debug",
                        ""
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "DebuggerTools::EnableDebugDraw"
                      },
                      "parameters": [
                        "",
                        "no",
                        "yes",
                        "no",
                        "no"
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "KeyReleased"
                  },
                  "parameters": [
                    "",
                    "p"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "ChangeLayerTimeScale"
                  },
                  "parameters": [
                    "",
                    "\"\"",
                    "1 - LayerTimeScale(\"\")"
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "KeyReleased"
                  },
                  "parameters": [
                    "",
                    "o"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "DebuggerTools::ConsoleLog"
                  },
                  "parameters": [
                    "ToString(CursorX()) + \" \" + ToString(CursorY()) + \" : \" + ToString(TerritoryField.MarchingSquaresBehavior::FieldValue(CursorX(), CursorY()))",
                    "",
                    ""
                  ]
                }
              ]
            }
          ],
          "parameters": []
        }
      ],
      "layers": [
        {
          "ambientLightColorB": 32,
          "ambientLightColorG": 0,
          "ambientLightColorR": 0,
          "camera3DFarPlaneDistance": 10000,
          "camera3DFieldOfView": 45,
          "camera3DNearPlaneDistance": 0.1,
          "cameraType": "perspective",
          "followBaseLayerCamera": false,
          "isLightingLayer": false,
          "isLocked": false,
          "name": "",
          "renderingType": "",
          "visibility": true,
          "cameras": [
            {
              "defaultSize": true,
              "defaultViewport": true,
              "height": 0,
              "viewportBottom": 1,
              "viewportLeft": 0,
              "viewportRight": 1,
              "viewportTop": 0,
              "width": 0
            }
          ],
          "effects": []
        },
        {
          "ambientLightColorB": 12,
          "ambientLightColorG": 6026736,
          "ambientLightColorR": 8002696,
          "camera3DFarPlaneDistance": 10000,
          "camera3DFieldOfView": 45,
          "camera3DNearPlaneDistance": 0.1,
          "cameraType": "perspective",
          "followBaseLayerCamera": false,
          "isLightingLayer": false,
          "isLocked": false,
          "name": "UI",
          "renderingType": "",
          "visibility": true,
          "cameras": [],
          "effects": []
        }
      ],
      "behaviorsSharedData": [
        {
          "name": "Bounce",
          "type": "Bounce::Bounce"
        },
        {
          "name": "MarchingSquaresBehavior",
          "type": "MarchingSquares::MarchingSquaresBehavior"
        },
        {
          "name": "PathPainter",
          "type": "PathPainter::PathPainter"
        },
        {
          "name": "Territory",
          "type": "Territory::Territory"
        }
      ]
    }
  ],
  "externalEvents": [
    {
      "associatedLayout": "Game",
      "lastChangeTimeStamp": 0,
      "name": "NextLevel",
      "events": [
        {
          "colorB": 228,
          "colorG": 176,
          "colorR": 74,
          "creationTime": 0,
          "name": "Clear territories",
          "source": "",
          "type": "BuiltinCommonInstructions::Group",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Invert the colors for won and not won territory and prepare the smooth color transition."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "PrimitiveDrawing::FillColor"
                  },
                  "parameters": [
                    "FadingTerritoryField",
                    "BackgroundColor"
                  ]
                },
                {
                  "type": {
                    "value": "SetStringVariable"
                  },
                  "parameters": [
                    "SwappedColor",
                    "=",
                    "BackgroundColor"
                  ]
                },
                {
                  "type": {
                    "value": "SetStringVariable"
                  },
                  "parameters": [
                    "BackgroundColor",
                    "=",
                    "TerritoryColor"
                  ]
                },
                {
                  "type": {
                    "value": "SetStringVariable"
                  },
                  "parameters": [
                    "TerritoryColor",
                    "=",
                    "SwappedColor"
                  ]
                },
                {
                  "type": {
                    "value": "SceneBackground"
                  },
                  "parameters": [
                    "",
                    "BackgroundColor"
                  ]
                },
                {
                  "type": {
                    "value": "PrimitiveDrawing::FillColor"
                  },
                  "parameters": [
                    "TerritoryField",
                    "TerritoryColor"
                  ]
                },
                {
                  "type": {
                    "value": "PrimitiveDrawing::FillOpacity"
                  },
                  "parameters": [
                    "TerritoryField",
                    "=",
                    "0"
                  ]
                },
                {
                  "type": {
                    "value": "SetBooleanObjectVariable"
                  },
                  "parameters": [
                    "FadingTerritoryField",
                    "IsFading",
                    "True"
                  ]
                },
                {
                  "type": {
                    "value": "ResetObjectTimer"
                  },
                  "parameters": [
                    "FadingTerritoryField",
                    "\"LevelFading\""
                  ]
                }
              ],
              "variables": [
                {
                  "folded": true,
                  "name": "SwappedColor",
                  "type": "string",
                  "value": ""
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Set the territories as at the game beginning."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "MarchingSquares::MarchingSquaresBehavior::ClearField"
                  },
                  "parameters": [
                    "FadingTerritoryField",
                    "MarchingSquaresBehavior",
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "MarchingSquares::MarchingSquaresBehavior::MergeField"
                  },
                  "parameters": [
                    "FadingTerritoryField",
                    "MarchingSquaresBehavior",
                    "TerritoryField",
                    "MarchingSquaresBehavior",
                    "\"Addition\"",
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "PrimitiveDrawing::Drawer::ClearShapes"
                  },
                  "parameters": [
                    "FadingTerritoryField"
                  ]
                },
                {
                  "type": {
                    "value": "MarchingSquares::MarchingSquaresBehavior::DrawField"
                  },
                  "parameters": [
                    "FadingTerritoryField",
                    "MarchingSquaresBehavior",
                    "1"
                  ]
                },
                {
                  "type": {
                    "value": "Territory::Territory::Initialize"
                  },
                  "parameters": [
                    "TerritoryField",
                    "Territory",
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "TextContainerCapability::TextContainerBehavior::SetValue"
                  },
                  "parameters": [
                    "Completion",
                    "Text",
                    "=",
                    "\"0%\""
                  ]
                }
              ]
            }
          ],
          "parameters": []
        },
        {
          "colorB": 228,
          "colorG": 176,
          "colorR": 74,
          "creationTime": 0,
          "name": "Split balls in 2",
          "source": "",
          "type": "BuiltinCommonInstructions::Group",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "BuiltinCommonInstructions::Or"
                  },
                  "parameters": [],
                  "subInstructions": [
                    {
                      "type": {
                        "value": "PosX"
                      },
                      "parameters": [
                        "Ball",
                        "<",
                        "0"
                      ]
                    },
                    {
                      "type": {
                        "value": "PosX"
                      },
                      "parameters": [
                        "Ball",
                        ">",
                        "SceneWindowWidth()"
                      ]
                    },
                    {
                      "type": {
                        "value": "PosY"
                      },
                      "parameters": [
                        "Ball",
                        "<",
                        "0"
                      ]
                    },
                    {
                      "type": {
                        "value": "PosY"
                      },
                      "parameters": [
                        "Ball",
                        ">",
                        "SceneWindowHeight()"
                      ]
                    }
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "MettreXY"
                  },
                  "parameters": [
                    "Ball",
                    "=",
                    "SceneWindowWidth() / 2",
                    "=",
                    "SceneWindowHeight() / 2"
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "The condition avoids to split the new created balls."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "SetNumberVariable"
                  },
                  "parameters": [
                    "NewBallDiameter",
                    "=",
                    "Ball.Width() / sqrt(2)"
                  ]
                }
              ],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::ForEach",
                  "object": "Ball",
                  "conditions": [
                    {
                      "type": {
                        "value": "Egal"
                      },
                      "parameters": [
                        "Ball.Width()",
                        ">",
                        "NewBallDiameter"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "OriginalBallAngle",
                        "=",
                        "Ball.ForceAngle()"
                      ]
                    },
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "OriginalBallX",
                        "=",
                        "Ball.X()"
                      ]
                    },
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "OriginalBallY",
                        "=",
                        "Ball.Y()"
                      ]
                    },
                    {
                      "type": {
                        "value": "Delete"
                      },
                      "parameters": [
                        "Ball",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "Create"
                      },
                      "parameters": [
                        "",
                        "Ball",
                        "OriginalBallX",
                        "OriginalBallY",
                        "\"\""
                      ]
                    },
                    {
                      "type": {
                        "value": "Create"
                      },
                      "parameters": [
                        "",
                        "Ball",
                        "OriginalBallX",
                        "OriginalBallY",
                        "\"\""
                      ]
                    },
                    {
                      "type": {
                        "value": "Cache"
                      },
                      "parameters": [
                        "Ball"
                      ]
                    },
                    {
                      "type": {
                        "value": "ResizableCapability::ResizableBehavior::SetWidth"
                      },
                      "parameters": [
                        "Ball",
                        "Resizable",
                        "=",
                        "NewBallDiameter"
                      ]
                    },
                    {
                      "type": {
                        "value": "ResizableCapability::ResizableBehavior::SetHeight"
                      },
                      "parameters": [
                        "Ball",
                        "Resizable",
                        "=",
                        "NewBallDiameter"
                      ]
                    },
                    {
                      "type": {
                        "value": "AddForceAL"
                      },
                      "parameters": [
                        "Ball",
                        "OriginalBallAngle + RandomFloatInRange(-15, 15)",
                        "100",
                        "1"
                      ]
                    }
                  ]
                }
              ],
              "variables": [
                {
                  "folded": true,
                  "name": "OriginalBallX",
                  "type": "number",
                  "value": 0
                },
                {
                  "folded": true,
                  "name": "OriginalBallY",
                  "type": "number",
                  "value": 0
                },
                {
                  "folded": true,
                  "name": "OriginalBallAngle",
                  "type": "number",
                  "value": 0
                },
                {
                  "folded": true,
                  "name": "NewBallDiameter",
                  "type": "number",
                  "value": 0
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "TextContainerCapability::TextContainerBehavior::SetValue"
                  },
                  "parameters": [
                    "Level",
                    "Text",
                    "=",
                    "ToString(Count(Ball))"
                  ]
                }
              ]
            }
          ],
          "parameters": []
        }
      ]
    },
    {
      "associatedLayout": "Game",
      "lastChangeTimeStamp": 0,
      "name": "FloodEmptyArea",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "Every territory that doesn't contain any balls are won by the player.\n\nIt's not easy to know if an area doesn't contain any ball, but it's easy to find the area of each ball.\nSo, it follows these steps:"
        },
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "- create a temporary field copy (FloodField)"
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "MarchingSquares::MarchingSquaresBehavior::ClearField"
              },
              "parameters": [
                "FloodField",
                "MarchingSquaresBehavior",
                ""
              ]
            },
            {
              "type": {
                "value": "MarchingSquares::MarchingSquaresBehavior::MergeField"
              },
              "parameters": [
                "FloodField",
                "MarchingSquaresBehavior",
                "TerritoryField",
                "MarchingSquaresBehavior",
                "\"Addition\"",
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "- flood the area of each ball in this field"
        },
        {
          "type": "BuiltinCommonInstructions::ForEach",
          "object": "Ball",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "MarchingSquares::MarchingSquaresBehavior::FloodFrom"
              },
              "parameters": [
                "FloodField",
                "MarchingSquaresBehavior",
                "Ball.X()",
                "Ball.Y()",
                "1",
                "20",
                "",
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "- reverse the field to use it as a mask\n- apply this mask to flood the area in the actual field (TerritoryField) that weren't flood in the temporary field (FloodField)"
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "MarchingSquares::MarchingSquaresBehavior::TransformField"
              },
              "parameters": [
                "FloodField",
                "MarchingSquaresBehavior",
                "-1",
                "2",
                ""
              ]
            },
            {
              "type": {
                "value": "MarchingSquares::MarchingSquaresBehavior::MergeField"
              },
              "parameters": [
                "TerritoryField",
                "MarchingSquaresBehavior",
                "FloodField",
                "MarchingSquaresBehavior",
                "\"Maximum\"",
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "The territory evaluation is finished, update the rendering and hitboxes."
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "MarchingSquares::MarchingSquaresBehavior::UpdateHitboxes"
              },
              "parameters": [
                "TerritoryField",
                "MarchingSquaresBehavior",
                ""
              ]
            },
            {
              "type": {
                "value": "PrimitiveDrawing::Drawer::ClearShapes"
              },
              "parameters": [
                "TerritoryField"
              ]
            },
            {
              "type": {
                "value": "MarchingSquares::MarchingSquaresBehavior::DrawField"
              },
              "parameters": [
                "TerritoryField",
                "MarchingSquaresBehavior",
                "1"
              ]
            },
            {
              "type": {
                "value": "TextContainerCapability::TextContainerBehavior::SetValue"
              },
              "parameters": [
                "Completion",
                "Text",
                "=",
                "ToString(TerritoryField.Territory::Completion()) + \"%\""
              ]
            }
          ]
        }
      ]
    }
  ],
  "eventsFunctionsExtensions": [
    {
      "author": "@4ian",
      "category": "Movement",
      "extensionNamespace": "",
      "fullName": "Bounce (using forces)",
      "helpPath": "/extensions/bounce/explanations",
      "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLXZvbGxleWJhbGwiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIsMkExMCwxMCAwIDAsMSAyMiwxMkExMCwxMCAwIDAsMSAxMiwyMkExMCwxMCAwIDAsMSAyLDEyQTEwLDEwIDAgMCwxIDEyLDJNMTMuNiwyMC4zNUMxNS45NiwxOC4wNCAxNy42OSwxNS4wOCAxOC41LDExLjc2QzE3Ljg0LDExLjYyIDE3LjE4LDExLjU0IDE2LjUsMTEuNUMxNS41NiwxNS4xMSAxMy40MSwxOC4yMiAxMC41LDIwLjM3QzExLDIwLjQ1IDExLjUsMjAuNSAxMiwyMC41QzEyLjU1LDIwLjUgMTMuMDgsMjAuNDUgMTMuNiwyMC4zNU05LjIzLDIwLjA0QzEyLjIzLDE4LjA3IDE0LjUsMTUuMDUgMTUuNDYsMTEuNUMxNC43MSwxMS41NSAxMy45NywxMS42NSAxMy4yNywxMS44MUMxMi4xOCwxNC44OSA5Ljk3LDE3LjQ0IDcuMTMsMTguOTdDNy43NywxOS40MiA4LjUsMTkuNzggOS4yMywyMC4wNE0yMC41LDEyLjM3QzIwLjE2LDEyLjIzIDE5LjgxLDEyLjExIDE5LjQ2LDEyQzE4Ljc2LDE0LjkgMTcuMzksMTcuNTMgMTUuNTQsMTkuNzNDMTguMzYsMTguNDQgMjAuMzUsMTUuNjQgMjAuNSwxMi4zN00zLjU2LDExLjA0QzMuNSwxMS4zNSAzLjUsMTEuNjggMy41LDEyQzMuNSwxNC41IDQuNTcsMTYuNzMgNi4yNywxOC4yOEM2Ljg2LDE4IDcuNDEsMTcuNjYgNy45NCwxNy4yOUM2LjA4LDE1LjU0IDQuNTgsMTMuNDEgMy41NiwxMS4wNE01LjMzLDYuNzRDNC43Myw3LjUgNC4yNiw4LjM1IDMuOTUsOS4yOEM0LjkyLDEyLjEzIDYuNTgsMTQuNjYgOC43NCwxNi42N0M5LjI1LDE2LjI0IDkuNzIsMTUuNzcgMTAuMTUsMTUuMjZDNy43NCwxMy4wMyA2LDEwLjA4IDUuMzMsNi43NE04LjA0LDQuNUM3LjM2LDQuODUgNi43Myw1LjMgNi4xOCw1LjgyQzYuNzEsOS4yMSA4LjM3LDEyLjIzIDEwLjc3LDE0LjQ3QzExLjE3LDEzLjkxIDExLjUsMTMuMzIgMTEuODIsMTIuN0M5LjY4LDEwLjU2IDguMjgsNy42OSA4LjA0LDQuNU0xOS45Niw5LjAzQzE4LjcsOC42OCAxNy4zNyw4LjUgMTYsOC41QzE0LjEsOC41IDEyLjI4LDguODUgMTAuNjEsOS41QzEwLjk2LDEwLjEgMTEuMzUsMTAuNjcgMTEuOCwxMS4yQzEzLjEyLDEwLjc1IDE0LjUzLDEwLjUgMTYsMTAuNUMxNy41NywxMC41IDE5LjA4LDEwLjc4IDIwLjQ3LDExLjI5QzIwLjQsMTAuNSAyMC4yMyw5Ljc0IDE5Ljk2LDkuMDNNMTcuNTQsNS41N0MxNy4wMyw1LjUgMTYuNSw1LjUgMTYsNS41QzEzLjY5LDUuNSAxMS40Nyw1Ljk0IDkuNDQsNi43M0M5LjYyLDcuMzggOS44Niw4IDEwLjE0LDguNjFDMTEuOTYsNy44OSAxMy45Myw3LjUgMTYsNy41QzE3LjE4LDcuNSAxOC4zMiw3LjYzIDE5LjQyLDcuODdDMTguOTMsNyAxOC4yOSw2LjIxIDE3LjU0LDUuNTdNMTYsNC41QzE0Ljc5LDMuODcgMTMuNDQsMy41IDEyLDMuNUMxMC45NSwzLjUgOS45NCwzLjcgOSw0LjA1QzkuMDQsNC42MyA5LjExLDUuMiA5LjIxLDUuNzVDMTEuMzEsNC45NSAxMy42LDQuNSAxNiw0LjVaIiAvPjwvc3ZnPg==",
      "name": "Bounce",
      "previewIconUrl": "https://resources.gdevelop-app.com/assets/Icons/volleyball.svg",
      "shortDescription": "Bounce the object off another object it just touched.",
      "version": "0.2.1",
      "description": [
        "Provides an action to make the object bounce from another object it just touched.",
        "",
        "> ⚠️ This *won't work* with Physics engine or Platformer characters. This is working with objects that are moved using actions or behaviors using **the forces**.",
        "",
        "The Breakout-like example uses this extension to make balls bounce ([open the project online](https://editor.gdevelop.io/?project=example://breakout))."
      ],
      "origin": {
        "identifier": "Bounce",
        "name": "gdevelop-extension-store"
      },
      "tags": [
        "bounce",
        "bullet",
        "ricochet"
      ],
      "authorIds": [
        "wWP8BSlAW0UP4NeaHa2LcmmDzmH2"
      ],
      "dependencies": [],
      "globalVariables": [],
      "sceneVariables": [],
      "eventsFunctions": [],
      "eventsBasedBehaviors": [
        {
          "description": "Provides an action to make the object bounce from another object it just touched. Add a permanent force to the object and, when in collision with another one, use the action to make it bounce realistically.",
          "fullName": "Bounce",
          "name": "Bounce",
          "objectType": "",
          "eventsFunctions": [
            {
              "description": "Bounce the object off another object it is currently colliding with, according to the angle and the speed of forces applied on the object.\nMake sure to test for a collision between the two objects before launching this action. All the forces will be removed from the object, and a new permanent force will be added to make the object bounce.",
              "fullName": "Bounce off another object",
              "functionType": "Action",
              "name": "BounceOff",
              "sentence": "Bounce _PARAM0_ off _PARAM2_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "To bounce the object realistically, we first separate it from the obstacle. The collision engine will do it by moving the object through the shortest \"normal vector\" of the edge that was collided.\nWe store the position of the object before being moved so that we know the angle of this \"normal vector\". Once we know it, we add a force in the direction of the normal vector, and we add the difference between the normal vector and the previous angle of movement."
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "Bounce::Bounce::SetPropertyOldX"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.X()"
                      ]
                    },
                    {
                      "type": {
                        "value": "Bounce::Bounce::SetPropertyOldY"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.Y()"
                      ]
                    },
                    {
                      "type": {
                        "value": "Bounce::Bounce::SetPropertyOldForceAngle"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.ForceAngle()"
                      ]
                    },
                    {
                      "type": {
                        "value": "Bounce::Bounce::SetPropertyOldForceLength"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.ForceLength()"
                      ]
                    },
                    {
                      "type": {
                        "value": "SeparateFromObjects"
                      },
                      "parameters": [
                        "Object",
                        "Obstacle",
                        "yes"
                      ]
                    }
                  ],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "BuiltinCommonInstructions::Or"
                          },
                          "parameters": [],
                          "subInstructions": [
                            {
                              "type": {
                                "value": "PosX"
                              },
                              "parameters": [
                                "Object",
                                "!=",
                                "Object.Behavior::PropertyOldX()"
                              ]
                            },
                            {
                              "type": {
                                "value": "PosY"
                              },
                              "parameters": [
                                "Object",
                                "!=",
                                "Object.Behavior::PropertyOldY()"
                              ]
                            }
                          ]
                        }
                      ],
                      "actions": [
                        {
                          "type": {
                            "value": "Bounce::Bounce::SetPropertyNormalAngle"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "=",
                            "ToDeg(atan2(Object.Y() - Object.Behavior::PropertyOldY(), Object.X() - Object.Behavior::PropertyOldX()))"
                          ]
                        },
                        {
                          "type": {
                            "value": "Arreter"
                          },
                          "parameters": [
                            "Object"
                          ]
                        },
                        {
                          "type": {
                            "value": "AddForceAL"
                          },
                          "parameters": [
                            "Object",
                            "Object.Behavior::PropertyNormalAngle()+AngleDifference(Object.Behavior::PropertyNormalAngle(), Object.Behavior::PropertyOldForceAngle()+180)",
                            "Object.Behavior::PropertyOldForceLength()",
                            "1"
                          ]
                        },
                        {
                          "type": {
                            "value": "Bounce::Bounce::SetPropertyBounceCount"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "+",
                            "1"
                          ]
                        }
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "Bounce::Bounce",
                  "type": "behavior"
                },
                {
                  "description": "The objects to bounce on",
                  "name": "Obstacle",
                  "type": "objectList"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Bounce the object off another object it is currently colliding with, according to the angle and the speed of forces applied on the object.\nThe bounce will always be calculated *to go toward the specified angle (the \"normal angle\")*. For example, if the object is arriving at this exact angle, it will bounce in the opposite direction.\n\nMake sure to test for a collision between the two objects before launching this action. All the forces will be removed from the object, and a new permanent force will be added to make the object bounce.",
              "fullName": "Bounce off another object toward a specified angle",
              "functionType": "Action",
              "name": "BounceOffSpecificAngle",
              "sentence": "Bounce _PARAM0_ off _PARAM2_ assuming a normal angle of _PARAM3_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "Check if there is a collision between the object and an obstacle and if so, do the bounce by stopping the object and adding a force so that it goes in the \"reflected\" direction, using the \"normal\" angle provided. \nThis provides a realistic bounce."
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "Bounce::Bounce::SetPropertyOldX"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.X()"
                      ]
                    },
                    {
                      "type": {
                        "value": "Bounce::Bounce::SetPropertyOldY"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.Y()"
                      ]
                    },
                    {
                      "type": {
                        "value": "Bounce::Bounce::SetPropertyOldForceAngle"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.ForceAngle()"
                      ]
                    },
                    {
                      "type": {
                        "value": "Bounce::Bounce::SetPropertyOldForceLength"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.ForceLength()"
                      ]
                    },
                    {
                      "type": {
                        "value": "SeparateFromObjects"
                      },
                      "parameters": [
                        "Object",
                        "Obstacle",
                        "yes"
                      ]
                    }
                  ],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "BuiltinCommonInstructions::Or"
                          },
                          "parameters": [],
                          "subInstructions": [
                            {
                              "type": {
                                "value": "PosX"
                              },
                              "parameters": [
                                "Object",
                                "!=",
                                "Object.Behavior::PropertyOldX()"
                              ]
                            },
                            {
                              "type": {
                                "value": "PosY"
                              },
                              "parameters": [
                                "Object",
                                "!=",
                                "Object.Behavior::PropertyOldY()"
                              ]
                            }
                          ]
                        }
                      ],
                      "actions": [
                        {
                          "type": {
                            "value": "Bounce::Bounce::SetPropertyNormalAngle"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "=",
                            "GetArgumentAsNumber(\"NormalAngle\")"
                          ]
                        },
                        {
                          "type": {
                            "value": "Arreter"
                          },
                          "parameters": [
                            "Object"
                          ]
                        },
                        {
                          "type": {
                            "value": "AddForceAL"
                          },
                          "parameters": [
                            "Object",
                            "Object.Behavior::PropertyNormalAngle()+AngleDifference(Object.Behavior::PropertyNormalAngle(), Object.Behavior::PropertyOldForceAngle()+180)",
                            "Object.Behavior::PropertyOldForceLength()",
                            "1"
                          ]
                        },
                        {
                          "type": {
                            "value": "Bounce::Bounce::SetPropertyBounceCount"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "+",
                            "1"
                          ]
                        }
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "Bounce::Bounce",
                  "type": "behavior"
                },
                {
                  "description": "The objects to bounce on",
                  "name": "Obstacle",
                  "type": "objectList"
                },
                {
                  "description": "The \"normal\" angle, in degrees, to bounce against",
                  "longDescription": "This can be understood at the direction that the bounce must go toward.",
                  "name": "NormalAngle",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Bounce the object off another object it is currently colliding with, according to the angle and the speed of forces applied on the object.\nThe bounce will always be vertical, like if the object is *colliding a perfectly horizontal obstacle* (like the top/bottom of the screen in a pong game). For example, if the object is arriving with an angle of exactly 90 degrees, it will bounce in the opposite direction: -90 degrees.\n\nMake sure to test for a collision between the two objects before launching this action. All the forces will be removed from the object, and a new permanent force will be added to make the object bounce.",
              "fullName": "Bounce vertically",
              "functionType": "Action",
              "name": "BounceOffVertically",
              "sentence": "Bounce _PARAM0_ off _PARAM2_ - always vertically",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "Bounce::Bounce::BounceOffSpecificAngle"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "Obstacle",
                        "90",
                        ""
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "Bounce::Bounce",
                  "type": "behavior"
                },
                {
                  "description": "The objects to bounce on",
                  "name": "Obstacle",
                  "type": "objectList"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Bounce the object off another object it is currently colliding with, according to the angle and the speed of forces applied on the object.\nThe bounce will always be horizontal, like if the object is *colliding a perfectly vertical obstacle* (like paddles in a pong game). For example, if the object is arriving with an angle of exactly 0 degrees, it will bounce in the opposite direction: 180 degrees.\n\nMake sure to test for a collision between the two objects before launching this action. All the forces will be removed from the object, and a new permanent force will be added to make the object bounce.",
              "fullName": "Bounce horizontally",
              "functionType": "Action",
              "name": "BounceOffHorizontally",
              "sentence": "Bounce _PARAM0_ off _PARAM2_ - always horizontally",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "Bounce::Bounce::BounceOffSpecificAngle"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "Obstacle",
                        "0",
                        ""
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "Bounce::Bounce",
                  "type": "behavior"
                },
                {
                  "description": "The objects to bounce on",
                  "name": "Obstacle",
                  "type": "objectList"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "the number of times this object has bounced off another object.",
              "fullName": "Bounce count",
              "functionType": "ExpressionAndCondition",
              "name": "BounceCount",
              "sentence": "the bounce count",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnNumber"
                      },
                      "parameters": [
                        "Object.Behavior::PropertyBounceCount()"
                      ]
                    }
                  ]
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "Bounce::Bounce",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            }
          ],
          "propertyDescriptors": [
            {
              "value": "0",
              "type": "Number",
              "label": "",
              "description": "",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "OldX"
            },
            {
              "value": "",
              "type": "Number",
              "label": "",
              "description": "",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "OldY"
            },
            {
              "value": "",
              "type": "Number",
              "label": "",
              "description": "",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "OldForceAngle"
            },
            {
              "value": "",
              "type": "Number",
              "label": "",
              "description": "",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "OldForceLength"
            },
            {
              "value": "",
              "type": "Number",
              "label": "",
              "description": "",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "NormalAngle"
            },
            {
              "value": "0",
              "type": "Number",
              "unit": "Dimensionless",
              "label": "Bounce count",
              "description": "Number of times this object has bounced off another object",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "BounceCount"
            }
          ],
          "sharedPropertyDescriptors": []
        }
      ],
      "eventsBasedObjects": []
    },
    {
      "author": "D8H",
      "category": "Visual effect",
      "extensionNamespace": "",
      "fullName": "Marching Squares (experimental)",
      "helpPath": "/extensions/marching-squares/details",
      "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLXBlYW51dC1vdXRsaW5lIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTEyIDIzQzExLjUzIDIzIDExLjA3IDIyLjk1IDEwLjYxIDIyLjg1QzcuMSAyMi4xIDQuODcgMTguNjQgNS42MiAxNS4xM0M1Ljg3IDEzLjk1IDYuNDUgMTIuODcgNy4yOCAxMkM3LjYyIDExLjY0IDcuNjIgMTEuMDggNy4yOCAxMC43MkM1LjIgOC4xNCA1LjYgNC4zNiA4LjE4IDIuMjhTMTQuNTQuNjA3IDE2LjYyIDMuMTlDMTguMzkgNS4zOCAxOC4zOSA4LjUgMTYuNjIgMTAuNzJDMTYuMzMgMTEuMTMgMTYuMzcgMTEuNyAxNi43MiAxMi4wNkMxOS4xNyAxNC42OCAxOS4wNCAxOC44IDE2LjQxIDIxLjI1QzE1LjIyIDIyLjM3IDEzLjY0IDIzIDEyIDIzTTEyIDNDMTEuMDkgMyAxMC4yIDMuMzEgOS41IDMuODlDOC41NSA0LjY1IDggNS43OSA4IDdDOCA3LjkxIDguMzEgOC43OSA4Ljg4IDkuNUM5Ljg0IDEwLjY0IDkuNzcgMTIuMzMgOC43MyAxMy40MUM3LjAzIDE1LjIyIDcuMTMgMTguMDcgOC45NCAxOS43N1MxMy42IDIxLjM4IDE1LjMgMTkuNTZDMTYuOTIgMTcuODMgMTYuOTIgMTUuMTQgMTUuMyAxMy40MUMxNC4yMyAxMi4zMiAxNC4xNSAxMC42IDE1LjEyIDkuNDFDMTYuNSA3LjY5IDE2LjIyIDUuMTcgMTQuNSAzLjc5QzE0IDMuNDEgMTMuNDcgMy4xNCAxMi44OCAzQzEyLjU5IDMgMTIuMjkgMyAxMiAzTTEyIDZDMTIgNi41NSAxMi40NSA3IDEzIDdTMTQgNi41NSAxNCA2IDEzLjU1IDUgMTMgNSAxMiA1LjQ1IDEyIDZNMTQgMTlDMTQuNTUgMTkgMTUgMTguNTUgMTUgMThTMTQuNTUgMTcgMTQgMTcgMTMgMTcuNDUgMTMgMTggMTMuNDUgMTkgMTQgMTlNMTMgMTZDMTMuNTUgMTYgMTQgMTUuNTUgMTQgMTVTMTMuNTUgMTQgMTMgMTQgMTIgMTQuNDUgMTIgMTUgMTIuNDUgMTYgMTMgMTZNMTEgMThDMTEuNTUgMTggMTIgMTcuNTUgMTIgMTdTMTEuNTUgMTYgMTEgMTYgMTAgMTYuNDUgMTAgMTcgMTAuNDUgMTggMTEgMThaIiAvPjwvc3ZnPg==",
      "name": "MarchingSquares",
      "previewIconUrl": "https://resources.gdevelop-app.com/assets/Icons/peanut-outline.svg",
      "shortDescription": "Allow to build a \"scalar field\" and draw contour lines of it: useful for fog of wars, liquid effects, paint the ground, etc...",
      "version": "0.5.7",
      "description": [
        "It can be helpful for:",
        "  * Liquid effects like water, blobs or lava ([open the project online](https://editor.gdevelop.io/?project=example://marching-squares-liquids))",
        "  * Fog of wars ([open the project online](https://editor.gdevelop.io/?project=example://marching-squares-fog-of-war))",
        "  * Platformer with destructible platforms ([open the project online](https://editor.gdevelop.io/?project=example://marching-squares-platforms-painter))",
        "  * Dynamically paint territories ([open the project online](https://editor.gdevelop.io/?project=example://marching-squares-qix))",
        "  * Top-down relief with physics ([open the project online](https://editor.gdevelop.io/?project=example://marching-squares-terraforming))",
        "  * Island generator ([open the project online](https://editor.gdevelop.io/?project=example://marching-squares-island-generator))"
      ],
      "origin": {
        "identifier": "MarchingSquares",
        "name": "gdevelop-extension-store"
      },
      "tags": [
        "blobs",
        "liquid",
        "lava",
        "water",
        "fog",
        "paint",
        "heightmap"
      ],
      "authorIds": [
        "IWykYNRvhCZBN3vEgKEbBPOR3Oc2"
      ],
      "dependencies": [],
      "globalVariables": [],
      "sceneVariables": [],
      "eventsFunctions": [
        {
          "description": "Define the scalar field painter library JavaScript code.",
          "fullName": "Define scalar field painter library",
          "functionType": "Action",
          "name": "DefineScalarFieldPainterLibrary",
          "private": true,
          "sentence": "Define the scalar field painter library JavaScript code",
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "// This library comes from https://github.com/D8H/scalar-field-painter",
                "// It can be generated with \"npm run build\" to the dist/ScalarFieldPainter.js",
                "",
                "/**",
                " * A stock to reuse instances and avoid allocation.",
                " */",
                "class Stock {",
                "    /**",
                "     * Create a stock.",
                "     */",
                "    constructor() {",
                "        this.elements = [];",
                "    }",
                "    /**",
                "     * Get an element to avoid allocation or create a new one if the stock is",
                "     * empty.",
                "     * @param create",
                "     * @returns an element",
                "     */",
                "    getOrCreate(create) {",
                "        return this.elements.pop() || create();",
                "    }",
                "    /**",
                "     * Stock an element to use it later.",
                "     * @param element",
                "     */",
                "    stock(element) {",
                "        this.elements.push(element);",
                "    }",
                "    /**",
                "     * Free all the elements from the stock.",
                "     */",
                "    flush() {",
                "        this.elements.length = 0;",
                "    }",
                "}",
                "",
                "const deltas = [",
                "    { x: -1, y: 0 },",
                "    { x: 1, y: 0 },",
                "    { x: 0, y: -1 },",
                "    { x: 0, y: 1 },",
                "];",
                "const createNode = () => ({ x: 0, y: 0 });",
                "const createContourNode = () => ({",
                "    x: 0,",
                "    y: 0,",
                "    originX: 0,",
                "    originY: 0,",
                "    value: 0,",
                "});",
                "/**",
                " *",
                " */",
                "class FloodFill {",
                "    constructor(scalarField) {",
                "        this.floodStack = [];",
                "        this.nodeStock = new Stock();",
                "        this.contourStack = [];",
                "        this.nextContourStack = [];",
                "        this.contourNodeStock = new Stock();",
                "        this.scalarField = scalarField;",
                "    }",
                "    /**",
                "     * Fill an area from a given location until a maximum field value is reached.",
                "     *",
                "     * The result is the same as drawing circles at every point of the area.",
                "     * This mean that the area will be filled with a value a lot gibber than 1.",
                "     *",
                "     * @param originX {float} in grid basis",
                "     * @param originY {float} in grid basis",
                "     * @param valueMax {float} the value where to stop the flooding",
                "     * @param thickness {float} the thickness of the contour shading.",
                "     * The field will have the value 1 at this given distance from the area.",
                "     * @param cappingRadiusRatio {float} the radius where to stop the contour shading",
                "     * or a maximum otherwise.",
                "     */",
                "    fillFrom(originX, originY, valueMax, thickness, cappingRadiusRatio) {",
                "        const thicknessSq = thickness * thickness;",
                "        const fillingValue = Math.max(valueMax, thicknessSq * 1024 * 1024);",
                "        const cappingRadius = cappingRadiusRatio * thickness;",
                "        const cappingRadiusSq = cappingRadius * cappingRadius;",
                "        const getContourValue = (fieldValue, distanceSq) => {",
                "            const value = thicknessSq / distanceSq;",
                "            return fieldValue < value && distanceSq < cappingRadiusSq ? value : null;",
                "        };",
                "        this.floodFrom(originX, originY, (fieldValue) => fieldValue < valueMax, fillingValue, getContourValue);",
                "        this.shadeContour(getContourValue);",
                "    }",
                "    /**",
                "     * Unfill an area from a given location until a minimum field value is reached.",
                "     *",
                "     * It fills the area with the value 0.",
                "     *",
                "     * @param originX {float} in grid basis",
                "     * @param originY {float} in grid basis",
                "     * @param valueMax {float} the value where to stop the flooding",
                "     * @param thickness {float} the thickness of the contour shading.",
                "     * The field will have the value 1 at this given distance from the area.",
                "     * @param cappingRadiusRatio {float} the radius where to stop the contour shading",
                "     * or a maximum otherwise.",
                "     */",
                "    unfillFrom(originX, originY, valueMin, thickness, cappingRadiusRatio) {",
                "        const fillingValue = 0;",
                "        const thicknessSq = thickness * thickness;",
                "        const cappingRadius = cappingRadiusRatio * thickness;",
                "        const cappingRadiusSq = cappingRadius * cappingRadius;",
                "        const getContourValue = (fieldValue, distanceSq) => {",
                "            const value = distanceSq / thicknessSq;",
                "            return fieldValue > value && distanceSq < cappingRadiusSq ? value : null;",
                "        };",
                "        this.floodFrom(originX, originY, (fieldValue) => fieldValue > valueMin, fillingValue, getContourValue);",
                "        this.shadeContour(getContourValue);",
                "    }",
                "    /**",
                "     * Flood an area from a given location until a condition is reached.",
                "     * @param originX {float} in grid basis",
                "     * @param originY {float} in grid basis",
                "     * @param canFlood {(float) => boolean}",
                "     * @param fillingValue {float}",
                "     * @param getContourValue {(number, number) => number}",
                "     * or a maximum otherwise.",
                "     */",
                "    floodFrom(originX, originY, canFlood, fillingValue, getContourValue) {",
                "        const scalarField = this.scalarField;",
                "        // They should already be empty at this point.",
                "        this.floodStack.length = 0;",
                "        this.contourStack.length = 0;",
                "        this.nextContourStack.length = 0;",
                "        {",
                "            const x = Math.round(originX);",
                "            const y = Math.round(originY);",
                "            if (!scalarField.isInside(x, y)) {",
                "                return;",
                "            }",
                "            const fieldValue = scalarField.get(x, y);",
                "            if (canFlood(fieldValue)) {",
                "                const node = this.nodeStock.getOrCreate(createNode);",
                "                node.x = x;",
                "                node.y = y;",
                "                this.floodStack.push(node);",
                "            }",
                "        }",
                "        while (this.floodStack.length > 0) {",
                "            const node = this.floodStack.pop();",
                "            const x = node.x;",
                "            const y = node.y;",
                "            scalarField.set(x, y, fillingValue);",
                "            for (const delta of deltas) {",
                "                const neighborX = x + delta.x;",
                "                const neighborY = y + delta.y;",
                "                if (!scalarField.isInside(neighborX, neighborY)) {",
                "                    continue;",
                "                }",
                "                const fieldValue = scalarField.get(neighborX, neighborY);",
                "                if (canFlood(fieldValue)) {",
                "                    const neighbor = this.nodeStock.getOrCreate(createNode);",
                "                    neighbor.x = neighborX;",
                "                    neighbor.y = neighborY;",
                "                    this.floodStack.push(neighbor);",
                "                }",
                "                else {",
                "                    this.checkAnAddContourNode(neighborX, neighborY, x, y, getContourValue);",
                "                }",
                "            }",
                "            this.nodeStock.stock(node);",
                "        }",
                "    }",
                "    /**",
                "     * Shade the contour to keep the field somewhat continuous.",
                "     * @param getContourValue",
                "     */",
                "    shadeContour(getContourValue) {",
                "        const scalarField = this.scalarField;",
                "        const swap = this.nextContourStack;",
                "        this.nextContourStack = this.contourStack;",
                "        this.contourStack = swap;",
                "        while (this.contourStack.length > 0) {",
                "            while (this.contourStack.length > 0) {",
                "                const node = this.contourStack.pop();",
                "                if (scalarField.get(node.x, node.y) > node.value) {",
                "                    // This node wasn't the nearest one.",
                "                    continue;",
                "                }",
                "                for (const delta of deltas) {",
                "                    const neighborX = node.x + delta.x;",
                "                    const neighborY = node.y + delta.y;",
                "                    this.checkAnAddContourNode(neighborX, neighborY, node.originX, node.originY, getContourValue);",
                "                }",
                "                this.contourNodeStock.stock(node);",
                "            }",
                "            const swap = this.nextContourStack;",
                "            this.nextContourStack = this.contourStack;",
                "            this.contourStack = swap;",
                "        }",
                "    }",
                "    checkAnAddContourNode(nodeX, nodeY, originX, originY, getContourValue) {",
                "        const scalarField = this.scalarField;",
                "        if (!scalarField.isInside(nodeX, nodeY)) {",
                "            return;",
                "        }",
                "        // Avoid too big values",
                "        const minDistanceSq = 1 / 1024 / 1024;",
                "        const deltaX = nodeX - originX;",
                "        const deltaY = nodeY - originY;",
                "        const distanceSq = Math.max(minDistanceSq, deltaX * deltaX + deltaY * deltaY);",
                "        const value = getContourValue(scalarField.get(nodeX, nodeY), distanceSq);",
                "        if (value !== null) {",
                "            scalarField.set(nodeX, nodeY, value);",
                "            const newNode = this.contourNodeStock.getOrCreate(createContourNode);",
                "            newNode.x = nodeX;",
                "            newNode.y = nodeY;",
                "            newNode.originX = originX;",
                "            newNode.originY = originY;",
                "            newNode.value = value;",
                "            this.nextContourStack.push(newNode);",
                "        }",
                "    }",
                "}",
                "",
                "/**",
                " * @param x1 {float} first point x",
                " * @param y1 {float} first point y",
                " * @param x2 {float} second point x",
                " * @param y2 {float} second point y",
                " * @return {float} the square distance between 2 points",
                " */",
                "const getDistanceSq = (x1, y1, x2, y2) => {",
                "    const deltaX = x2 - x1;",
                "    const deltaY = y2 - y1;",
                "    return deltaX * deltaX + deltaY * deltaY;",
                "};",
                "/**",
                " * @param x {float} point x",
                " * @param y {float} point y",
                " * @param x1 {float} segment extremity x",
                " * @param y1 {float} segment extremity y",
                " * @param x2 {float} segment extremity x",
                " * @param y2 {float} segment extremity y",
                " * @return {float} the square distance between a point and a segment",
                " */",
                "const getDistanceSqToSegment = (x, y, x1, y1, x2, y2) => {",
                "    const length2 = getDistanceSq(x1, y1, x2, y2);",
                "    if (length2 === 0)",
                "        return getDistanceSq(x, y, x1, y1);",
                "    const t = Math.max(0, Math.min(1, ((x - x1) * (x2 - x1) + (y - y1) * (y2 - y1)) / length2));",
                "    return getDistanceSq(x, y, x1 + t * (x2 - x1), y1 + t * (y2 - y1));",
                "};",
                "/**",
                " * A scalar field.",
                " */",
                "class ScalarField {",
                "    /**",
                "     * Create a scalar field.",
                "     * @param dimX {integer}",
                "     * @param dimY {integer}",
                "     */",
                "    constructor(dimX, dimY) {",
                "        const fieldValues = new Array(dimY);",
                "        for (var y = 0; y < dimY; y++) {",
                "            fieldValues[y] = new Array(dimX).fill(0);",
                "        }",
                "        this.values = fieldValues;",
                "        this.floodFill = new FloodFill(this);",
                "    }",
                "    /**",
                "     * @return {integer} grid dimension on y",
                "     */",
                "    dimY() {",
                "        return this.values.length;",
                "    }",
                "    /**",
                "     * @return {integer} grid dimension on y",
                "     */",
                "    dimX() {",
                "        const firstColumn = this.values[0];",
                "        return firstColumn ? firstColumn.length : 0;",
                "    }",
                "    isInside(x, y) {",
                "        return x >= 0 && x <= this.dimX() - 1 && y >= 0 && y <= this.dimY() - 1;",
                "    }",
                "    get(x, y) {",
                "        return this.values[y][x];",
                "    }",
                "    /**",
                "     * @param squareX {integer} x grid index",
                "     * @param squareY {integer} y grid index",
                "     * @param value {float} the field value",
                "     */",
                "    set(x, y, value) {",
                "        this.values[y][x] = value;",
                "    }",
                "    /**",
                "     * @param pointX {float} in grid basis",
                "     * @param pointY {float} in grid basis",
                "     * @return {float} the field value",
                "     */",
                "    extrapolate(x, y) {",
                "        const squareX = Math.floor(x);",
                "        const squareY = Math.floor(y);",
                "        if (squareX < 0 ||",
                "            squareY < 0 ||",
                "            // - 1 because the extrapolation uses the next value.",
                "            squareX >= this.dimX() - 1 ||",
                "            squareY >= this.dimY() - 1) {",
                "            return 0;",
                "        }",
                "        // Extrapolate",
                "        let weighedValueSum = 0;",
                "        let weightSum = 0;",
                "        for (let vertexX = squareX; vertexX <= squareX + 1; vertexX++) {",
                "            for (let vertexY = squareY; vertexY <= squareY + 1; vertexY++) {",
                "                const value = this.values[vertexY][vertexX];",
                "                const dx = vertexX - x;",
                "                const dy = vertexY - y;",
                "                if (dx === 0 && dy === 0) {",
                "                    // No interpolation needed.",
                "                    return value;",
                "                }",
                "                else {",
                "                    const distance = Math.hypot(dx, dy);",
                "                    weighedValueSum += value / distance;",
                "                    weightSum += 1 / distance;",
                "                }",
                "            }",
                "        }",
                "        const mean = weighedValueSum / weightSum;",
                "        return mean;",
                "    }",
                "    /**",
                "     * Clear the field by filling it with a give value.",
                "     * @param value {float}",
                "     */",
                "    clear(value = 0) {",
                "        for (let rowValues of this.values) {",
                "            for (let x = 0; x < rowValues.length; x++) {",
                "                rowValues[x] = value;",
                "            }",
                "        }",
                "    }",
                "    /**",
                "     * Cap the field between 2 values.",
                "     * @param min {float}",
                "     * @param max {float}",
                "     */",
                "    clamp(min, max) {",
                "        for (let rowValues of this.values) {",
                "            for (let x = 0; x < rowValues.length; x++) {",
                "                rowValues[x] = Math.min(Math.max(min, rowValues[x]), max);",
                "            }",
                "        }",
                "    }",
                "    /**",
                "     * Apply an affine transformation on each field value.",
                "     * @param a {float} factor",
                "     * @param b {float} offset",
                "     */",
                "    transform(a, b) {",
                "        for (let rowValues of this.values) {",
                "            for (let x = 0; x < rowValues.length; x++) {",
                "                rowValues[x] = a * rowValues[x] + b;",
                "            }",
                "        }",
                "    }",
                "    /**",
                "     * Merge the values from another field.",
                "     * @param scalarField {ScalarField}",
                "     * @param operation {function(float, float):float}",
                "     */",
                "    mergeField(scalarField, operation) {",
                "        const dimX = Math.min(this.dimX(), scalarField.dimX());",
                "        const dimY = Math.min(this.dimY(), scalarField.dimY());",
                "        for (let y = 0; y < dimY; y++) {",
                "            const thisRowValues = this.values[y];",
                "            const otherRowValues = scalarField.values[y];",
                "            for (let x = 0; x < dimX; x++) {",
                "                thisRowValues[x] = operation(thisRowValues[x], otherRowValues[x]);",
                "            }",
                "        }",
                "    }",
                "    /**",
                "     * Merge a disk in the field.",
                "     * @param centerX {float} in grid basis",
                "     * @param centerY {float} in grid basis",
                "     * @param radius {float} in grid basis",
                "     * @param cappingRadiusRatio {float}",
                "     * @param operation {function(float, float):float}",
                "     */",
                "    mergeDisk(centerX, centerY, radius, cappingRadiusRatio, operation) {",
                "        const cappingRadius = cappingRadiusRatio * radius;",
                "        const minX = Math.max(0, Math.floor(centerX - cappingRadius));",
                "        const minY = Math.max(0, Math.floor(centerY - cappingRadius));",
                "        const maxX = Math.min(this.dimX() - 1, Math.ceil(centerX + cappingRadius));",
                "        const maxY = Math.min(this.dimY() - 1, Math.ceil(centerY + cappingRadius));",
                "        const radiusSq = radius * radius;",
                "        // Avoid too big values",
                "        const minDistanceSq = 1 / 1024 / 1024;",
                "        for (let y = minY; y <= maxY; y++) {",
                "            const rowValues = this.values[y];",
                "            for (let x = minX; x <= maxX; x++) {",
                "                const distanceSq = Math.max(minDistanceSq, getDistanceSq(x, y, centerX, centerY));",
                "                rowValues[x] = operation(rowValues[x], radiusSq / distanceSq);",
                "            }",
                "        }",
                "    }",
                "    /**",
                "     * Merge a segment in the field.",
                "     * @param startX {float} in grid basis",
                "     * @param startY {float} in grid basis",
                "     * @param endX {float} in grid basis",
                "     * @param endY {float} in grid basis",
                "     * @param thickness {float} in grid basis",
                "     * @param cappingRadiusRatio {float}",
                "     * @param operation {function(float, float):float}",
                "     */",
                "    mergeSegment(startX, startY, endX, endY, thickness, cappingRadiusRatio, operation) {",
                "        const cappingRadius = cappingRadiusRatio * thickness;",
                "        const minX = Math.max(0, Math.floor(Math.min(startX, endX) - cappingRadius));",
                "        const minY = Math.max(0, Math.floor(Math.min(startY, endY) - cappingRadius));",
                "        const maxX = Math.min(this.dimX() - 1, Math.ceil(Math.max(startX, endX) + cappingRadius));",
                "        const maxY = Math.min(this.dimY() - 1, Math.ceil(Math.max(startY, endY) + cappingRadius));",
                "        const thicknessSq = thickness * thickness;",
                "        // Avoid too big values",
                "        const minDistanceSq = 1 / 1024 / 1024;",
                "        for (let y = minY; y <= maxY; y++) {",
                "            const rowValues = this.values[y];",
                "            for (let x = minX; x <= maxX; x++) {",
                "                const distanceSq = Math.max(minDistanceSq, getDistanceSqToSegment(x, y, startX, startY, endX, endY));",
                "                rowValues[x] = operation(rowValues[x], thicknessSq / distanceSq);",
                "            }",
                "        }",
                "    }",
                "    /**",
                "     * Merge a hill in the field.",
                "     * @param centerX {float} in grid basis",
                "     * @param centerY {float} in grid basis",
                "     * @param height {float}",
                "     * @param radius {float} in grid basis",
                "     * @param opacity {float}",
                "     * @param cappingRadiusRatio {float}",
                "     * @param operation {function(float, float):float}",
                "     */",
                "    mergeHill(centerX, centerY, height, radius, opacity, cappingRadiusRatio, operation) {",
                "        const cappingRadius = cappingRadiusRatio * radius;",
                "        const minX = Math.max(0, Math.floor(centerX - cappingRadius));",
                "        const minY = Math.max(0, Math.floor(centerY - cappingRadius));",
                "        const maxX = Math.min(this.dimX() - 1, Math.ceil(centerX + cappingRadius));",
                "        const maxY = Math.min(this.dimY() - 1, Math.ceil(centerY + cappingRadius));",
                "        const logHeightDividedByRadiusSq = Math.log(height) / (radius * radius);",
                "        const opacityMultipliedByHeight = opacity * height;",
                "        // Avoid too big values",
                "        const minDistanceSq = 1 / 1024 / 1024;",
                "        for (let y = minY; y <= maxY; y++) {",
                "            const rowValues = this.values[y];",
                "            for (let x = minX; x <= maxX; x++) {",
                "                const distanceSq = Math.max(minDistanceSq, getDistanceSq(x, y, centerX, centerY));",
                "                // This is like a gaussian, but parametrized differently.",
                "                rowValues[x] = operation(rowValues[x], opacityMultipliedByHeight *",
                "                    Math.exp(-distanceSq * logHeightDividedByRadiusSq));",
                "            }",
                "        }",
                "    }",
                "    /**",
                "     * Flood an area from a given location until a maximum field value is reached.",
                "     * @param originX {float} in grid basis",
                "     * @param originY {float} in grid basis",
                "     * @param valueMax {float}",
                "     * @param thickness {float}",
                "     * @param cappingRadiusRatio {float} the radius where to stop the contour shading",
                "     * @param isMinimum {boolean} when set to true, the threshold is a minimum",
                "     * or a maximum otherwise.",
                "     */",
                "    fillFrom(originX, originY, valueMax, thickness, cappingRadiusRatio) {",
                "        this.floodFill.fillFrom(originX, originY, valueMax, thickness, cappingRadiusRatio);",
                "    }",
                "    /**",
                "     * Flood an area from a given location until a maximum field value is reached.",
                "     * @param originX {float} in grid basis",
                "     * @param originY {float} in grid basis",
                "     * @param valueMax {float}",
                "     * @param thickness {float}",
                "     * @param cappingRadiusRatio {float} the radius where to stop the contour shading",
                "     * @param isMinimum {boolean} when set to true, the threshold is a minimum",
                "     * or a maximum otherwise.",
                "     */",
                "    unfillFrom(originX, originY, valueMin, thickness, cappingRadiusRatio) {",
                "        this.floodFill.unfillFrom(originX, originY, valueMin, thickness, cappingRadiusRatio);",
                "    }",
                "}",
                "",
                "const South = 0;",
                "const East = 1;",
                "const North = 2;",
                "const West = 3;",
                "const SouthWest = 4;",
                "const SouthEast = 5;",
                "const NorthEast = 6;",
                "const NorthWest = 7;",
                "const SouthWestMask = 1;",
                "const SouthEastMask = 2;",
                "const NorthEastMask = 4;",
                "const NorthWestMask = 8;",
                "const marchingSquaresFillVertices = [",
                "    [],",
                "    [South, West, SouthWest],",
                "    [East, South, SouthEast],",
                "    [East, West, SouthWest, SouthEast],",
                "    [North, East, NorthEast],",
                "    [South, SouthWest, West, North, NorthEast, East],",
                "    [South, North, NorthEast, SouthEast],",
                "    [West, North, NorthEast, SouthEast, SouthWest],",
                "    [West, North, NorthWest],",
                "    [North, South, SouthWest, NorthWest],",
                "    [South, West, NorthWest, North, East, SouthEast],",
                "    [North, East, SouthEast, SouthWest, NorthWest],",
                "    [East, West, NorthWest, NorthEast],",
                "    [East, South, SouthWest, NorthWest, NorthEast],",
                "    [South, West, NorthWest, NorthEast, SouthEast],",
                "    [],",
                "];",
                "const marchingSquaresOutlineVertices = [",
                "    [[]],",
                "    [[South, West]],",
                "    [[East, South]],",
                "    [[East, West]],",
                "    [[North, East]],",
                "    [",
                "        [East, South],",
                "        [West, North],",
                "    ],",
                "    [[South, North]],",
                "    [[West, North]],",
                "    [[West, North]],",
                "    [[North, South]],",
                "    [",
                "        [South, West],",
                "        [North, East],",
                "    ],",
                "    [[North, East]],",
                "    [[East, West]],",
                "    [[East, South]],",
                "    [[South, West]],",
                "    [[]],",
                "];",
                "/**",
                " * A marching square algorithm implementation.",
                " */",
                "class MarchingSquares {",
                "    /**",
                "     *",
                "     * @param scalarField",
                "     */",
                "    constructor(scalarField) {",
                "        /** {FloatPoint} Avoid memory allocations when returning points */",
                "        this.workingPoint = [0, 0];",
                "        this.scalarField = scalarField;",
                "    }",
                "    /**",
                "     * @param x {integer} the square top in the grid",
                "     * @param y {integer} the square left in the grid",
                "     * @param threshold {float}",
                "     * @return {integer} one of the 16 marching squares cases",
                "     */",
                "    getSquareIndex(x, y, threshold) {",
                "        /** @type {float} */",
                "        let squareIndex = 0;",
                "        if (this.scalarField.get(x, y + 1) > threshold) {",
                "            squareIndex |= SouthWestMask;",
                "        }",
                "        if (this.scalarField.get(x + 1, y + 1) > threshold) {",
                "            squareIndex |= SouthEastMask;",
                "        }",
                "        if (this.scalarField.get(x + 1, y) > threshold) {",
                "            squareIndex |= NorthEastMask;",
                "        }",
                "        if (this.scalarField.get(x, y) > threshold) {",
                "            squareIndex |= NorthWestMask;",
                "        }",
                "        return squareIndex;",
                "    }",
                "    /**",
                "     * Returns the mean between 2 corners weighted by their field value.",
                "     * @param indexX1 {integer} first corner x",
                "     * @param indexY1 {integer} first corner y",
                "     * @param indexX2 {integer} second corner x",
                "     * @param indexY2 {integer} second corner y",
                "     * @param threshold {float}",
                "     * @return {float} x in the grid",
                "     */",
                "    betweenX(indexX1, indexY1, indexX2, indexY2, threshold) {",
                "        const value1 = this.scalarField.get(indexX1, indexY1);",
                "        const value2 = this.scalarField.get(indexX2, indexY2);",
                "        const weight1 = Math.abs(value1 - threshold);",
                "        const weight2 = Math.abs(value2 - threshold);",
                "        return (weight2 * indexX1 + weight1 * indexX2) / (weight1 + weight2);",
                "    }",
                "    /**",
                "     * Returns the mean between 2 corners weighted by their field value.",
                "     * @param indexX1 {integer} first corner x",
                "     * @param indexY1 {integer} first corner y",
                "     * @param indexX2 {integer} second corner x",
                "     * @param indexY2 {integer} second corner y",
                "     * @param threshold {float}",
                "     * @return {float} y in the grid",
                "     */",
                "    betweenY(indexX1, indexY1, indexX2, indexY2, threshold) {",
                "        const value1 = this.scalarField.get(indexX1, indexY1);",
                "        const value2 = this.scalarField.get(indexX2, indexY2);",
                "        const weight1 = Math.abs(value1 - threshold);",
                "        const weight2 = Math.abs(value2 - threshold);",
                "        return (weight2 * indexY1 + weight1 * indexY2) / (weight1 + weight2);",
                "    }",
                "    /**",
                "     * @param side {integer} point location",
                "     * @param indexX {integer} the square top in the grid",
                "     * @param indexY {integer} the square left in the grid",
                "     * @param threshold {float}",
                "     * @param point {FloatPoint} is the result",
                "     */",
                "    calcPoint(side, indexX, indexY, threshold, point) {",
                "        let gridX = 0;",
                "        let gridY = 0;",
                "        switch (side) {",
                "            case South:",
                "                gridY = indexY + 1;",
                "                gridX = this.betweenX(indexX, gridY, indexX + 1, gridY, threshold);",
                "                break;",
                "            case East:",
                "                gridX = indexX + 1;",
                "                gridY = this.betweenY(gridX, indexY, gridX, indexY + 1, threshold);",
                "                break;",
                "            case North:",
                "                gridY = indexY;",
                "                gridX = this.betweenX(indexX, gridY, indexX + 1, gridY, threshold);",
                "                break;",
                "            case West:",
                "                gridX = indexX;",
                "                gridY = this.betweenY(gridX, indexY, gridX, indexY + 1, threshold);",
                "                break;",
                "            case SouthWest:",
                "                gridX = indexX;",
                "                gridY = indexY + 1;",
                "                break;",
                "            case SouthEast:",
                "                gridX = indexX + 1;",
                "                gridY = indexY + 1;",
                "                break;",
                "            case NorthEast:",
                "                gridX = indexX + 1;",
                "                gridY = indexY;",
                "                break;",
                "            case NorthWest:",
                "                gridX = indexX;",
                "                gridY = indexY;",
                "                break;",
                "        }",
                "        point[0] = gridX;",
                "        point[1] = gridY;",
                "    }",
                "    /**",
                "     * Draw the field squares",
                "     * @param minX {integer} left",
                "     * @param minY {integer} top",
                "     * @param maxX {integer} right",
                "     * @param maxY {integer} bottom",
                "     * @param threshold {float}",
                "     * @param drawUnder {boolean}",
                "     * @param shapePainter {ShapePainter}",
                "     */",
                "    fillContour(minX, minY, maxX, maxY, threshold, drawUnder, shapePainter) {",
                "        const point = this.workingPoint;",
                "        // It draws bands and small polygons.",
                "        // The contour line is in a second loop, it's more efficient",
                "        // than switching the style constantly.",
                "        for (let squareY = minY; squareY < maxY - 1; squareY++) {",
                "            // for run-length encoding",
                "            let first15SquareX = -1;",
                "            for (let squareX = minX; squareX < maxX - 1; squareX++) {",
                "                let squareIndex = this.getSquareIndex(squareX, squareY, threshold);",
                "                if (drawUnder) {",
                "                    squareIndex = 15 - squareIndex;",
                "                }",
                "                if (squareIndex === 15) {",
                "                    shapePainter.onFilledSquareChange(squareX, squareY);",
                "                }",
                "                if (first15SquareX === -1 && squareIndex === 15) {",
                "                    first15SquareX = squareX;",
                "                }",
                "                if (first15SquareX !== -1) {",
                "                    if (squareIndex !== 15) {",
                "                        shapePainter.drawRectangle(first15SquareX, squareY, squareX, squareY + 1);",
                "                        first15SquareX = -1;",
                "                    }",
                "                    else if (squareX === maxX - 2) {",
                "                        shapePainter.drawRectangle(first15SquareX, squareY, squareX + 1, squareY + 1);",
                "                        first15SquareX = -1;",
                "                    }",
                "                }",
                "                if (squareIndex !== 0 && squareIndex !== 15) {",
                "                    let fillVertices = marchingSquaresFillVertices[squareIndex];",
                "                    this.calcPoint(fillVertices[0], squareX, squareY, threshold, point);",
                "                    shapePainter.beginPath(point[0], point[1]);",
                "                    for (let index = 1; index < fillVertices.length; index++) {",
                "                        this.calcPoint(fillVertices[index], squareX, squareY, threshold, point);",
                "                        shapePainter.lineTo(point[0], point[1]);",
                "                    }",
                "                    shapePainter.closePath();",
                "                    shapePainter.endPath(squareX, squareY);",
                "                }",
                "            }",
                "        }",
                "    }",
                "    /**",
                "     * Draw the field squares",
                "     * @param minX {integer} left",
                "     * @param minY {integer} top",
                "     * @param maxX {integer} right",
                "     * @param maxY {integer} bottom",
                "     * @param threshold {float}",
                "     * @param drawUnder {boolean}",
                "     * @param shapePainter {ShapePainter}",
                "     */",
                "    outlineContour(minX, minY, maxX, maxY, threshold, drawUnder, shapePainter) {",
                "        const point = this.workingPoint;",
                "        for (let squareY = minY; squareY < maxY - 1; squareY++) {",
                "            for (let squareX = minX; squareX < maxX - 1; squareX++) {",
                "                let squareIndex = this.getSquareIndex(squareX, squareY, threshold);",
                "                if (drawUnder) {",
                "                    squareIndex = 15 - squareIndex;",
                "                }",
                "                if (squareIndex !== 0 && squareIndex !== 15) {",
                "                    for (let outlineVertices of marchingSquaresOutlineVertices[squareIndex]) {",
                "                        this.calcPoint(outlineVertices[0], squareX, squareY, threshold, point);",
                "                        shapePainter.beginPath(point[0], point[1]);",
                "                        for (let index = 1; index < outlineVertices.length; index++) {",
                "                            this.calcPoint(outlineVertices[index], squareX, squareY, threshold, point);",
                "                            shapePainter.lineTo(point[0], point[1]);",
                "                        }",
                "                        shapePainter.endPath(squareX, squareY);",
                "                    }",
                "                }",
                "            }",
                "        }",
                "    }",
                "}",
                "",
                "/**",
                " * A coordinate converter between a surface and a grid.",
                " */",
                "class CoordConverter {",
                "    /**",
                "     * Create a coordinate converter between a surface and a grid.",
                "     * @param cellWidth {float}",
                "     * @param cellHeight {float}",
                "     * @param left {float}",
                "     * @param top {float}",
                "     * @param right {float}",
                "     * @param bottom {float}",
                "     */",
                "    constructor(cellWidth, cellHeight, left, top, right, bottom) {",
                "        this.cellWidth = cellWidth;",
                "        this.cellHeight = cellHeight;",
                "        this.left = left;",
                "        this.top = top;",
                "        this.right = right;",
                "        this.bottom = bottom;",
                "    }",
                "    /**",
                "     * @param x {float} in the scene basis",
                "     * @return {float} x in the grid basis",
                "     */",
                "    convertToGridBasisX(x) {",
                "        return (x - this.left) / this.cellWidth;",
                "    }",
                "    /**",
                "     * @param y {float} in the scene basis",
                "     * @return {float} y in the grid basis",
                "     */",
                "    convertToGridBasisY(y) {",
                "        return (y - this.top) / this.cellHeight;",
                "    }",
                "    /**",
                "     * @param x {float} in the grid basis",
                "     * @return {float} x in the scene basis",
                "     */",
                "    convertFromGridBasisX(x) {",
                "        return x * this.cellWidth + this.left;",
                "    }",
                "    /**",
                "     * @param y {float} in the grid basis",
                "     * @return {float} y in the scene basis",
                "     */",
                "    convertFromGridBasisY(y) {",
                "        return y * this.cellHeight + this.top;",
                "    }",
                "    /**",
                "     * @param distance {float} in the grid basis",
                "     * @return {float} distance in the scene basis",
                "     */",
                "    convertToGridBasisDistance(distance) {",
                "        return distance / this.cellWidth;",
                "    }",
                "}",
                "",
                "/**",
                " * A height map.",
                " */",
                "class HeightMap {",
                "    /**",
                "     * Create a height map.",
                "     * @param scalarField {ScalarField} a scalar field for the height values.",
                "     * @param coordConverter {CoordConverter} a coordinate converter between the",
                "     * surface and the scalar field grid.",
                "     */",
                "    constructor(scalarField, coordConverter) {",
                "        this.scalarField = scalarField;",
                "        this.coordConverter = coordConverter;",
                "    }",
                "    /**",
                "     * @param pointX {float} in terrain basis",
                "     * @param pointY {float} in terrain basis",
                "     * @param normal {[float, float, float]} the result",
                "     * @return {[float, float, float]} the result",
                "     */",
                "    getFieldNormal(pointX, pointY, normal) {",
                "        if (!normal) {",
                "            normal = [0, 0, 0];",
                "        }",
                "        let x = this.coordConverter.convertToGridBasisX(pointX);",
                "        let y = this.coordConverter.convertToGridBasisY(pointY);",
                "        let squareX = Math.floor(x);",
                "        let squareY = Math.floor(y);",
                "        if (squareX < 0 ||",
                "            squareY < 0 ||",
                "            squareX >= this.scalarField.dimX() ||",
                "            squareY >= this.scalarField.dimY()) {",
                "            return null;",
                "        }",
                "        // This gives very approximating values on borders",
                "        // but it's the easiest way to avoid to be out of bounds.",
                "        // Why 1 but dim - 3?",
                "        // - 1 margin for the normal calculus on both side",
                "        // - 1 extra because extrapolation asks values on right and bottom.",
                "        if (squareX < 1) {",
                "            squareX = 1;",
                "            x = squareX;",
                "        }",
                "        if (squareX > this.scalarField.dimX() - 3) {",
                "            squareX = this.scalarField.dimX() - 3;",
                "            x = squareX;",
                "        }",
                "        if (squareY < 1) {",
                "            squareY = 1;",
                "            y = squareY;",
                "        }",
                "        if (squareY > this.scalarField.dimY() - 3) {",
                "            squareY = this.scalarField.dimY() - 3;",
                "            y = squareY;",
                "        }",
                "        // Extrapolate",
                "        let weighedValueSumX = 0;",
                "        let weighedValueSumY = 0;",
                "        let weighedValueSumZ = 0;",
                "        for (let vertexX = squareX; vertexX <= squareX + 1; vertexX++) {",
                "            for (let vertexY = squareY; vertexY <= squareY + 1; vertexY++) {",
                "                normal[0] = 0;",
                "                normal[1] = 0;",
                "                normal[2] = 0;",
                "                this.addGridPointNormal(vertexX, vertexY, normal);",
                "                const dx = vertexX - x;",
                "                const dy = vertexY - y;",
                "                if (dx === 0 && dy === 0) {",
                "                    // Double break, no interpolation needed.",
                "                    vertexX += 2;",
                "                    vertexY += 2;",
                "                }",
                "                else {",
                "                    const distance = Math.hypot(dx, dy);",
                "                    weighedValueSumX += normal[0] / distance;",
                "                    weighedValueSumY += normal[1] / distance;",
                "                    weighedValueSumZ += normal[2] / distance;",
                "                }",
                "            }",
                "        }",
                "        const length = Math.hypot(normal[0], normal[1], normal[2]);",
                "        normal[0] /= length;",
                "        normal[1] /= length;",
                "        normal[2] /= length;",
                "        return normal;",
                "    }",
                "    /**",
                "     * @param pointX {float} in terrain basis",
                "     * @param pointY {float} in terrain basis",
                "     * @return {float} the field value",
                "     */",
                "    getHeight(pointX, pointY) {",
                "        let x = this.coordConverter.convertToGridBasisX(pointX);",
                "        let y = this.coordConverter.convertToGridBasisY(pointY);",
                "        return this.scalarField.extrapolate(x, y);",
                "    }",
                "    /**",
                "     * Evaluate the normal at a given grid point.",
                "     *",
                "     * The normal is not normalized.",
                "     *",
                "     * @param x {integer} grid index",
                "     * @param y {integer} grid index",
                "     * @param normal {[float, float, float]} the result",
                "     */",
                "    addGridPointNormal(x, y, normal) {",
                "        const z = this.scalarField.get(x, y);",
                "        let rightX = 1;",
                "        const rightY = 0;",
                "        let rightZ = this.scalarField.get(x + 1, y) - z;",
                "        const rightLength = Math.hypot(rightX, rightZ);",
                "        rightX /= rightLength;",
                "        rightZ /= rightLength;",
                "        let leftX = -1;",
                "        const leftY = 0;",
                "        let leftZ = this.scalarField.get(x - 1, y) - z;",
                "        const leftLength = Math.hypot(leftX, leftZ);",
                "        leftX /= leftLength;",
                "        leftZ /= leftLength;",
                "        const bottomX = 0;",
                "        let bottomY = 1;",
                "        let bottomZ = this.scalarField.get(x, y + 1) - z;",
                "        const bottomLength = Math.hypot(bottomY, bottomZ);",
                "        bottomY /= bottomLength;",
                "        bottomZ /= bottomLength;",
                "        const topX = 0;",
                "        let topY = -1;",
                "        let topZ = this.scalarField.get(x, y - 1) - z;",
                "        const topLength = Math.hypot(topY, topZ);",
                "        topY /= topLength;",
                "        topZ /= topLength;",
                "        // The mean of the normal of the 4 triangles around the grid point.",
                "        this.addNormal(topX, topY, topZ, rightX, rightY, rightZ, normal);",
                "        this.addNormal(rightX, rightY, rightZ, bottomX, bottomY, bottomZ, normal);",
                "        this.addNormal(bottomX, bottomY, bottomZ, leftX, leftY, leftZ, normal);",
                "        this.addNormal(leftX, leftY, leftZ, topX, topY, topZ, normal);",
                "    }",
                "    /**",
                "     * @param uX {float}",
                "     * @param uY {float}",
                "     * @param uZ {float}",
                "     * @param vX {float}",
                "     * @param vY {float}",
                "     * @param vZ {float}",
                "     * @param normal {[float, float, float]} the result",
                "     */",
                "    addNormal(uX, uY, uZ, vX, vY, vZ, normal) {",
                "        normal[0] += uY * vZ - uZ * vY;",
                "        normal[1] += uZ * vX - uX * vZ;",
                "        normal[2] += uX * vY - uY * vX;",
                "    }",
                "    /**",
                "     * Clear the field by filling it with a give value.",
                "     * @param value {float}",
                "     */",
                "    clear(value = 0) {",
                "        this.scalarField.clear(value);",
                "    }",
                "    /**",
                "     * Cap the field between 2 values.",
                "     * @param min {float}",
                "     * @param max {float}",
                "     */",
                "    clamp(min, max) {",
                "        this.scalarField.clamp(min, max);",
                "    }",
                "    /**",
                "     * Apply an affine transformation on each field value.",
                "     * @param a {float} factor",
                "     * @param b {float} offset",
                "     */",
                "    transform(a, b) {",
                "        this.scalarField.transform(a, b);",
                "    }",
                "    /**",
                "     * Merge a disk in the field.",
                "     * @param centerX {float} in terrain basis",
                "     * @param centerY {float} in terrain basis",
                "     * @param radius {float} in terrain basis",
                "     * @param cappingRadiusRatio {float}",
                "     * @param operation {function(float, float):float}",
                "     */",
                "    mergeDisk(centerX, centerY, radius, cappingRadiusRatio, operation) {",
                "        this.scalarField.mergeDisk(this.coordConverter.convertToGridBasisX(centerX), this.coordConverter.convertToGridBasisY(centerY), this.coordConverter.convertToGridBasisDistance(radius), cappingRadiusRatio, operation);",
                "    }",
                "    /**",
                "     * Merge a segment in the field.",
                "     * @param startX {float} in terrain basis",
                "     * @param startY {float} in terrain basis",
                "     * @param endX {float} in terrain basis",
                "     * @param endY {float} in terrain basis",
                "     * @param thickness {float} in terrain basis",
                "     * @param cappingRadiusRatio {float}",
                "     * @param operation {function(float, float):float}",
                "     */",
                "    mergeSegment(startX, startY, endX, endY, thickness, cappingRadiusRatio, operation) {",
                "        this.scalarField.mergeSegment(this.coordConverter.convertToGridBasisX(startX), this.coordConverter.convertToGridBasisY(startY), this.coordConverter.convertToGridBasisX(endX), this.coordConverter.convertToGridBasisY(endY), this.coordConverter.convertToGridBasisDistance(thickness), cappingRadiusRatio, operation);",
                "    }",
                "    /**",
                "     * Merge a hill in the field.",
                "     * @param centerX {float} in terrain basis",
                "     * @param centerY {float} in terrain basis",
                "     * @param height {float}",
                "     * @param radius {float} in terrain basis",
                "     * @param opacity {float}",
                "     * @param cappingRadiusRatio {float}",
                "     * @param operation {function(float, float):float}",
                "     */",
                "    mergeHill(centerX, centerY, height, radius, opacity, cappingRadiusRatio, operation) {",
                "        this.scalarField.mergeHill(this.coordConverter.convertToGridBasisX(centerX), this.coordConverter.convertToGridBasisY(centerY), height, this.coordConverter.convertToGridBasisDistance(radius), opacity, cappingRadiusRatio, operation);",
                "    }",
                "    /**",
                "     * Flood an area from a given location until a maximum field value is reached.",
                "     * @param originX {float} in terrain basis",
                "     * @param originY {float} in terrain basis",
                "     * @param valueMax {float}",
                "     * @param thickness {float}",
                "     * @param cappingRadiusRatio {float} the radius where to stop the contour shading",
                "     * @param isMinimum {boolean} when set to true, the threshold is a minimum",
                "     * or a maximum otherwise.",
                "     */",
                "    fillFrom(originX, originY, valueMax, thickness, cappingRadiusRatio) {",
                "        this.scalarField.fillFrom(this.coordConverter.convertToGridBasisX(originX), this.coordConverter.convertToGridBasisY(originY), valueMax, this.coordConverter.convertToGridBasisDistance(thickness), cappingRadiusRatio);",
                "    }",
                "    /**",
                "     * Flood an area from a given location until a maximum field value is reached.",
                "     * @param originX {float} in terrain basis",
                "     * @param originY {float} in terrain basis",
                "     * @param valueMax {float}",
                "     * @param thickness {float}",
                "     * @param cappingRadiusRatio {float} the radius where to stop the contour shading",
                "     * @param isMinimum {boolean} when set to true, the threshold is a minimum",
                "     * or a maximum otherwise.",
                "     */",
                "    unfillFrom(originX, originY, valueMax, thickness, cappingRadiusRatio) {",
                "        this.scalarField.unfillFrom(this.coordConverter.convertToGridBasisX(originX), this.coordConverter.convertToGridBasisY(originY), valueMax, this.coordConverter.convertToGridBasisDistance(thickness), cappingRadiusRatio);",
                "    }",
                "}",
                "",
                "gdjs.__marchingSquaresExtension = gdjs.__marchingSquaresExtension || {};",
                "gdjs.__marchingSquaresExtension.CoordConverter = CoordConverter;",
                "gdjs.__marchingSquaresExtension.HeightMap = HeightMap;",
                "gdjs.__marchingSquaresExtension.MarchingSquares = MarchingSquares;",
                "gdjs.__marchingSquaresExtension.ScalarField = ScalarField;",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [],
          "objectGroups": []
        },
        {
          "description": "Define helper classes JavaScript code.",
          "fullName": "Define helper classes",
          "functionType": "Action",
          "name": "DefineHelperClasses",
          "private": true,
          "sentence": "Define helper classes JavaScript code",
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "gdjs.__marchingSquaresExtension = gdjs.__marchingSquaresExtension || {};",
                "",
                "const parseOperation = function (operation) {",
                "  switch (operation) {",
                "    case \"Addition\":",
                "      return (value1, value2) => value1 + value2;",
                "    case \"Subtraction\":",
                "      return (value1, value2) => value1 - value2;",
                "    case \"Multiplication\":",
                "      return (value1, value2) => value1 * value2;",
                "    case \"Division\":",
                "      return (value1, value2) => value1 / value2;",
                "    case \"Minimum\":",
                "      return Math.min;",
                "    case \"Maximum\":",
                "    default:",
                "      return Math.max;",
                "  }",
                "  return;",
                "}",
                "",
                "class HitboxesIterable {",
                "  /**",
                "   * The hitboxes in a rectangular area.",
                "   * @constructor",
                "         * @param {any} behavior",
                "         * @param {integer} xMin The fist column to include.",
                "         * @param {integer} yMin The fist row to include.",
                "         * @param {integer} xMax The last column to include.",
                "         * @param {integer} yMax The last row to include.",
                "   */",
                "  constructor(",
                "    behavior,",
                "    xMin,",
                "    yMin,",
                "    xMax,",
                "    yMax",
                "  ) {",
                "    this.behavior = behavior;",
                "    this.xMin = xMin;",
                "    this.yMin = yMin;",
                "    this.xMax = xMax;",
                "    this.yMax = yMax;",
                "  };",
                "",
                "  setBounds(",
                "    xMin,",
                "    yMin,",
                "    xMax,",
                "    yMax",
                "  ) {",
                "    this.xMin = xMin;",
                "    this.yMin = yMin;",
                "    this.xMax = xMax;",
                "    this.yMax = yMax;",
                "  }",
                "",
                "  [Symbol.iterator]() {",
                "    // xMin and yMin next increment",
                "    let x = this.xMax;",
                "    let y = this.yMin - 1;",
                "    let hitbox = null;",
                "    let previousHitbox = null;",
                "    /** @type {IteratorReturnResult<gdjs.Polygon>} */",
                "    const result = { done: false, value: undefined };",
                "",
                "    return {",
                "      next: () => {",
                "        do {",
                "          x++;",
                "          if (x > this.xMax) {",
                "            y++;",
                "            x = this.xMin;",
                "          }",
                "          if (y > this.yMax) {",
                "            // done",
                "            result.done = true;",
                "            result.value = undefined;",
                "            return result;",
                "          }",
                "          hitbox = this.behavior.getHitbox(x, y);",
                "        }",
                "        while (!hitbox || hitbox === previousHitbox);",
                "",
                "        // happen with run-length encoding",
                "        previousHitbox = hitbox;",
                "        result.done = false;",
                "        result.value = hitbox;",
                "        return result;",
                "      },",
                "    };",
                "  };",
                "};",
                "",
                "gdjs.__marchingSquaresExtension = gdjs.__marchingSquaresExtension || {};",
                "gdjs.__marchingSquaresExtension.parseOperation = parseOperation;",
                "gdjs.__marchingSquaresExtension.HitboxesIterable = HitboxesIterable;",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [],
          "objectGroups": []
        }
      ],
      "eventsBasedBehaviors": [
        {
          "description": "Add to a Shape painter object and use the actions to draw a field. Useful for fog of wars, liquid effects (water, lava, blobs...).",
          "fullName": "Marching squares painter",
          "name": "MarchingSquaresBehavior",
          "objectType": "PrimitiveDrawing::Drawer",
          "eventsFunctions": [
            {
              "description": "Extend behavior class",
              "fullName": "Extend behavior class",
              "functionType": "Action",
              "name": "ExtendBehaviorClass",
              "private": true,
              "sentence": "Extend behavior class",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const game = runtimeScene.getGame();",
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "const prototype = Object.getPrototypeOf(behavior);",
                    "if (!prototype.drawField) {",
                    "",
                    "  prototype.createField = function () {",
                    "    /** @type {float} */",
                    "    const left = this._getAreaLeftBound();",
                    "    /** @type {float} */",
                    "    const top = this._getAreaTopBound();",
                    "    /** @type {float} */",
                    "    const right = this._getAreaRightBound();",
                    "    /** @type {float} */",
                    "    const bottom = this._getAreaBottomBound();",
                    "    /** @type {float} */",
                    "    const cellWidth = this._getCellWidth();",
                    "    /** @type {float} */",
                    "    const cellHeight = this._getCellHeight();",
                    "",
                    "    // Build the scalar field",
                    "    const dimX = 1 + Math.ceil((right - left) / cellWidth);",
                    "    const dimY = 1 + Math.ceil((bottom - top) / cellHeight);",
                    "    const scalarField = new gdjs.__marchingSquaresExtension.ScalarField(dimX, dimY);",
                    "    this.scalarField = scalarField;",
                    "    ",
                    "    const coordConverter = new gdjs.__marchingSquaresExtension.CoordConverter(",
                    "      cellWidth,",
                    "      cellHeight,",
                    "      left,",
                    "      top,",
                    "      right,",
                    "      bottom);",
                    "    this.coordConverter = coordConverter;",
                    "",
                    "    const heightMap = new gdjs.__marchingSquaresExtension.HeightMap(scalarField, coordConverter);",
                    "    this.heightMap = heightMap;",
                    "",
                    "    const marchingSquares = new gdjs.__marchingSquaresExtension.MarchingSquares(scalarField);",
                    "    this.marchingSquares = marchingSquares;",
                    "",
                    "    /** @type {gdjs.Polygon[][]} */",
                    "    const hitboxTiles = new Array(dimY);",
                    "    for (var y = 0; y < dimY; y++) {",
                    "      hitboxTiles[y] = new Array(dimX).fill(null);",
                    "    }",
                    "    this.hitboxTiles = hitboxTiles;",
                    "  }",
                    "",
                    "  /**",
                    "   * @param pointX {float} in scene basis",
                    "   * @param pointY {float} in scene basis",
                    "   * @return {boolean} true if the point is inside the contour",
                    "   */",
                    "  prototype.containsPoint = function (",
                    "    pointX,",
                    "    pointY,",
                    "  ) {",
                    "    /** @type {boolean} */",
                    "    const drawUnder = this._getFillOutside();",
                    "",
                    "    // It's a bit more precise than the contour",
                    "    // so it's not completly accurate.",
                    "    return !drawUnder && this.heightMap.getHeight(pointX, pointY) > this._getThreshold() ||",
                    "      drawUnder && this.heightMap.getHeight(pointX, pointY) < this._getThreshold();",
                    "  }",
                    "",
                    "  /**",
                    "   * Draw the field squares",
                    "   * @param minX {integer} left",
                    "   * @param minY {integer} top",
                    "   * @param maxX {integer} right",
                    "   * @param maxY {integer} bottom",
                    "   */",
                    "  prototype.drawField = function (",
                    "    minX,",
                    "    minY,",
                    "    maxX,",
                    "    maxY",
                    "  ) {",
                    "    /** @type {boolean} */",
                    "    const drawUnder = this._getFillOutside();",
                    "    /** @type {gdjs.ShapePainterRuntimeObject} */",
                    "    const shapePainter = this.owner;",
                    "    /** @type {float} */",
                    "    const threshold = this._getThreshold();",
                    "",
                    "    const fillOpacity = shapePainter.getFillOpacity();",
                    "    const outlineSize = shapePainter.getOutlineSize();",
                    "",
                    "    // It draws bands and small polygons.",
                    "    // The contour line is in a second loop, it's more efficient",
                    "    // than switching the style constantly.",
                    "",
                    "    const that = this;",
                    "    // fill",
                    "    if (fillOpacity !== 0) {",
                    "      shapePainter.setOutlineSize(0);",
                    "      this.marchingSquares.fillContour(",
                    "        minX,",
                    "        minY,",
                    "        maxX,",
                    "        maxY,",
                    "        threshold,",
                    "        drawUnder,",
                    "        {",
                    "          drawRectangle(left, top, right, bottom) {",
                    "            shapePainter.drawRectangle(",
                    "              that.coordConverter.convertFromGridBasisX(left),",
                    "              that.coordConverter.convertFromGridBasisY(top),",
                    "              that.coordConverter.convertFromGridBasisX(right),",
                    "              that.coordConverter.convertFromGridBasisY(bottom));",
                    "          },",
                    "          beginPath(x, y) {",
                    "            shapePainter.beginFillPath(",
                    "              that.coordConverter.convertFromGridBasisX(x),",
                    "              that.coordConverter.convertFromGridBasisY(y));",
                    "          },",
                    "          lineTo(x, y) {",
                    "            shapePainter.drawPathLineTo(",
                    "              that.coordConverter.convertFromGridBasisX(x),",
                    "              that.coordConverter.convertFromGridBasisY(y));",
                    "          },",
                    "          closePath() {",
                    "            shapePainter.closePath();",
                    "          },",
                    "          endPath() {",
                    "            shapePainter.endFillPath();",
                    "          },",
                    "          onFilledSquareChange(x, y) {",
                    "",
                    "          }",
                    "        }",
                    "      );",
                    "      shapePainter.setOutlineSize(outlineSize);",
                    "    }",
                    "    // outline",
                    "    if (outlineSize !== 0) {",
                    "      shapePainter.setFillOpacity(0);",
                    "      this.marchingSquares.outlineContour(",
                    "        minX,",
                    "        minY,",
                    "        maxX,",
                    "        maxY,",
                    "        threshold,",
                    "        drawUnder,",
                    "        {",
                    "          drawRectangle(left, top, right, bottom) {",
                    "          },",
                    "          beginPath(x, y) {",
                    "            shapePainter.beginFillPath(",
                    "              that.coordConverter.convertFromGridBasisX(x),",
                    "              that.coordConverter.convertFromGridBasisY(y));",
                    "          },",
                    "          lineTo(x, y) {",
                    "            shapePainter.drawPathLineTo(",
                    "              that.coordConverter.convertFromGridBasisX(x),",
                    "              that.coordConverter.convertFromGridBasisY(y));",
                    "          },",
                    "          closePath() {",
                    "            shapePainter.closePath();",
                    "          },",
                    "          endPath() {",
                    "            shapePainter.endFillPath();",
                    "          },",
                    "          onFilledSquareChange(x, y) {",
                    "",
                    "          }",
                    "        }",
                    "      );",
                    "    }",
                    "    shapePainter.setFillOpacity(fillOpacity);",
                    "  }",
                    "",
                    "  /**",
                    "   * Update the field hitboxes",
                    "   * @param minX {integer} left",
                    "   * @param minY {integer} top",
                    "   * @param maxX {integer} right",
                    "   * @param maxY {integer} bottom",
                    "   */",
                    "  prototype.updateMarchingSquareHitboxes = function (",
                    "    minX,",
                    "    minY,",
                    "    maxX,",
                    "    maxY",
                    "  ) {",
                    "    /** @type {boolean} */",
                    "    const drawUnder = this._getFillOutside();",
                    "    /** @type {float} */",
                    "    const threshold = this._getThreshold();",
                    "    /** @type {gdjs.ShapePainterRuntimeObject} */",
                    "    const shapePainter = this.owner;",
                    "",
                    "    const point = this.workingPoint;",
                    "",
                    "    // Move all Polygons to recycledPolygons",
                    "    if (this.recycledPolygons.length < shapePainter._defaultHitBoxes.length) {",
                    "      const swapPolygons = this.recycledPolygons;",
                    "      this.recycledPolygons = shapePainter._defaultHitBoxes;",
                    "      shapePainter._defaultHitBoxes = swapPolygons;",
                    "    }",
                    "    const hitboxes = shapePainter._defaultHitBoxes;",
                    "    this.recycledPolygons.push.apply(this, hitboxes);",
                    "    hitboxes.length = 0;",
                    "",
                    "    for (const hitboxRowTiles of this.hitboxTiles) {",
                    "      hitboxRowTiles.fill(null);",
                    "    }",
                    "    /** @type {gdjs.Polygon} */",
                    "    let currentRectangle = null;",
                    "    /** @type {gdjs.Polygon} */",
                    "    let currentPolygon = null;",
                    "    const that = this;",
                    "    this.marchingSquares.fillContour(",
                    "      minX,",
                    "      minY,",
                    "      maxX,",
                    "      maxY,",
                    "      threshold,",
                    "      drawUnder,",
                    "      {",
                    "        drawRectangle(left, top, right, bottom) {",
                    "          left = that.coordConverter.convertFromGridBasisX(left);",
                    "          top = that.coordConverter.convertFromGridBasisY(top);",
                    "          right = that.coordConverter.convertFromGridBasisX(right);",
                    "          bottom = that.coordConverter.convertFromGridBasisY(bottom);",
                    "          const vertices = currentRectangle.vertices;",
                    "",
                    "          vertices.length = 4;",
                    "          vertices[0] || (vertices[0] = [0, 0]);",
                    "          vertices[1] || (vertices[1] = [0, 0]);",
                    "          vertices[2] || (vertices[2] = [0, 0]);",
                    "          vertices[3] || (vertices[3] = [0, 0]);",
                    "",
                    "          vertices[0][0] = left;",
                    "          vertices[0][1] = top;",
                    "",
                    "          vertices[1][0] = right;",
                    "          vertices[1][1] = top;",
                    "",
                    "          vertices[2][0] = right;",
                    "          vertices[2][1] = bottom;",
                    "",
                    "          vertices[3][0] = left;",
                    "          vertices[3][1] = bottom;",
                    "          hitboxes.push(currentRectangle);",
                    "          currentRectangle = null;",
                    "        },",
                    "        beginPath(x, y) {",
                    "          currentPolygon = that.recycledPolygons.length === 0 ? new gdjs.Polygon() : that.recycledPolygons.pop();",
                    "          currentPolygon.vertices.length = 0;",
                    "          currentPolygon.vertices.push([",
                    "            that.coordConverter.convertFromGridBasisX(x),",
                    "            that.coordConverter.convertFromGridBasisY(y)]);",
                    "        },",
                    "        lineTo(x, y) {",
                    "          currentPolygon.vertices.push([",
                    "            that.coordConverter.convertFromGridBasisX(x),",
                    "            that.coordConverter.convertFromGridBasisY(y)]);",
                    "        },",
                    "        closePath() {",
                    "        },",
                    "        endPath(squareX, squareY) {",
                    "          hitboxes.push(currentPolygon);",
                    "          that.hitboxTiles[squareY][squareX] = currentPolygon;",
                    "        },",
                    "        onFilledSquareChange(squareX, squareY) {",
                    "          if (!currentRectangle) {",
                    "            currentRectangle = that.recycledPolygons.length === 0 ? new gdjs.Polygon() : that.recycledPolygons.pop();",
                    "          }",
                    "          that.hitboxTiles[squareY][squareX] = currentRectangle;",
                    "        }",
                    "      }",
                    "    );",
                    "",
                    "    shapePainter.hitBoxes = hitboxes;",
                    "    shapePainter.hitBoxesDirty = false;",
                    "    shapePainter.aabb.min[0] = this._getAreaLeftBound();",
                    "    shapePainter.aabb.min[1] = this._getAreaTopBound();",
                    "    shapePainter.aabb.max[0] = shapePainter.aabb.min[0] + (this.scalarField.dimX() - 1) * this._getCellWidth();",
                    "    shapePainter.aabb.max[1] = shapePainter.aabb.min[1] + (this.scalarField.dimY() - 1) * this._getCellHeight();",
                    "  }",
                    "",
                    "  /**",
                    "   * @param squareX {integer} x grid index",
                    "   * @param squareY {integer} y grid index",
                    "   * @return {gdjs.Polygon}",
                    "   */",
                    "  prototype.getHitbox = function (squareX, squareY) {",
                    "    return this.hitboxTiles[squareY][squareX];",
                    "  }",
                    "}",
                    "",
                    "",
                    ""
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Extend object instance prototype.",
              "fullName": "Extend object instance prototype",
              "functionType": "Action",
              "name": "ExtendObjectInstancePrototype",
              "private": true,
              "sentence": "Extend _PARAM0_ prototype",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const game = runtimeScene.getGame();",
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "/**",
                    " * @type {Iterable<gdjs.Polygon>}",
                    " */",
                    "behavior.marchingSquaresHitBoxesIterable = new gdjs.__marchingSquaresExtension.HitboxesIterable(behavior, 0, 0, 0, 0);",
                    "",
                    "/** @type {gdjs.Polygon[]} Avoid allocations when updating hitboxes*/",
                    "behavior.recycledPolygons = [];",
                    "",
                    "behavior.owner.updateHitBoxes = function () {",
                    "  this.hitBoxesDirty = false;",
                    "}",
                    "",
                    "behavior.owner.getHitBoxesAround = function (",
                    "  left,",
                    "  top,",
                    "  right,",
                    "  bottom",
                    ") {",
                    "  const leftIndex = Math.max(0, Math.floor(behavior.coordConverter.convertToGridBasisX(left)));",
                    "  const topIndex = Math.max(0, Math.floor(behavior.coordConverter.convertToGridBasisY(top)));",
                    "  const rightIndex = Math.min(behavior.scalarField.dimX() - 1, Math.ceil(behavior.coordConverter.convertToGridBasisX(right)));",
                    "  const bottomIndex = Math.min(behavior.scalarField.dimY() - 1, Math.ceil(behavior.coordConverter.convertToGridBasisY(bottom)));",
                    "  /** @type {Iterable<gdjs.Polygon>} */",
                    "  const iterable = behavior.marchingSquaresHitBoxesIterable;",
                    "  iterable.setBounds(leftIndex, topIndex, rightIndex, bottomIndex);",
                    "  return iterable;",
                    "}",
                    ""
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "fullName": "",
              "functionType": "Action",
              "name": "onCreated",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::PropertyAreaRightBound"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "<=",
                        "Object.Behavior::PropertyAreaLeftBound()"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::SetPropertyAreaRightBound"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.Behavior::AreaLeft() + SceneWindowWidth()"
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::PropertyAreaBottomBound"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "<=",
                        "Object.Behavior::PropertyAreaTopBound()"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::SetPropertyAreaBottomBound"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.Behavior::PropertyAreaBottomBound() + SceneWindowHeight()"
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "GlobalVariableAsBoolean"
                      },
                      "parameters": [
                        "__marchingSquares.IsJavaScriptDefined",
                        "False"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetGlobalVariableAsBoolean"
                      },
                      "parameters": [
                        "__marchingSquares.IsJavaScriptDefined",
                        "True"
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::DefineScalarFieldPainterLibrary"
                      },
                      "parameters": [
                        "",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::DefineHelperClasses"
                      },
                      "parameters": [
                        "",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::ExtendBehaviorClass"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        ""
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::ExtendObjectInstancePrototype"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::RebuildField"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        ""
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Clear the field by setting every values to 0.",
              "fullName": "Clear the field",
              "functionType": "Action",
              "group": "Field operation",
              "name": "ClearField",
              "sentence": "Clear the field of _PARAM0_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const game = runtimeScene.getGame();",
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "behavior.heightMap.clear();"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Unfill an area of the field from a given location until a given height is reached.",
              "fullName": "Unfill area",
              "functionType": "Action",
              "group": "Field painting",
              "name": "UpsidedownFloodFrom",
              "sentence": "Unfill the field of _PARAM0_ from x: _PARAM2_, y: _PARAM3_, to a minimum of _PARAM4_ with thickness: _PARAM5_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const originX = eventsFunctionContext.getArgument(\"OriginX\");",
                    "const originY = eventsFunctionContext.getArgument(\"OriginY\");",
                    "const minimum = eventsFunctionContext.getArgument(\"Minimum\");",
                    "const thickness = eventsFunctionContext.getArgument(\"Thickness\");",
                    "const cappingRadiusRatio = eventsFunctionContext.getArgument(\"CappingRadiusRatio\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "behavior.heightMap.unfillFrom(originX, originY, minimum, thickness, cappingRadiusRatio);"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "Origin X",
                  "name": "OriginX",
                  "type": "expression"
                },
                {
                  "description": "Origin Y",
                  "name": "OriginY",
                  "type": "expression"
                },
                {
                  "description": "Minimum height",
                  "name": "Minimum",
                  "type": "expression"
                },
                {
                  "description": "Contour thickness",
                  "name": "Thickness",
                  "type": "expression"
                },
                {
                  "description": "Capping radius ratio",
                  "longDescription": "Small values allow quicker process, but can result to tearing. Try values around 8.",
                  "name": "CappingRadiusRatio",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Fill an area of the field from a given location until a given height is reached.",
              "fullName": "Fill area",
              "functionType": "Action",
              "group": "Field painting",
              "name": "FloodFrom",
              "sentence": "Fill the field of _PARAM0_ from x: _PARAM2_, y: _PARAM3_, to a maximum of _PARAM4_ with thickness: _PARAM5_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const originX = eventsFunctionContext.getArgument(\"OriginX\");",
                    "const originY = eventsFunctionContext.getArgument(\"OriginY\");",
                    "const maximum = eventsFunctionContext.getArgument(\"Maximum\");",
                    "const thickness = eventsFunctionContext.getArgument(\"Thickness\");",
                    "const cappingRadiusRatio = eventsFunctionContext.getArgument(\"CappingRadiusRatio\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "behavior.heightMap.fillFrom(originX, originY, maximum, thickness, cappingRadiusRatio);"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "Origin X",
                  "name": "OriginX",
                  "type": "expression"
                },
                {
                  "description": "Origin Y",
                  "name": "OriginY",
                  "type": "expression"
                },
                {
                  "description": "Maximum height",
                  "name": "Maximum",
                  "type": "expression"
                },
                {
                  "description": "Contour thickness",
                  "name": "Thickness",
                  "type": "expression"
                },
                {
                  "description": "Capping radius ratio",
                  "longDescription": "Small values allow quicker process, but can result to tearing. Try values around 8.",
                  "name": "CappingRadiusRatio",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Cap every value of the field to a range.",
              "fullName": "Clamp the field",
              "functionType": "Action",
              "group": "Field operation",
              "name": "ClampField",
              "sentence": "Clamp the field of _PARAM0_ from: _PARAM2_ to: _PARAM3_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const min = eventsFunctionContext.getArgument(\"Minimum\");",
                    "const max = eventsFunctionContext.getArgument(\"Maximum\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "behavior.heightMap.clamp(min, max);"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "Minimum",
                  "name": "Minimum",
                  "type": "expression"
                },
                {
                  "description": "Maximum",
                  "name": "Maximum",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Apply an affine on the field values.",
              "fullName": "Transform the field",
              "functionType": "Action",
              "group": "Field operation",
              "name": "TransformField",
              "sentence": "Transform the field of _PARAM0_ with a coefficient: _PARAM2_ and an offset: _PARAM3_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const a = eventsFunctionContext.getArgument(\"Coefficient\");",
                    "const b = eventsFunctionContext.getArgument(\"Offset\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "behavior.heightMap.transform(a, b);"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "Coefficient",
                  "name": "Coefficient",
                  "type": "expression"
                },
                {
                  "description": "Offset",
                  "name": "Offset",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Add a hill to the field.",
              "fullName": "Add a hill",
              "functionType": "Action",
              "group": "Field painting",
              "name": "AddHill",
              "sentence": "Add a hill to the field of _PARAM0_ with center: _PARAM2_, _PARAM3_, _PARAM4_, radius: _PARAM5_, opacity: _PARAM6_ using: _PARAM8_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const centerX = eventsFunctionContext.getArgument(\"CenterX\");",
                    "const centerY = eventsFunctionContext.getArgument(\"CenterY\");",
                    "const height = Math.max(1, eventsFunctionContext.getArgument(\"Height\"));",
                    "const radius = eventsFunctionContext.getArgument(\"Radius\");",
                    "const opacity = eventsFunctionContext.getArgument(\"Opacity\");",
                    "const cappingRadiusRatio = eventsFunctionContext.getArgument(\"CappingRadiusRatio\");",
                    "const operation = gdjs.__marchingSquaresExtension.parseOperation(eventsFunctionContext.getArgument(\"Operation\"));",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "behavior.heightMap.mergeHill(centerX, centerY, height, radius, opacity, cappingRadiusRatio, operation);"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "Center X",
                  "name": "CenterX",
                  "type": "expression"
                },
                {
                  "description": "Center Y",
                  "name": "CenterY",
                  "type": "expression"
                },
                {
                  "description": "Height",
                  "longDescription": "The hill height at the center, a value of 1 or less means a flat hill.",
                  "name": "Height",
                  "type": "expression"
                },
                {
                  "description": "Radius",
                  "longDescription": "The hill height is 1 at this radius.",
                  "name": "Radius",
                  "type": "expression"
                },
                {
                  "description": "Opacity",
                  "longDescription": "Set to 1 to apply the hill instantly or repeat this action with a lower value to make is progressive.",
                  "name": "Opacity",
                  "type": "expression"
                },
                {
                  "description": "Capping radius ratio",
                  "longDescription": "Small values allow quicker process, but can result to tearing. Try values around 8.",
                  "name": "CappingRadiusRatio",
                  "type": "expression"
                },
                {
                  "description": "Operation",
                  "name": "Operation",
                  "supplementaryInformation": "[\"Maximum\",\"Addition\",\"Subtraction\"]",
                  "type": "stringWithSelector"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Add a disk to the field.",
              "fullName": "Add a disk",
              "functionType": "Action",
              "group": "Field painting",
              "name": "AddDisk",
              "sentence": "Add a disk to the field of _PARAM0_ with center: _PARAM2_, _PARAM3_, radius: _PARAM4_ using: _PARAM6_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const centerX = eventsFunctionContext.getArgument(\"CenterX\");",
                    "const centerY = eventsFunctionContext.getArgument(\"CenterY\");",
                    "const radius = eventsFunctionContext.getArgument(\"Radius\");",
                    "const cappingRadiusRatio = eventsFunctionContext.getArgument(\"CappingRadiusRatio\");",
                    "const operation = gdjs.__marchingSquaresExtension.parseOperation(eventsFunctionContext.getArgument(\"Operation\"));",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "behavior.heightMap.mergeDisk(centerX, centerY, radius, cappingRadiusRatio, operation);"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "Center X",
                  "name": "CenterX",
                  "type": "expression"
                },
                {
                  "description": "Center Y",
                  "name": "CenterY",
                  "type": "expression"
                },
                {
                  "description": "Radius",
                  "longDescription": "The spike height is 1 at this radius.",
                  "name": "Radius",
                  "type": "expression"
                },
                {
                  "description": "Capping radius ratio",
                  "longDescription": "Small values allow quicker process, but can result to tearing. Try values around 8.",
                  "name": "CappingRadiusRatio",
                  "type": "expression"
                },
                {
                  "description": "Operation",
                  "name": "Operation",
                  "supplementaryInformation": "[\"Maximum\",\"Addition\",\"Subtraction\"]",
                  "type": "stringWithSelector"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Mask a disk to the field.",
              "fullName": "Mask a disk",
              "functionType": "Action",
              "group": "Field painting",
              "name": "MaskDisk",
              "sentence": "Mask a disk on the field of _PARAM0_ with center: _PARAM2_, _PARAM3_, radius: _PARAM4_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const centerX = eventsFunctionContext.getArgument(\"CenterX\");",
                    "const centerY = eventsFunctionContext.getArgument(\"CenterY\");",
                    "const radius = eventsFunctionContext.getArgument(\"Radius\");",
                    "const cappingRadiusRatio = eventsFunctionContext.getArgument(\"CappingRadiusRatio\");",
                    "const cappingRadius = cappingRadiusRatio * radius;",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "behavior.heightMap.mergeDisk(centerX, centerY, radius, cappingRadiusRatio, (fieldValue, value) => Math.min(fieldValue, 1 / value));"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "Center X",
                  "name": "CenterX",
                  "type": "expression"
                },
                {
                  "description": "Center Y",
                  "name": "CenterY",
                  "type": "expression"
                },
                {
                  "description": "Radius",
                  "longDescription": "The spike height is 1 at this radius.",
                  "name": "Radius",
                  "type": "expression"
                },
                {
                  "description": "Capping radius ratio",
                  "longDescription": "Small values allow quicker process, but can result to tearing. Try values around 8.",
                  "name": "CappingRadiusRatio",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Add a line to the field.",
              "fullName": "Add a line",
              "functionType": "Action",
              "group": "Field painting",
              "name": "AddLine",
              "sentence": "Add a line to the field of _PARAM0_ fom _PARAM2_ ; _PARAM3_ to _PARAM4_ ; _PARAM5_ with thickness: _PARAM6_ using: _PARAM8_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const startX = eventsFunctionContext.getArgument(\"StartX\");",
                    "const startY = eventsFunctionContext.getArgument(\"StartY\");",
                    "const endX = eventsFunctionContext.getArgument(\"EndX\");",
                    "const endY = eventsFunctionContext.getArgument(\"EndY\");",
                    "const thickness = eventsFunctionContext.getArgument(\"Thickness\");",
                    "const cappingRadiusRatio = eventsFunctionContext.getArgument(\"CappingRadiusRatio\");",
                    "const operation = gdjs.__marchingSquaresExtension.parseOperation(eventsFunctionContext.getArgument(\"Operation\"));",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "behavior.heightMap.mergeSegment(startX, startY, endX, endY, thickness, cappingRadiusRatio, operation);"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "X position of the start",
                  "name": "StartX",
                  "type": "expression"
                },
                {
                  "description": "Y position of the start",
                  "name": "StartY",
                  "type": "expression"
                },
                {
                  "description": "X position of the end",
                  "name": "EndX",
                  "type": "expression"
                },
                {
                  "description": "Y position of the end",
                  "name": "EndY",
                  "type": "expression"
                },
                {
                  "description": "Thickness",
                  "name": "Thickness",
                  "type": "expression"
                },
                {
                  "description": "Capping radius ratio",
                  "longDescription": "Small values allow quicker process, but can result to tearing. Try values around 8.",
                  "name": "CappingRadiusRatio",
                  "type": "expression"
                },
                {
                  "description": "Operation",
                  "name": "Operation",
                  "supplementaryInformation": "[\"Maximum\",\"Addition\",\"Subtraction\"]",
                  "type": "stringWithSelector"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Mask a line to the field.",
              "fullName": "Mask a line",
              "functionType": "Action",
              "group": "Field painting",
              "name": "MaskLine",
              "sentence": "Mask a line on the field of _PARAM0_ fom _PARAM2_ ; _PARAM3_ to _PARAM4_ ; _PARAM5_ with thickness: _PARAM6_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const startX = eventsFunctionContext.getArgument(\"StartX\");",
                    "const startY = eventsFunctionContext.getArgument(\"StartY\");",
                    "const endX = eventsFunctionContext.getArgument(\"EndX\");",
                    "const endY = eventsFunctionContext.getArgument(\"EndY\");",
                    "const thickness = eventsFunctionContext.getArgument(\"Thickness\");",
                    "const cappingRadiusRatio = eventsFunctionContext.getArgument(\"CappingRadiusRatio\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "behavior.heightMap.mergeSegment(startX, startY, endX, endY, thickness, cappingRadiusRatio, (fieldValue, value) => Math.min(fieldValue, 1 / value));"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "X position of the start",
                  "name": "StartX",
                  "type": "expression"
                },
                {
                  "description": "Y position of the start",
                  "name": "StartY",
                  "type": "expression"
                },
                {
                  "description": "X position of the end",
                  "name": "EndX",
                  "type": "expression"
                },
                {
                  "description": "Y position of the end",
                  "name": "EndY",
                  "type": "expression"
                },
                {
                  "description": "Thickness",
                  "longDescription": "The spike height is 1 at this radius.",
                  "name": "Thickness",
                  "type": "expression"
                },
                {
                  "description": "Capping radius ratio",
                  "longDescription": "Small values allow quicker process, but can result to tearing. Try values around 8.",
                  "name": "CappingRadiusRatio",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Apply a given operation on every value of the field using the value from the other field at the same position.",
              "fullName": "Merge a field",
              "functionType": "Action",
              "group": "Field operation",
              "name": "MergeField",
              "sentence": "Merge _PARAM0_ with the field of _PARAM2_ using: _PARAM4_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const fieldObjects = eventsFunctionContext.getObjects(\"FieldObject\");",
                    "const fieldBehaviorName = eventsFunctionContext.getArgument(\"FieldBehavior\");",
                    "const operation = gdjs.__marchingSquaresExtension.parseOperation(eventsFunctionContext.getArgument(\"Operation\"));",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "/** @type {Array<number[]>} */",
                    "const fieldValues = behavior.scalarFieldValues;",
                    "",
                    "for (const fieldObject of fieldObjects) {",
                    "    const otherBehavior = fieldObject.getBehavior(behaviorName);",
                    "    if (!otherBehavior) {",
                    "        continue;",
                    "    }",
                    "    behavior.scalarField.mergeField(otherBehavior.scalarField, operation);",
                    "}"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "Field object",
                  "name": "FieldObject",
                  "type": "objectList"
                },
                {
                  "description": "Field behavior",
                  "name": "FieldBehavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "Operation",
                  "name": "Operation",
                  "supplementaryInformation": "[\"Maximum\",\"Addition\",\"Subtraction\",\"Minimum\",\"Multiplication\",\"Division\"]",
                  "type": "stringWithSelector"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Update the field hitboxes.",
              "fullName": "Update hitboxes",
              "functionType": "Action",
              "group": "Field evaluation",
              "name": "UpdateHitboxes",
              "sentence": "Update the field hitboxes of _PARAM0_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "behavior.updateMarchingSquareHitboxes(0, 0, behavior.scalarField.dimX(), behavior.scalarField.dimY());"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Draw the field contours.",
              "fullName": "Draw the contours",
              "functionType": "Action",
              "group": "Field evaluation",
              "name": "DrawField",
              "sentence": "Draw the field contours of _PARAM0_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const screenWidth = runtimeScene.getGame().getGameResolutionWidth();",
                    "const screenHeight = runtimeScene.getGame().getGameResolutionHeight();",
                    "",
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const object = objects[0];",
                    "const behavior = object.getBehavior(behaviorName);",
                    "",
                    "if (behavior._behaviorData.MustOnlyDrawScreen) {",
                    "    const layer = runtimeScene.getLayer(object.getLayer());",
                    "    const screen1 = layer.convertCoords(0, 0);",
                    "    const screen2 = layer.convertCoords(screenWidth, 0);",
                    "    const screen3 = layer.convertCoords(0, screenHeight);",
                    "    const screen4 = layer.convertCoords(screenWidth, screenHeight);",
                    "",
                    "    const screenLeft = Math.min(screen1[0], screen2[0], screen3[0], screen4[0]);",
                    "    const screenTop = Math.min(screen1[1], screen2[1], screen3[1], screen4[1]);",
                    "    const screenRight = Math.max(screen1[0], screen2[0], screen3[0], screen4[0]);",
                    "    const screenBottom = Math.max(screen1[1], screen2[1], screen3[1], screen4[1]);",
                    "",
                    "    const minX = Math.max(0, Math.floor(behavior.coordConverter.convertToGridBasisX(screenLeft)));",
                    "    const minY = Math.max(0, Math.floor(behavior.coordConverter.convertToGridBasisY(screenTop)));",
                    "",
                    "    const maxX = Math.min(behavior.scalarField.dimX(), 1 + Math.ceil(behavior.coordConverter.convertToGridBasisX(screenRight)));",
                    "    const maxY = Math.min(behavior.scalarField.dimY(), 1 + Math.ceil(behavior.coordConverter.convertToGridBasisY(screenBottom)));",
                    "",
                    "    behavior.drawField(minX, minY, maxX, maxY);",
                    "}",
                    "else {",
                    "    // This is useful for static content or games without scrolling.",
                    "    behavior.drawField(0, 0, behavior.scalarField.dimX(), behavior.scalarField.dimY());",
                    "}"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Change the width of the field cells.",
              "fullName": "Width of the cells",
              "functionType": "Action",
              "group": "Field configuration",
              "name": "SetCellWidth",
              "sentence": "Change the width of the field cells of _PARAM0_: _PARAM2_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::SetPropertyCellWidth"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "GetArgumentAsNumber(\"CellWidth\")"
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::RebuildField"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        ""
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "Value",
                  "name": "CellWidth",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Change the height of the field cells.",
              "fullName": "Height of the cells",
              "functionType": "Action",
              "group": "Field configuration",
              "name": "SetCellHeight",
              "sentence": "Change the height of the field cells of _PARAM0_: _PARAM2_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::SetPropertyCellHeight"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "GetArgumentAsNumber(\"CellHeight\")"
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::RebuildField"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        ""
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "Value",
                  "name": "CellHeight",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Rebuild the field with the new dimensions.",
              "fullName": "Rebuild the field",
              "functionType": "Action",
              "name": "RebuildField",
              "private": true,
              "sentence": "Rebuild the field _PARAM0_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const game = runtimeScene.getGame();",
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "/** @type {float} */",
                    "const left = behavior._getAreaLeftBound();",
                    "/** @type {float} */",
                    "const top = behavior._getAreaTopBound();",
                    "/** @type {float} */",
                    "const right = behavior._getAreaRightBound() || game.getGameResolutionWidth();",
                    "/** @type {float} */",
                    "const bottom = behavior._getAreaBottomBound() || game.getGameResolutionHeight();",
                    "/** @type {float} */",
                    "const cellWidth = behavior._getCellWidth();",
                    "/** @type {float} */",
                    "const cellHeight = behavior._getCellHeight();",
                    "",
                    "behavior.createField();"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Fill outside or inside of the contours.",
              "fullName": "Fill outside",
              "functionType": "Action",
              "group": "Field configuration",
              "name": "SetFillOutside",
              "sentence": "Fill outside of the contours of _PARAM0_: _PARAM2_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::SetPropertyFillOutside"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "="
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "GetArgumentAsBoolean"
                      },
                      "parameters": [
                        "\"FillOutside\""
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::SetPropertyFillOutside"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "yes"
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "Fill outside?",
                  "name": "FillOutside",
                  "type": "yesorno"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Change the contour threshold.",
              "fullName": "Contour threshold",
              "functionType": "Action",
              "group": "Field configuration",
              "name": "SetThreshold",
              "sentence": "Change the contour threshold of _PARAM0_: _PARAM2_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::SetPropertyThreshold"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "GetArgumentAsNumber(\"Threshold\")"
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "Value",
                  "name": "Threshold",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Change the field area bounds.",
              "fullName": "Area bounds",
              "functionType": "Action",
              "group": "Field configuration",
              "name": "SetAreaBounds",
              "sentence": "Change the field area bounds of _PARAM0_ left: _PARAM2_ top: _PARAM3_ right: _PARAM4_ bottom: _PARAM5_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::SetPropertyAreaLeftBound"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "GetArgumentAsNumber(\"LeftBound\")"
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::SetPropertyAreaTopBound"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "GetArgumentAsNumber(\"TopBound\")"
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::SetPropertyAreaRightBound"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "GetArgumentAsNumber(\"RightBound\")"
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::SetPropertyAreaBottomBound"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "GetArgumentAsNumber(\"BottomBound\")"
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "Left bound",
                  "name": "LeftBound",
                  "type": "expression"
                },
                {
                  "description": "Top bound",
                  "name": "TopBound",
                  "type": "expression"
                },
                {
                  "description": "Right bound",
                  "name": "RightBound",
                  "type": "expression"
                },
                {
                  "description": "Bottom bound",
                  "name": "BottomBound",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Area left bound of the field.",
              "fullName": "Area left",
              "functionType": "Expression",
              "group": "Field configuration",
              "name": "AreaLeft",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnNumber"
                      },
                      "parameters": [
                        "Object.Behavior::PropertyAreaLeftBound()"
                      ]
                    }
                  ]
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Area top bound of the field.",
              "fullName": "Area top",
              "functionType": "Expression",
              "group": "Field configuration",
              "name": "AreaTop",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnNumber"
                      },
                      "parameters": [
                        "Object.Behavior::PropertyAreaTopBound()"
                      ]
                    }
                  ]
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Area right bound of the field.",
              "fullName": "Area right",
              "functionType": "Expression",
              "group": "Field configuration",
              "name": "AreaRight",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnNumber"
                      },
                      "parameters": [
                        "Object.Behavior::PropertyAreaRightBound()"
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "Egal"
                      },
                      "parameters": [
                        "Object.Behavior::PropertyAreaLeftBound()",
                        "=",
                        "Object.Behavior::PropertyAreaRightBound()"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnNumber"
                      },
                      "parameters": [
                        "Object.Behavior::PropertyAreaLeftBound() + SceneWindowWidth()"
                      ]
                    }
                  ]
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Area bottom bound of the field.",
              "fullName": "Area bottom",
              "functionType": "Expression",
              "group": "Field configuration",
              "name": "AreaBottom",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnNumber"
                      },
                      "parameters": [
                        "Object.Behavior::PropertyAreaBottomBound()"
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "Egal"
                      },
                      "parameters": [
                        "Object.Behavior::PropertyAreaTopBound()",
                        "=",
                        "Object.Behavior::PropertyAreaBottomBound()"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnNumber"
                      },
                      "parameters": [
                        "Object.Behavior::PropertyAreaTopBound() + SceneWindowHeight()"
                      ]
                    }
                  ]
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Width of the field cells.",
              "fullName": "Width of a cell",
              "functionType": "Expression",
              "group": "Field configuration",
              "name": "CellWidth",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnNumber"
                      },
                      "parameters": [
                        "Object.Behavior::PropertyCellWidth()"
                      ]
                    }
                  ]
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Height of the field cells.",
              "fullName": "Height of a cell",
              "functionType": "Expression",
              "group": "Field configuration",
              "name": "CellHeight",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnNumber"
                      },
                      "parameters": [
                        "Object.Behavior::PropertyCellHeight()"
                      ]
                    }
                  ]
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "The number of cells on the x axis.",
              "fullName": "Dimension X",
              "functionType": "Expression",
              "group": "Field saving",
              "name": "DimensionX",
              "sentence": "At _PARAM2_; _PARAM3_ the field value of _PARAM0_ is greater than _PARAM4_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "eventsFunctionContext.returnValue = behavior.scalarField.dimX();"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "The number of cells on the y axis.",
              "fullName": "Dimension Y",
              "functionType": "Expression",
              "group": "Field saving",
              "name": "DimensionY",
              "sentence": "At _PARAM2_; _PARAM3_ the field value of _PARAM0_ is greater than _PARAM4_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "eventsFunctionContext.returnValue = behavior.scalarField.dimY();"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "The contour threshold.",
              "fullName": "Contour threshold",
              "functionType": "Expression",
              "group": "Field configuration",
              "name": "ContourThreshold",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnNumber"
                      },
                      "parameters": [
                        "Object.Behavior::PropertyThreshold()"
                      ]
                    }
                  ]
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "The normal X coordinate at a given location.",
              "fullName": "Normal X",
              "functionType": "Expression",
              "group": "Field evaluation",
              "name": "NormalX",
              "sentence": "At _PARAM2_; _PARAM3_ the field value of _PARAM0_ is greater than _PARAM4_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const pointX = eventsFunctionContext.getArgument(\"PointX\");",
                    "const pointY = eventsFunctionContext.getArgument(\"PointY\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "eventsFunctionContext.returnValue = behavior.heightMap.getFieldNormal(pointX, pointY)[0];"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "X position of the point",
                  "name": "PointX",
                  "type": "expression"
                },
                {
                  "description": "Y position of the point",
                  "name": "PointY",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "The normal Y coordinate at a given location.",
              "fullName": "Normal Y",
              "functionType": "Expression",
              "group": "Field evaluation",
              "name": "NormalY",
              "sentence": "At _PARAM2_; _PARAM3_ the field value of _PARAM0_ is greater than _PARAM4_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const pointX = eventsFunctionContext.getArgument(\"PointX\");",
                    "const pointY = eventsFunctionContext.getArgument(\"PointY\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "eventsFunctionContext.returnValue = behavior.heightMap.getFieldNormal(pointX, pointY)[1];"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "X position of the point",
                  "name": "PointX",
                  "type": "expression"
                },
                {
                  "description": "Y position of the point",
                  "name": "PointY",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "The normal Z coordinate at a given location.",
              "fullName": "Normal Z",
              "functionType": "Expression",
              "group": "Field evaluation",
              "name": "NormalZ",
              "sentence": "At _PARAM2_; _PARAM3_ the field value of _PARAM0_ is greater than _PARAM4_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const pointX = eventsFunctionContext.getArgument(\"PointX\");",
                    "const pointY = eventsFunctionContext.getArgument(\"PointY\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "eventsFunctionContext.returnValue = behavior.heightMap.getFieldNormal(pointX, pointY)[2];"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "X position of the point",
                  "name": "PointX",
                  "type": "expression"
                },
                {
                  "description": "Y position of the point",
                  "name": "PointY",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Change the field value at a grid point.",
              "fullName": "Grid value",
              "functionType": "Action",
              "group": "Field loading",
              "name": "SetGridValue",
              "sentence": "Change the field value of _PARAM0_ at the grid point _PARAM2_; _PARAM3_ to _PARAM4_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const indexX = eventsFunctionContext.getArgument(\"IndexX\");",
                    "const indexY = eventsFunctionContext.getArgument(\"IndexY\");",
                    "const value = eventsFunctionContext.getArgument(\"Value\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "eventsFunctionContext.returnValue = behavior.scalarField.set(indexX, indexY, value);"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "X grid index",
                  "name": "IndexX",
                  "type": "expression"
                },
                {
                  "description": "Y grid index",
                  "name": "IndexY",
                  "type": "expression"
                },
                {
                  "description": "Field value",
                  "name": "Value",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "The field value at a grid point.",
              "fullName": "Grid value",
              "functionType": "Expression",
              "group": "Field saving",
              "name": "GridValue",
              "sentence": "At _PARAM2_; _PARAM3_ the field value of _PARAM0_ is greater than _PARAM4_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const indexX = eventsFunctionContext.getArgument(\"IndexX\");",
                    "const indexY = eventsFunctionContext.getArgument(\"IndexY\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "eventsFunctionContext.returnValue = behavior.scalarField.get(indexX, indexY);"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "X grid index",
                  "name": "IndexX",
                  "type": "expression"
                },
                {
                  "description": "Y grid index",
                  "name": "IndexY",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "The field value at a given location.",
              "fullName": "Field value",
              "functionType": "Expression",
              "group": "Field evaluation",
              "name": "FieldValue",
              "sentence": "At _PARAM2_; _PARAM3_ the field value of _PARAM0_ is greater than _PARAM4_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const pointX = eventsFunctionContext.getArgument(\"PointX\");",
                    "const pointY = eventsFunctionContext.getArgument(\"PointY\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "eventsFunctionContext.returnValue = behavior.heightMap.getHeight(pointX, pointY);"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "X position of the point",
                  "name": "PointX",
                  "type": "expression"
                },
                {
                  "description": "Y position of the point",
                  "name": "PointY",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Check if the contours are filled outside.",
              "fullName": "Fill outside",
              "functionType": "Condition",
              "group": "Field configuration",
              "name": "CheckFillOutside",
              "sentence": "The contours of _PARAM0_ are filled outside",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnBoolean"
                      },
                      "parameters": [
                        "False"
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::PropertyFillOutside"
                      },
                      "parameters": [
                        "Object",
                        "Behavior"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnBoolean"
                      },
                      "parameters": [
                        "True"
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Check if a field is greater than a given value.",
              "fullName": "Field value",
              "functionType": "Condition",
              "group": "Field evaluation",
              "name": "CheckFieldValue",
              "sentence": "At _PARAM2_; _PARAM3_ the field value of _PARAM0_ is greater than _PARAM4_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const pointX = eventsFunctionContext.getArgument(\"PointX\");",
                    "const pointY = eventsFunctionContext.getArgument(\"PointY\");",
                    "const value = eventsFunctionContext.getArgument(\"Value\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "eventsFunctionContext.returnValue = behavior.heightMap.getHeight(pointX, pointY) > value;"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "X position of the point",
                  "name": "PointX",
                  "type": "expression"
                },
                {
                  "description": "Y position of the point",
                  "name": "PointY",
                  "type": "expression"
                },
                {
                  "description": "Value",
                  "name": "Value",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Check if a point is inside the contour.",
              "fullName": "Point is inside",
              "functionType": "Condition",
              "group": "Field evaluation",
              "name": "ContainsPoint",
              "sentence": "_PARAM2_; _PARAM3_ is inside _PARAM0_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");",
                    "",
                    "const pointX = eventsFunctionContext.getArgument(\"PointX\");",
                    "const pointY = eventsFunctionContext.getArgument(\"PointY\");",
                    "",
                    "const behavior = objects[0].getBehavior(behaviorName);",
                    "",
                    "eventsFunctionContext.returnValue = behavior.containsPoint(pointX, pointY);"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                },
                {
                  "description": "X position of the point",
                  "name": "PointX",
                  "type": "expression"
                },
                {
                  "description": "Y position of the point",
                  "name": "PointY",
                  "type": "expression"
                }
              ],
              "objectGroups": []
            }
          ],
          "propertyDescriptors": [
            {
              "value": "0",
              "type": "Number",
              "unit": "Pixel",
              "label": "Area left bound",
              "description": "",
              "group": "",
              "extraInformation": [],
              "name": "AreaLeftBound"
            },
            {
              "value": "0",
              "type": "Number",
              "unit": "Pixel",
              "label": "Area top bound",
              "description": "",
              "group": "",
              "extraInformation": [],
              "name": "AreaTopBound"
            },
            {
              "value": "0",
              "type": "Number",
              "unit": "Pixel",
              "label": "Area right bound",
              "description": "",
              "group": "",
              "extraInformation": [],
              "name": "AreaRightBound"
            },
            {
              "value": "0",
              "type": "Number",
              "unit": "Pixel",
              "label": "Area bottom bound",
              "description": "",
              "group": "",
              "extraInformation": [],
              "name": "AreaBottomBound"
            },
            {
              "value": "20",
              "type": "Number",
              "unit": "Pixel",
              "label": "Cell width",
              "description": "",
              "group": "",
              "extraInformation": [],
              "name": "CellWidth"
            },
            {
              "value": "20",
              "type": "Number",
              "unit": "Pixel",
              "label": "Cell height",
              "description": "",
              "group": "",
              "extraInformation": [],
              "name": "CellHeight"
            },
            {
              "value": "",
              "type": "Boolean",
              "label": "Fill outside",
              "description": "",
              "group": "",
              "extraInformation": [],
              "name": "FillOutside"
            },
            {
              "value": "1",
              "type": "Number",
              "unit": "Dimensionless",
              "label": "Contour threshold",
              "description": "",
              "group": "",
              "extraInformation": [],
              "name": "Threshold"
            },
            {
              "value": "",
              "type": "Boolean",
              "label": "Must only draw what is on the screen",
              "description": "",
              "group": "",
              "extraInformation": [],
              "name": "MustOnlyDrawScreen"
            }
          ],
          "sharedPropertyDescriptors": []
        }
      ],
      "eventsBasedObjects": []
    },
    {
      "author": "",
      "category": "",
      "extensionNamespace": "",
      "fullName": "Path painter",
      "helpPath": "",
      "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWxlYWQtcGVuY2lsIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTE2Ljg0LDIuNzNDMTYuNDUsMi43MyAxNi4wNywyLjg4IDE1Ljc3LDMuMTdMMTMuNjUsNS4yOUwxOC45NSwxMC42TDIxLjA3LDguNUMyMS42Nyw3Ljg5IDIxLjY3LDYuOTQgMjEuMDcsNi4zNkwxNy45LDMuMTdDMTcuNiwyLjg4IDE3LjIyLDIuNzMgMTYuODQsMi43M00xMi45NCw2TDQuODQsMTQuMTFMNy40LDE0LjM5TDcuNTgsMTYuNjhMOS44NiwxNi44NUwxMC4xNSwxOS40MUwxOC4yNSwxMS4zTTQuMjUsMTUuMDRMMi41LDIxLjczTDkuMiwxOS45NEw4Ljk2LDE3Ljc4TDYuNjUsMTcuNjFMNi40NywxNS4yOSIgLz48L3N2Zz4=",
      "name": "PathPainter",
      "previewIconUrl": "https://resources.gdevelop-app.com/assets/Icons/lead-pencil.svg",
      "shortDescription": "",
      "version": "",
      "description": "",
      "tags": [],
      "authorIds": [],
      "dependencies": [],
      "globalVariables": [],
      "sceneVariables": [
        {
          "folded": true,
          "name": "MouseTrackVertices",
          "type": "array",
          "children": []
        }
      ],
      "eventsFunctions": [
        {
          "description": "Check if segments are intersecting.",
          "fullName": "Segments are intersecting",
          "functionType": "Condition",
          "name": "SegmentsIntersect",
          "sentence": "Segments from _PARAM1_ ; _PARAM2_ to _PARAM3_ ; _PARAM4_ and from _PARAM5_ ; _PARAM6_ to _PARAM7_ ; _PARAM8_ are intersecting each other",
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "const ax = eventsFunctionContext.getArgument(\"Segment1X1\");",
                "const ay = eventsFunctionContext.getArgument(\"Segment1Y1\");",
                "const bx = eventsFunctionContext.getArgument(\"Segment1X2\");",
                "const by = eventsFunctionContext.getArgument(\"Segment1Y2\");",
                "const cx = eventsFunctionContext.getArgument(\"Segment2X1\");",
                "const cy = eventsFunctionContext.getArgument(\"Segment2Y1\");",
                "const dx = eventsFunctionContext.getArgument(\"Segment2X2\");",
                "const dy = eventsFunctionContext.getArgument(\"Segment2Y2\");",
                "",
                "        // console.log(\"Test: \" + (ax-ax) + \" \" + (ay-ay) + \" -> \" + (bx-ax) + \" \" + (by-ay) +",
                "        // \"   \" + (cx-ax) + \" \" + (cy-ay) + \" -> \" + (dx-ax) + \" \" + (dy-ay));",
                "",
                "    const deltaABx = bx - ax;",
                "    const deltaABy = by - ay;",
                "    const deltaCAx = ax - cx;",
                "    const deltaCAy = ay - cy;",
                "    const deltaCDx = dx - cx;",
                "    const deltaCDy = dy - cy;",
                "",
                "    const numerator = deltaCAy * deltaCDx - deltaCAx * deltaCDy;",
                "    const denominator = deltaABx * deltaCDy - deltaABy * deltaCDx;",
                "",
                "    // Perform early exit tests.",
                "    if (denominator === 0 && numerator !== 0) {",
                "      // If numerator is zero, then the lines are colinear.",
                "      // Since it isn't, then the lines must be parallel.",
                "      eventsFunctionContext.returnValue = false;",
                "      return;",
                "    }",
                "",
                "    // Lines intersect. But do the segments intersect?",
                "",
                "    // Forcing float division on both of these via casting of the",
                "    // denominator.",
                "    const factorAB = numerator / denominator;",
                "    const factorCD = (deltaCAy * deltaABx - deltaCAx * deltaABy) / denominator;",
                "",
                "    // Determine the type of intersection",
                "    if (",
                "      factorAB >= 0.0 &&",
                "      factorAB <= 1.0 &&",
                "      factorCD >= 0.0 &&",
                "      factorCD <= 1.0",
                "    ) {",
                "        // console.log(\"Intersection: \" + (ax-ax) + \" \" + (ay-ay) + \" -> \" + (bx-ax) + \" \" + (by-ay) +",
                "        // \"   \" + (cx-ax) + \" \" + (cy-ay) + \" -> \" + (dx-ax) + \" \" + (dy-ay));",
                "          eventsFunctionContext.returnValue = true;",
                "      return; // The two segments intersect.",
                "    }",
                "",
                "    // The lines intersect, but segments do not.",
                "    eventsFunctionContext.returnValue = false;",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "description": "Segment1 X1",
              "name": "Segment1X1",
              "type": "expression"
            },
            {
              "description": "Segment1 Y1",
              "name": "Segment1Y1",
              "type": "expression"
            },
            {
              "description": "Segment1 X2",
              "name": "Segment1X2",
              "type": "expression"
            },
            {
              "description": "Segment1 Y2",
              "name": "Segment1Y2",
              "type": "expression"
            },
            {
              "description": "Segment2 X1",
              "name": "Segment2X1",
              "type": "expression"
            },
            {
              "description": "Segment2 Y1",
              "name": "Segment2Y1",
              "type": "expression"
            },
            {
              "description": "Segment2 X2",
              "name": "Segment2X2",
              "type": "expression"
            },
            {
              "description": "Segment2 Y2",
              "name": "Segment2Y2",
              "type": "expression"
            }
          ],
          "objectGroups": []
        }
      ],
      "eventsBasedBehaviors": [
        {
          "description": "",
          "fullName": "Path painter",
          "name": "PathPainter",
          "objectType": "PrimitiveDrawing::Drawer",
          "eventsFunctions": [
            {
              "fullName": "",
              "functionType": "Action",
              "name": "doStepPreEvents",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "The logic is done before scene events and the rendering after them."
                },
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "The state handling order matters.\nThis avoids to do unintended transitions."
                },
                {
                  "colorB": 228,
                  "colorG": 176,
                  "colorR": 74,
                  "creationTime": 0,
                  "name": "Done",
                  "source": "",
                  "type": "BuiltinCommonInstructions::Group",
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "PathPainter::PathPainter::PropertyState"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "=",
                            "\"Done\""
                          ]
                        }
                      ],
                      "actions": [
                        {
                          "type": {
                            "value": "PathPainter::PathPainter::SetPropertyState"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "=",
                            "\"Idle\""
                          ]
                        }
                      ]
                    }
                  ],
                  "parameters": []
                },
                {
                  "colorB": 228,
                  "colorG": 176,
                  "colorR": 74,
                  "creationTime": 0,
                  "name": "Drawing",
                  "source": "",
                  "type": "BuiltinCommonInstructions::Group",
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "BuiltinCommonInstructions::Or"
                          },
                          "parameters": [],
                          "subInstructions": [
                            {
                              "type": {
                                "value": "PathPainter::PathPainter::PropertyState"
                              },
                              "parameters": [
                                "Object",
                                "Behavior",
                                "=",
                                "\"Drawing\""
                              ]
                            },
                            {
                              "type": {
                                "value": "PathPainter::PathPainter::PropertyState"
                              },
                              "parameters": [
                                "Object",
                                "Behavior",
                                "=",
                                "\"Starting\""
                              ]
                            },
                            {
                              "type": {
                                "value": "PathPainter::PathPainter::PropertyState"
                              },
                              "parameters": [
                                "Object",
                                "Behavior",
                                "=",
                                "\"NewVertex\""
                              ]
                            }
                          ]
                        }
                      ],
                      "actions": [
                        {
                          "type": {
                            "value": "PathPainter::PathPainter::SetPropertyState"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "=",
                            "\"Drawing\""
                          ]
                        }
                      ],
                      "events": [
                        {
                          "type": "BuiltinCommonInstructions::Comment",
                          "color": {
                            "b": 109,
                            "g": 230,
                            "r": 255,
                            "textB": 0,
                            "textG": 0,
                            "textR": 0
                          },
                          "comment": "It creates one vertex per cell, because this game doesn't need more."
                        },
                        {
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [
                            {
                              "type": {
                                "value": "MouseButtonPressed"
                              },
                              "parameters": [
                                "",
                                "Left"
                              ]
                            },
                            {
                              "type": {
                                "value": "BuiltinCommonInstructions::Or"
                              },
                              "parameters": [],
                              "subInstructions": [
                                {
                                  "type": {
                                    "value": "Egal"
                                  },
                                  "parameters": [
                                    "floor(CursorX() / CellWidth)",
                                    "!=",
                                    "floor(MouseTrackVertices[VariableChildCount(MouseTrackVertices) - 1].X / CellWidth)"
                                  ]
                                },
                                {
                                  "type": {
                                    "value": "Egal"
                                  },
                                  "parameters": [
                                    "floor(CursorY() / CellHeight)",
                                    "!=",
                                    "floor(MouseTrackVertices[VariableChildCount(MouseTrackVertices) - 1].Y / CellHeight)"
                                  ]
                                }
                              ]
                            }
                          ],
                          "actions": [
                            {
                              "type": {
                                "value": "PathPainter::PathPainter::SetPropertyState"
                              },
                              "parameters": [
                                "Object",
                                "Behavior",
                                "=",
                                "\"NewVertex\""
                              ]
                            },
                            {
                              "type": {
                                "value": "PathPainter::PathPainter::SetPropertyPathLength"
                              },
                              "parameters": [
                                "Object",
                                "Behavior",
                                "+",
                                "DistanceBetweenPositions(MouseTrackVertices[VariableChildCount(MouseTrackVertices) - 1].X, MouseTrackVertices[VariableChildCount(MouseTrackVertices) - 1].Y, CursorX(), CursorY())"
                              ]
                            }
                          ],
                          "events": [
                            {
                              "type": "BuiltinCommonInstructions::Standard",
                              "conditions": [],
                              "actions": [
                                {
                                  "type": {
                                    "value": "SetNumberVariable"
                                  },
                                  "parameters": [
                                    "Vertex.X",
                                    "=",
                                    "CursorX()"
                                  ]
                                },
                                {
                                  "type": {
                                    "value": "SetNumberVariable"
                                  },
                                  "parameters": [
                                    "Vertex.Y",
                                    "=",
                                    "CursorY()"
                                  ]
                                },
                                {
                                  "type": {
                                    "value": "PushVariable"
                                  },
                                  "parameters": [
                                    "MouseTrackVertices",
                                    "Vertex"
                                  ]
                                }
                              ],
                              "variables": [
                                {
                                  "name": "Vertex",
                                  "type": "structure",
                                  "children": [
                                    {
                                      "folded": true,
                                      "name": "X",
                                      "type": "number",
                                      "value": 0
                                    },
                                    {
                                      "name": "Y",
                                      "type": "number",
                                      "value": 0
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [
                            {
                              "type": {
                                "value": "MouseButtonReleased"
                              },
                              "parameters": [
                                "",
                                "Left"
                              ]
                            }
                          ],
                          "actions": [],
                          "events": [
                            {
                              "type": "BuiltinCommonInstructions::Standard",
                              "conditions": [
                                {
                                  "type": {
                                    "value": "PathPainter::PathPainter::PathIsLongEnough"
                                  },
                                  "parameters": [
                                    "Object",
                                    "Behavior",
                                    ""
                                  ]
                                }
                              ],
                              "actions": [
                                {
                                  "type": {
                                    "value": "PathPainter::PathPainter::SetPropertyState"
                                  },
                                  "parameters": [
                                    "Object",
                                    "Behavior",
                                    "=",
                                    "\"Done\""
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "BuiltinCommonInstructions::Standard",
                              "conditions": [
                                {
                                  "type": {
                                    "inverted": true,
                                    "value": "PathPainter::PathPainter::PathIsLongEnough"
                                  },
                                  "parameters": [
                                    "Object",
                                    "Behavior",
                                    ""
                                  ]
                                }
                              ],
                              "actions": [
                                {
                                  "type": {
                                    "value": "PathPainter::PathPainter::Abort"
                                  },
                                  "parameters": [
                                    "Object",
                                    "Behavior",
                                    ""
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ],
                  "parameters": []
                },
                {
                  "colorB": 228,
                  "colorG": 176,
                  "colorR": 74,
                  "creationTime": 0,
                  "name": "Idle",
                  "source": "",
                  "type": "BuiltinCommonInstructions::Group",
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "PathPainter::PathPainter::PropertyState"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "=",
                            "\"Idle\""
                          ]
                        }
                      ],
                      "actions": [],
                      "events": [
                        {
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [
                            {
                              "type": {
                                "value": "MouseButtonPressed"
                              },
                              "parameters": [
                                "",
                                "Left"
                              ]
                            }
                          ],
                          "actions": [
                            {
                              "type": {
                                "value": "PathPainter::PathPainter::SetPropertyState"
                              },
                              "parameters": [
                                "Object",
                                "Behavior",
                                "=",
                                "\"Starting\""
                              ]
                            },
                            {
                              "type": {
                                "value": "ClearVariableChildren"
                              },
                              "parameters": [
                                "MouseTrackVertices"
                              ]
                            }
                          ],
                          "events": [
                            {
                              "type": "BuiltinCommonInstructions::Standard",
                              "conditions": [],
                              "actions": [
                                {
                                  "type": {
                                    "value": "SetNumberVariable"
                                  },
                                  "parameters": [
                                    "Vertex.X",
                                    "=",
                                    "CursorX()"
                                  ]
                                },
                                {
                                  "type": {
                                    "value": "SetNumberVariable"
                                  },
                                  "parameters": [
                                    "Vertex.Y",
                                    "=",
                                    "CursorY()"
                                  ]
                                },
                                {
                                  "type": {
                                    "value": "PushVariable"
                                  },
                                  "parameters": [
                                    "MouseTrackVertices",
                                    "Vertex"
                                  ]
                                },
                                {
                                  "type": {
                                    "value": "PushVariable"
                                  },
                                  "parameters": [
                                    "MouseTrackVertices",
                                    "Vertex"
                                  ]
                                }
                              ],
                              "variables": [
                                {
                                  "name": "Vertex",
                                  "type": "structure",
                                  "children": [
                                    {
                                      "folded": true,
                                      "name": "X",
                                      "type": "number",
                                      "value": 0
                                    },
                                    {
                                      "name": "Y",
                                      "type": "number",
                                      "value": 0
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ],
                  "parameters": []
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "PathPainter::PathPainter",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "fullName": "",
              "functionType": "Action",
              "name": "doStepPostEvents",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "The rendering is done after scene events and the logic before them."
                },
                {
                  "colorB": 228,
                  "colorG": 176,
                  "colorR": 74,
                  "creationTime": 0,
                  "name": "Drawing",
                  "source": "",
                  "type": "BuiltinCommonInstructions::Group",
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "BuiltinCommonInstructions::Or"
                          },
                          "parameters": [],
                          "subInstructions": [
                            {
                              "type": {
                                "value": "PathPainter::PathPainter::PropertyState"
                              },
                              "parameters": [
                                "Object",
                                "Behavior",
                                "=",
                                "\"Drawing\""
                              ]
                            },
                            {
                              "type": {
                                "value": "PathPainter::PathPainter::PropertyState"
                              },
                              "parameters": [
                                "Object",
                                "Behavior",
                                "=",
                                "\"Starting\""
                              ]
                            },
                            {
                              "type": {
                                "value": "PathPainter::PathPainter::PropertyState"
                              },
                              "parameters": [
                                "Object",
                                "Behavior",
                                "=",
                                "\"NewVertex\""
                              ]
                            }
                          ]
                        }
                      ],
                      "actions": [],
                      "events": [
                        {
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [
                            {
                              "type": {
                                "value": "Egal"
                              },
                              "parameters": [
                                "VariableChildCount(MouseTrackVertices)",
                                ">",
                                "0"
                              ]
                            }
                          ],
                          "actions": [],
                          "events": [
                            {
                              "type": "BuiltinCommonInstructions::Standard",
                              "conditions": [],
                              "actions": [
                                {
                                  "type": {
                                    "value": "PrimitiveDrawing::OutlineColor"
                                  },
                                  "parameters": [
                                    "Object",
                                    "\"255;255;255\""
                                  ]
                                },
                                {
                                  "type": {
                                    "value": "PrimitiveDrawing::BeginFillPath"
                                  },
                                  "parameters": [
                                    "Object",
                                    "MouseTrackVertices[0].X",
                                    "MouseTrackVertices[0].Y"
                                  ]
                                }
                              ],
                              "events": [
                                {
                                  "type": "BuiltinCommonInstructions::ForEachChildVariable",
                                  "iterableVariableName": "MouseTrackVertices",
                                  "valueIteratorVariableName": "Vertex",
                                  "keyIteratorVariableName": "",
                                  "conditions": [],
                                  "actions": [
                                    {
                                      "type": {
                                        "value": "PrimitiveDrawing::PathLineTo"
                                      },
                                      "parameters": [
                                        "Object",
                                        "Vertex.X",
                                        "Vertex.Y"
                                      ]
                                    }
                                  ]
                                }
                              ],
                              "variables": [
                                {
                                  "name": "Vertex",
                                  "type": "structure",
                                  "children": [
                                    {
                                      "name": "X",
                                      "type": "number",
                                      "value": 0
                                    },
                                    {
                                      "folded": true,
                                      "name": "Y",
                                      "type": "number",
                                      "value": 0
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "BuiltinCommonInstructions::Standard",
                              "conditions": [],
                              "actions": [
                                {
                                  "type": {
                                    "value": "PrimitiveDrawing::PathLineTo"
                                  },
                                  "parameters": [
                                    "Object",
                                    "CursorX()",
                                    "CursorY()"
                                  ]
                                },
                                {
                                  "type": {
                                    "value": "PrimitiveDrawing::EndFillPath"
                                  },
                                  "parameters": [
                                    "Object"
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ],
                  "parameters": []
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "PathPainter::PathPainter",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "fullName": "Is drawing path",
              "functionType": "Condition",
              "name": "IsDrawingPath",
              "sentence": "_PARAM0_ is drawing a path",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Or"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "value": "PathPainter::PathPainter::PropertyState"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "=",
                            "\"Drawing\""
                          ]
                        },
                        {
                          "type": {
                            "value": "PathPainter::PathPainter::PropertyState"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "=",
                            "\"Starting\""
                          ]
                        },
                        {
                          "type": {
                            "value": "PathPainter::PathPainter::PropertyState"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "=",
                            "\"NewVertex\""
                          ]
                        }
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnBoolean"
                      },
                      "parameters": [
                        "True"
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "PathPainter::PathPainter",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "fullName": "Path is started",
              "functionType": "Condition",
              "name": "PathIsStarted",
              "sentence": "_PARAM0_ started a path",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::PropertyState"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "\"Starting\""
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnBoolean"
                      },
                      "parameters": [
                        "True"
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "PathPainter::PathPainter",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "fullName": "Vertex is added",
              "functionType": "Condition",
              "name": "VertexIsAdded",
              "sentence": "_PARAM0_ added a new vertex to its path",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::PropertyState"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "\"NewVertex\""
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnBoolean"
                      },
                      "parameters": [
                        "True"
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "PathPainter::PathPainter",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "fullName": "Path is done",
              "functionType": "Condition",
              "name": "PathIsDone",
              "sentence": "_PARAM0_ ended a path",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::PropertyState"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "\"Done\""
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnBoolean"
                      },
                      "parameters": [
                        "True"
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "PathPainter::PathPainter",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Reset the path from the mouse position.",
              "fullName": "Reset",
              "functionType": "Action",
              "name": "Reset",
              "sentence": "_PARAM0_ reset the path",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::IsDrawingPath"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        ""
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "ClearVariableChildren"
                      },
                      "parameters": [
                        "MouseTrackVertices"
                      ]
                    },
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::SetPropertyState"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "\"Drawing\""
                      ]
                    },
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::SetPropertyPathLength"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "0"
                      ]
                    }
                  ],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [],
                      "actions": [
                        {
                          "type": {
                            "value": "SetNumberVariable"
                          },
                          "parameters": [
                            "Vertex.X",
                            "=",
                            "CursorX()"
                          ]
                        },
                        {
                          "type": {
                            "value": "SetNumberVariable"
                          },
                          "parameters": [
                            "Vertex.Y",
                            "=",
                            "CursorY()"
                          ]
                        },
                        {
                          "type": {
                            "value": "PushVariable"
                          },
                          "parameters": [
                            "MouseTrackVertices",
                            "Vertex"
                          ]
                        },
                        {
                          "type": {
                            "value": "PushVariable"
                          },
                          "parameters": [
                            "MouseTrackVertices",
                            "Vertex"
                          ]
                        }
                      ],
                      "variables": [
                        {
                          "name": "Vertex",
                          "type": "structure",
                          "children": [
                            {
                              "folded": true,
                              "name": "X",
                              "type": "number",
                              "value": 0
                            },
                            {
                              "name": "Y",
                              "type": "number",
                              "value": 0
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "PathPainter::PathPainter",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "fullName": "Abort",
              "functionType": "Action",
              "name": "Abort",
              "sentence": "_PARAM0_ abort the path",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::SetPropertyState"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "\"Idle\""
                      ]
                    },
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::SetPropertyPathLength"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "0"
                      ]
                    },
                    {
                      "type": {
                        "value": "ClearVariableChildren"
                      },
                      "parameters": [
                        "MouseTrackVertices"
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "PathPainter::PathPainter",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Check if the last segment is intersecting the path.",
              "fullName": "Has intersection",
              "functionType": "Condition",
              "name": "HasIntersection",
              "sentence": "_PARAM0_ last segment is intersecting the path",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnBoolean"
                      },
                      "parameters": [
                        "False"
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "Egal"
                      },
                      "parameters": [
                        "VariableChildCount(MouseTrackVertices)",
                        ">",
                        "5"
                      ]
                    }
                  ],
                  "actions": [],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [],
                      "actions": [
                        {
                          "type": {
                            "value": "SetNumberVariable"
                          },
                          "parameters": [
                            "PreviousVertexX",
                            "=",
                            "MouseTrackVertices[0].X"
                          ]
                        },
                        {
                          "type": {
                            "value": "SetNumberVariable"
                          },
                          "parameters": [
                            "PreviousVertexY",
                            "=",
                            "MouseTrackVertices[0].Y"
                          ]
                        }
                      ],
                      "events": [
                        {
                          "type": "BuiltinCommonInstructions::ForEachChildVariable",
                          "iterableVariableName": "MouseTrackVertices",
                          "valueIteratorVariableName": "Vertex",
                          "keyIteratorVariableName": "Index",
                          "conditions": [
                            {
                              "type": {
                                "value": "NumberVariable"
                              },
                              "parameters": [
                                "Index",
                                "<",
                                "VariableChildCount(MouseTrackVertices) - 3"
                              ]
                            }
                          ],
                          "actions": [],
                          "events": [
                            {
                              "type": "BuiltinCommonInstructions::Standard",
                              "conditions": [
                                {
                                  "type": {
                                    "value": "PathPainter::SegmentsIntersect"
                                  },
                                  "parameters": [
                                    "",
                                    "CursorX()",
                                    "CursorY()",
                                    "MouseTrackVertices[VariableChildCount(MouseTrackVertices) - 3].X",
                                    "MouseTrackVertices[VariableChildCount(MouseTrackVertices) - 3].Y",
                                    "Vertex.X",
                                    "Vertex.Y",
                                    "PreviousVertexX",
                                    "PreviousVertexY",
                                    ""
                                  ]
                                }
                              ],
                              "actions": [
                                {
                                  "type": {
                                    "value": "SetReturnBoolean"
                                  },
                                  "parameters": [
                                    "True"
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "BuiltinCommonInstructions::Standard",
                              "conditions": [],
                              "actions": [
                                {
                                  "type": {
                                    "value": "SetNumberVariable"
                                  },
                                  "parameters": [
                                    "PreviousVertexX",
                                    "=",
                                    "Vertex.X"
                                  ]
                                },
                                {
                                  "type": {
                                    "value": "SetNumberVariable"
                                  },
                                  "parameters": [
                                    "PreviousVertexY",
                                    "=",
                                    "Vertex.Y"
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ],
                      "variables": [
                        {
                          "folded": true,
                          "name": "Index",
                          "type": "number",
                          "value": 0
                        },
                        {
                          "name": "Vertex",
                          "type": "structure",
                          "children": [
                            {
                              "name": "X",
                              "type": "number",
                              "value": 0
                            },
                            {
                              "folded": true,
                              "name": "Y",
                              "type": "number",
                              "value": 0
                            }
                          ]
                        },
                        {
                          "folded": true,
                          "name": "PreviousVertexX",
                          "type": "number",
                          "value": 0
                        },
                        {
                          "folded": true,
                          "name": "PreviousVertexY",
                          "type": "number",
                          "value": 0
                        }
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "PathPainter::PathPainter",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Check if the path is intersecting lava.",
              "fullName": "Is intersecting lava",
              "functionType": "Condition",
              "name": "HasIntersectionWithBall",
              "sentence": "_PARAM0_ is intersecting _PARAM2_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "PreviousVertexX",
                        "=",
                        "MouseTrackVertices[0].X"
                      ]
                    },
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "PreviousVertexY",
                        "=",
                        "MouseTrackVertices[0].Y"
                      ]
                    }
                  ],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::ForEachChildVariable",
                      "iterableVariableName": "MouseTrackVertices",
                      "valueIteratorVariableName": "Vertex",
                      "keyIteratorVariableName": "Index",
                      "conditions": [
                        {
                          "type": {
                            "value": "NumberVariable"
                          },
                          "parameters": [
                            "Index",
                            "<",
                            "VariableChildCount(MouseTrackVertices) - 3"
                          ]
                        }
                      ],
                      "actions": [],
                      "events": [
                        {
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [
                            {
                              "type": {
                                "value": "MarchingSquares::MarchingSquaresBehavior::ContainsPoint"
                              },
                              "parameters": [
                                "MarchingSquare",
                                "MarchingSquareBehavior",
                                "Vertex.X",
                                "Vertex.Y",
                                ""
                              ]
                            }
                          ],
                          "actions": [
                            {
                              "type": {
                                "value": "PathPainter::PathPainter::SetPropertyMarchingSquareIntersectionX"
                              },
                              "parameters": [
                                "Object",
                                "Behavior",
                                "=",
                                "Vertex.X"
                              ]
                            },
                            {
                              "type": {
                                "value": "PathPainter::PathPainter::SetPropertyMarchingSquareIntersectionY"
                              },
                              "parameters": [
                                "Object",
                                "Behavior",
                                "=",
                                "Vertex.Y"
                              ]
                            },
                            {
                              "type": {
                                "value": "SetReturnBoolean"
                              },
                              "parameters": [
                                "True"
                              ]
                            }
                          ]
                        },
                        {
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [],
                          "actions": [
                            {
                              "type": {
                                "value": "SetNumberVariable"
                              },
                              "parameters": [
                                "PreviousVertexX",
                                "=",
                                "Vertex.X"
                              ]
                            },
                            {
                              "type": {
                                "value": "SetNumberVariable"
                              },
                              "parameters": [
                                "PreviousVertexY",
                                "=",
                                "Vertex.Y"
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ],
                  "variables": [
                    {
                      "folded": true,
                      "name": "PreviousVertexX",
                      "type": "number",
                      "value": 0
                    },
                    {
                      "folded": true,
                      "name": "PreviousVertexY",
                      "type": "number",
                      "value": 0
                    },
                    {
                      "name": "Vertex",
                      "type": "structure",
                      "children": [
                        {
                          "name": "X",
                          "type": "number",
                          "value": 0
                        },
                        {
                          "folded": true,
                          "name": "Y",
                          "type": "number",
                          "value": 0
                        }
                      ]
                    },
                    {
                      "folded": true,
                      "name": "Index",
                      "type": "number",
                      "value": 0
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::ContainsPoint"
                      },
                      "parameters": [
                        "MarchingSquare",
                        "MarchingSquareBehavior",
                        "CursorX()",
                        "CursorY()",
                        ""
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::SetPropertyMarchingSquareIntersectionX"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "CursorX()"
                      ]
                    },
                    {
                      "type": {
                        "value": "PathPainter::PathPainter::SetPropertyMarchingSquareIntersectionY"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "CursorY()"
                      ]
                    },
                    {
                      "type": {
                        "value": "SetReturnBoolean"
                      },
                      "parameters": [
                        "True"
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "PathPainter::PathPainter",
                  "type": "behavior"
                },
                {
                  "description": "Marching square object",
                  "name": "MarchingSquare",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "objectList"
                },
                {
                  "description": "Marching square behavior",
                  "name": "MarchingSquareBehavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "fullName": "Intersection X",
              "functionType": "Expression",
              "name": "IntersectionX",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnNumber"
                      },
                      "parameters": [
                        "MarchingSquareIntersectionX"
                      ]
                    }
                  ]
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "PathPainter::PathPainter",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "fullName": "Intersection Y",
              "functionType": "Expression",
              "name": "IntersectionY",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnNumber"
                      },
                      "parameters": [
                        "MarchingSquareIntersectionY"
                      ]
                    }
                  ]
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "PathPainter::PathPainter",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Draw the path on a field.",
              "fullName": "Draw path",
              "functionType": "Action",
              "name": "DrawPathOnField",
              "sentence": "Draw the path of _PARAM0_ on _PARAM2_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "Egal"
                      },
                      "parameters": [
                        "VariableChildCount(MouseTrackVertices)",
                        ">",
                        "5"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "PreviousVertexX",
                        "=",
                        "MouseTrackVertices[0].X"
                      ]
                    },
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "PreviousVertexY",
                        "=",
                        "MouseTrackVertices[0].Y"
                      ]
                    }
                  ],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::ForEachChildVariable",
                      "iterableVariableName": "MouseTrackVertices",
                      "valueIteratorVariableName": "Vertex",
                      "keyIteratorVariableName": "",
                      "conditions": [],
                      "actions": [
                        {
                          "type": {
                            "value": "MarchingSquares::MarchingSquaresBehavior::AddLine"
                          },
                          "parameters": [
                            "MarchingSquareObject",
                            "MarchingSquareBehavior",
                            "PreviousVertexX",
                            "PreviousVertexY",
                            "Vertex.X",
                            "Vertex.Y",
                            "10",
                            "1.5",
                            "\"Maximum\"",
                            ""
                          ]
                        },
                        {
                          "type": {
                            "value": "SetNumberVariable"
                          },
                          "parameters": [
                            "PreviousVertexX",
                            "=",
                            "Vertex.X"
                          ]
                        },
                        {
                          "type": {
                            "value": "SetNumberVariable"
                          },
                          "parameters": [
                            "PreviousVertexY",
                            "=",
                            "Vertex.Y"
                          ]
                        }
                      ]
                    }
                  ],
                  "variables": [
                    {
                      "name": "Vertex",
                      "type": "structure",
                      "children": [
                        {
                          "name": "X",
                          "type": "number",
                          "value": 0
                        },
                        {
                          "folded": true,
                          "name": "Y",
                          "type": "number",
                          "value": 0
                        }
                      ]
                    },
                    {
                      "folded": true,
                      "name": "PreviousVertexX",
                      "type": "number",
                      "value": 0
                    },
                    {
                      "folded": true,
                      "name": "PreviousVertexY",
                      "type": "number",
                      "value": 0
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "PathPainter::PathPainter",
                  "type": "behavior"
                },
                {
                  "description": "Marching square object",
                  "name": "MarchingSquareObject",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "objectList"
                },
                {
                  "description": "Marching square behavior",
                  "name": "MarchingSquareBehavior",
                  "supplementaryInformation": "MarchingSquares::MarchingSquaresBehavior",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Check if the path is long enough",
              "fullName": "Path is long enough",
              "functionType": "Condition",
              "name": "PathIsLongEnough",
              "sentence": "Path of _PARAM0_ is long enough",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnBoolean"
                      },
                      "parameters": [
                        "False"
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "Egal"
                      },
                      "parameters": [
                        "PathLength",
                        ">=",
                        "MinPathLength"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetReturnBoolean"
                      },
                      "parameters": [
                        "True"
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "PathPainter::PathPainter",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            }
          ],
          "propertyDescriptors": [
            {
              "value": "Idle",
              "type": "String",
              "label": "State",
              "description": "",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "State"
            },
            {
              "value": "10",
              "type": "Number",
              "label": "Cell width",
              "description": "",
              "group": "",
              "extraInformation": [],
              "name": "CellWidth"
            },
            {
              "value": "10",
              "type": "Number",
              "label": "Cell height",
              "description": "",
              "group": "",
              "extraInformation": [],
              "name": "CellHeight"
            },
            {
              "value": "32",
              "type": "Number",
              "label": "Minimum path length",
              "description": "",
              "group": "",
              "extraInformation": [],
              "name": "MinPathLength"
            },
            {
              "value": "",
              "type": "Number",
              "label": "Intersection X",
              "description": "",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "MarchingSquareIntersectionX"
            },
            {
              "value": "",
              "type": "Number",
              "label": "Intersection Y",
              "description": "",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "MarchingSquareIntersectionY"
            },
            {
              "value": "",
              "type": "Number",
              "label": "path length",
              "description": "",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "PathLength"
            }
          ],
          "sharedPropertyDescriptors": []
        }
      ],
      "eventsBasedObjects": []
    },
    {
      "author": "",
      "category": "",
      "extensionNamespace": "",
      "fullName": "Territory",
      "helpPath": "",
      "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPGc+DQoJPHBhdGggZD0iTTIzLDEzLjZsNSw1VjRjMC0wLjYtMC40LTEtMS0xaC00VjEzLjZ6Ii8+DQoJPHBvbHlnb24gcG9pbnRzPSIxMi40LDMgMTYuNyw3LjMgMTkuNywxMC4zIDIxLDExLjYgMjEsMyAJIi8+DQoJPHBhdGggZD0iTTE0LjYsOGwtNS01SDVDNC40LDMsNCwzLjQsNCw0djE0LjZMMTQuNiw4eiIvPg0KPC9nPg0KPHBhdGggZD0iTTI4LjgsMjkuMkwyNiwyNi40YzAuNy0xLDEtMi4xLDEtMy40YzAtMy4zLTIuNy02LTYtNnMtNiwyLjctNiw2czIuNyw2LDYsNmMxLjIsMCwyLjQtMC40LDMuNC0xbDIuOCwyLjgNCgljMC40LDAuNCwxLjIsMC40LDEuNiwwQzI5LjIsMzAuNCwyOS4yLDI5LjYsMjguOCwyOS4yeiIvPg0KPHBhdGggZD0iTTEzLDIzYzAtNC40LDMuNi04LDgtOGMwLjIsMCwwLjQsMCwwLjYsMGwtMC4zLTAuM2MwLDAsMCwwLDAsMGwtMy0zTDE2LDkuNGwtMTIsMTJWMjZjMCwwLjYsMC40LDEsMSwxaDkuMQ0KCUMxMy40LDI1LjgsMTMsMjQuNSwxMywyM3oiLz4NCjwvc3ZnPg0K",
      "name": "Territory",
      "previewIconUrl": "https://resources.gdevelop-app.com/assets/Icons/Glyphster Pack/Master/SVG/Maps and Navigation/Maps and Navigation_map_find_search.svg",
      "shortDescription": "",
      "version": "",
      "description": "",
      "tags": [],
      "authorIds": [],
      "dependencies": [],
      "globalVariables": [],
      "sceneVariables": [],
      "eventsFunctions": [],
      "eventsBasedBehaviors": [
        {
          "description": "",
          "fullName": "",
          "name": "Territory",
          "objectType": "PrimitiveDrawing::Drawer",
          "eventsFunctions": [
            {
              "description": "Initialize the field with a border",
              "fullName": "Initialize",
              "functionType": "Action",
              "name": "Initialize",
              "sentence": "Initialize the field of _PARAM0_",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "Frame the scene with player territory"
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::ClearField"
                      },
                      "parameters": [
                        "Object",
                        "MarchingSquaresBehavior",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::AddLine"
                      },
                      "parameters": [
                        "Object",
                        "MarchingSquaresBehavior",
                        "0",
                        "0",
                        "0",
                        "SceneWindowHeight()",
                        "BorderSize",
                        "1.5",
                        "\"Maximum\"",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::AddLine"
                      },
                      "parameters": [
                        "Object",
                        "MarchingSquaresBehavior",
                        "0",
                        "SceneWindowHeight()",
                        "SceneWindowWidth()",
                        "SceneWindowHeight()",
                        "BorderSize",
                        "1.5",
                        "\"Maximum\"",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::AddLine"
                      },
                      "parameters": [
                        "Object",
                        "MarchingSquaresBehavior",
                        "SceneWindowWidth()",
                        "SceneWindowHeight()",
                        "SceneWindowWidth()",
                        "0",
                        "BorderSize",
                        "1.5",
                        "\"Maximum\"",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::AddLine"
                      },
                      "parameters": [
                        "Object",
                        "MarchingSquaresBehavior",
                        "SceneWindowWidth()",
                        "0",
                        "0",
                        "0",
                        "BorderSize",
                        "1.5",
                        "\"Maximum\"",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::UpdateHitboxes"
                      },
                      "parameters": [
                        "Object",
                        "MarchingSquaresBehavior",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "PrimitiveDrawing::Drawer::ClearShapes"
                      },
                      "parameters": [
                        "Object"
                      ]
                    },
                    {
                      "type": {
                        "value": "MarchingSquares::MarchingSquaresBehavior::DrawField"
                      },
                      "parameters": [
                        "Object",
                        "MarchingSquaresBehavior",
                        "1"
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "Territory::Territory",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "fullName": "Completion",
              "functionType": "Expression",
              "name": "Completion",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "Evaluate 10x10 points, the completion is the number of points inside the player territory."
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetNumberVariable"
                      },
                      "parameters": [
                        "X",
                        "=",
                        "BorderSize * 3 / 2"
                      ]
                    }
                  ],
                  "events": [
                    {
                      "infiniteLoopWarning": true,
                      "type": "BuiltinCommonInstructions::While",
                      "whileConditions": [
                        {
                          "type": {
                            "value": "NumberVariable"
                          },
                          "parameters": [
                            "X",
                            "<",
                            "SceneWindowWidth() - BorderSize"
                          ]
                        }
                      ],
                      "conditions": [],
                      "actions": [
                        {
                          "type": {
                            "value": "SetNumberVariable"
                          },
                          "parameters": [
                            "Y",
                            "=",
                            "BorderSize * 3 / 2"
                          ]
                        }
                      ],
                      "events": [
                        {
                          "infiniteLoopWarning": true,
                          "type": "BuiltinCommonInstructions::While",
                          "whileConditions": [
                            {
                              "type": {
                                "value": "NumberVariable"
                              },
                              "parameters": [
                                "Y",
                                "<",
                                "SceneWindowHeight() - BorderSize"
                              ]
                            }
                          ],
                          "conditions": [],
                          "actions": [],
                          "events": [
                            {
                              "type": "BuiltinCommonInstructions::Standard",
                              "conditions": [
                                {
                                  "type": {
                                    "value": "MarchingSquares::MarchingSquaresBehavior::CheckFieldValue"
                                  },
                                  "parameters": [
                                    "Object",
                                    "MarchingSquaresBehavior",
                                    "X",
                                    "Y",
                                    "1",
                                    ""
                                  ]
                                }
                              ],
                              "actions": [
                                {
                                  "type": {
                                    "value": "SetNumberVariable"
                                  },
                                  "parameters": [
                                    "Completion",
                                    "+",
                                    "1"
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "BuiltinCommonInstructions::Standard",
                              "conditions": [],
                              "actions": [
                                {
                                  "type": {
                                    "value": "SetNumberVariable"
                                  },
                                  "parameters": [
                                    "Y",
                                    "+",
                                    "(SceneWindowHeight() - 3 * BorderSize) / 9"
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [],
                          "actions": [
                            {
                              "type": {
                                "value": "SetNumberVariable"
                              },
                              "parameters": [
                                "X",
                                "+",
                                "(SceneWindowWidth() - 3 * BorderSize) / 9"
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [],
                      "actions": [
                        {
                          "type": {
                            "value": "SetReturnNumber"
                          },
                          "parameters": [
                            "Completion"
                          ]
                        }
                      ]
                    }
                  ],
                  "variables": [
                    {
                      "folded": true,
                      "name": "Completion",
                      "type": "number",
                      "value": 0
                    },
                    {
                      "folded": true,
                      "name": "X",
                      "type": "number",
                      "value": 0
                    },
                    {
                      "folded": true,
                      "name": "Y",
                      "type": "number",
                      "value": 0
                    }
                  ]
                }
              ],
              "expressionType": {
                "type": "expression"
              },
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "supplementaryInformation": "PrimitiveDrawing::Drawer",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "Territory::Territory",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            }
          ],
          "propertyDescriptors": [
            {
              "value": "",
              "type": "Behavior",
              "label": "Marching squares behavior",
              "description": "",
              "group": "",
              "extraInformation": [
                "MarchingSquares::MarchingSquaresBehavior"
              ],
              "name": "MarchingSquaresBehavior"
            },
            {
              "value": "19",
              "type": "Number",
              "label": "Border size",
              "description": "",
              "group": "",
              "extraInformation": [],
              "name": "BorderSize"
            }
          ],
          "sharedPropertyDescriptors": []
        }
      ],
      "eventsBasedObjects": []
    }
  ],
  "externalLayouts": [],
  "externalSourceFiles": []
}